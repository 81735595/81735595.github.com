<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[èŠèŠåŠ¨æ€è§„åˆ’(2) -- ç‰¹å¾]]></title>
      <url>%2F2017%2F02%2F24%2Fdynamic-programming-2%2F</url>
      <content type="text"><![CDATA[ä¹¦æŽ¥å‰æ–‡ï¼Œä¸Šå›žå’±ä»¬è¯´åˆ°è¦å¦‚ä½•é‰´åˆ«åŠ¨æ€è§„åˆ’å¯è§£é—®é¢˜ã€‚æˆ‘é¢„å‘Šè¯´è¦ä»Žè®¡ç®—æœºå·¥ä½œåŽŸç†å¼€å§‹è®²èµ·â€¦â€¦å‘ƒâ€¦â€¦è²Œä¼¼è·ŸåŽŸæœ¬è¦è®²çš„ä¸œè¥¿å·®çš„æœ‰ç‚¹å„¿è¿œå‘¢â€¦â€¦é‚£ä¹ˆä¸ºå•¥éžè¦ä»Žè¿™ä¹ˆåº•å±‚çš„é—®é¢˜å¼€å§‹è®²èµ·å‘¢ï¼Ÿæ€Žä¹ˆè¯´å‘¢â€¦â€¦å°±å¥½æ¯”æˆ‘è¦è®²è¥¿æ¸¸è®°ï¼Œå¦‚æžœåªè¯´ä¸€å¥â€œå”åƒ§å¸ˆå¾’å››äººåŽ»è¥¿å¤©å–ç»ç„¶åŽéƒ½ä¿®æˆæ­£æžœäº†â€ï¼Œå¯¹äºŽæ²¡çœ‹è¿‡è¥¿æ¸¸è®°çš„äººæ¥è¯´ï¼Œå”åƒ§æ˜¯è°ã€å¸ˆå¾’å››äººåˆæ˜¯è°ã€ä¸ºå•¥éžå¾—è·‘è¥¿å¤©åŽ»å–ç»ç­‰ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œä¸åŽ»ç¿»ç¿»åŽŸè‘—æœæœèµ„æ–™æ˜¯è‚¯å®šä¸çŸ¥é“æ€Žä¹ˆå›žäº‹çš„ã€‚æ‰€ä»¥è¿˜æ˜¯å°½é‡æ‰ç¢Žäº†è®²å§ï¼Œä¸ç„¶çœ‹å®Œäº†è¿˜å¾—ä¸€é€šç¿»æŸ¥èµ„æ–™ï¼Œæ€ªéº»çƒ¦çš„â€¦â€¦ å°½ç®¡è®¡ç®—æœºæŠ€æœ¯è‡ª20ä¸–çºª40å¹´ä»£ç¬¬ä¸€éƒ¨ç”µå­é€šç”¨è®¡ç®—æœºè¯žç”Ÿä»¥æ¥ä¸€ç›´é£žé€Ÿçš„å‘å±•ï¼Œä½†æ˜¯ï¼ŒçŽ°ä»£è®¡ç®—æœºä»ç„¶é‡‡ç”¨å†¯è¯ºä¾æ›¼ç»“æž„æ¥å®žçŽ°ã€‚å†¯è¯ºä¾æ›¼ç»“æž„å°†è®¡ç®—æœºæè¿°ä¸ºäº”éƒ¨åˆ†ï¼šè¾“å…¥è®¾å¤‡ã€æŽ§åˆ¶å™¨ã€è¿ç®—å™¨ã€å­˜å‚¨å™¨å’Œè¾“å‡ºè®¾å¤‡ã€‚å·¥ä½œæµç¨‹å¤§æ¦‚å°±æ˜¯ï¼Œè¾“å…¥è®¾å¤‡ä¼ å…¥æ•°æ®ï¼ŒæŽ§åˆ¶å™¨å‘å‡ºæŒ‡ä»¤ï¼Œè¿ç®—å™¨æ ¹æ®æŒ‡ä»¤åšç®—æ•°é€»è¾‘è¿ç®—ï¼Œæœ€åŽå­˜å‚¨æˆ–è€…è¾“å‡ºç»“æžœã€‚å¦‚æžœå’±ä»¬åªå…³æ³¨è®¡ç®—æœºçš„ç†è®ºåŽŸç†ï¼Œåœ¨æŠ½è±¡ä¸€ç‚¹çš„çœ‹è®¡ç®—æœºå·¥ä½œçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä½ ä¼šå‘çŽ°ï¼Œåˆšæ‰æˆ‘ä»¬æè¿°çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥ç”¨æ•°å­¦ç†è®ºæ¥æ¦‚æ‹¬ã€‚å­˜å‚¨å™¨å¯ä»¥çœ‹åšä¸€ä¸ªåˆ—ä¸¾äº†è®¡ç®—æœºå­˜åœ¨çš„æ‰€æœ‰å¯èƒ½çŠ¶æ€çš„é›†åˆï¼ŒæŽ§åˆ¶å™¨æŒ‡ä»¤å¯ä»¥çœ‹åšä¸€ç»„çŠ¶æ€è½¬æ¢å‡½æ•°ï¼Œè¿ç®—å™¨ä½¿ç”¨çŠ¶æ€è½¬æ¢å‡½æ•°ï¼Œä»Žè¾“å…¥çš„çŠ¶æ€å’Œé›†åˆçš„çŠ¶æ€ï¼ŒæŽ¨å¯¼å‡ºè¾“å‡ºçš„çŠ¶æ€ã€‚æ‰€ä»¥è®¡ç®—æœºçš„å·¥ä½œåŽŸç†ï¼Œå¯ä»¥ç®€å•çš„æ¦‚æ‹¬ä¸ºï¼Œåˆ©ç”¨å½“å‰çš„çŠ¶æ€è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆç¾Žé”™å„¿ï¼Œæˆ‘å°±æ˜¯åœ¨è¯´çŠ¶æ€æœºâ€¦â€¦ï¼‰ã€‚ æˆ‘ä»¬å¹³æ—¶ç¼–å†™ç¨‹åºï¼Œæ˜¯åœ¨ä½¿ç”¨è®¡ç®—æœºå¸®æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚ä»Žè®¡ç®—æœºçš„æœ¬è´¨æ˜¯çŠ¶æ€æœºè¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œä½ æ€è€ƒå¦‚ä½•ç¼–å†™ç¨‹åºæ¥è§£å†³é—®é¢˜ï¼Œå…¶å®žå°±æ˜¯åœ¨æ€è€ƒå¦‚ä½•å°†è¿™ä¸ªé—®é¢˜è¡¨è¾¾æˆçŠ¶æ€ï¼ˆç”¨å“ªäº›å˜é‡ï¼Œå­˜å‚¨å“ªäº›æ•°æ®ï¼‰ä»¥åŠå¦‚ä½•åœ¨çŠ¶æ€ä¹‹é—´ä¸­è½¬æ¢ï¼ˆæ€Žæ ·æ ¹æ®ä¸€äº›å˜é‡è®¡ç®—å‡ºå¦ä¸€äº›å˜é‡ï¼‰ã€‚æˆ‘ä»¬åœ¨çœ‹ç®—æ³•åˆ†æžæ–‡ç« æ—¶ï¼Œç»å¸¸èƒ½çœ‹åˆ°çš„å¹³æ—¶èƒ½çœ‹åˆ°çš„æ‰€è°“ç©ºé—´å¤æ‚åº¦ï¼Œå°±æ˜¯ä¸ºäº†æ”¯æŒä½ çš„è½¬æ¢çŠ¶æ€æ‰€å¿…éœ€å­˜å‚¨çš„çŠ¶æ€æœ€å¤šæœ‰å¤šå°‘ï¼›æ‰€è°“æ—¶é—´å¤æ‚åº¦ï¼Œå°±æ˜¯ä»Žåˆå§‹çŠ¶æ€åˆ°è¾¾æœ€ç»ˆçŠ¶æ€ä¸­é—´éœ€è¦åšå¤šå°‘æ¬¡çŠ¶æ€è½¬æ¢ã€‚ è¿˜æ‹¿æˆ‘ä»¬ä¸Šä¸€æ¬¡è¯´çš„æ–æ³¢æ‹‰å¥‘æ•°åˆ—åšðŸŒ° ï¼š æˆ‘è¦è®¡ç®—ç¬¬100é¡¹ï¼Œä¹‹å‰çš„æ¯ä¸€é¡¹å°±æ˜¯è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªçŠ¶æ€ã€‚æ¯æ±‚æ–°ä¸€é¡¹ï¼ˆæ–°çš„ä¸€ä¸ªçŠ¶æ€ï¼‰åªéœ€è¦ä¹‹å‰çš„ä¸¤ä¸ªé¡¹ï¼ˆä¹‹å‰çš„ä¸¤ä¸ªçŠ¶æ€ï¼‰ã€‚æ‰€ä»¥åŒä¸€ä¸ªæ—¶åˆ»ï¼Œæœ€å¤šåªéœ€è¦ä¿å­˜ä¸¤ä¸ªçŠ¶æ€ï¼Œç©ºé—´å¤æ‚åº¦å°±æ˜¯å¸¸æ•°ï¼›æ¯æ±‚ä¸€ä¸ªæ–°çŠ¶æ€ï¼Œæ‰€éœ€è¦çš„æ—¶é—´æ˜¯å¸¸æ•°ï¼Œè€Œä¹‹å‰çš„çŠ¶æ€æ˜¯çº¿æ€§é€’å¢žçš„ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å°±æ˜¯çº¿æ€§çš„ã€‚ ä¸Šé¢è¿™ç§çŠ¶æ€è®¡ç®—å¾ˆç›´æŽ¥ï¼Œåªéœ€è¦ä¾ç…§å›ºå®šçš„æ¨¡å¼ä»Žæ—§çŠ¶æ€è®¡ç®—å‡ºæ–°çŠ¶æ€å°±è¡Œï¼ˆa[i]=a[i-1]+a[i-2]ï¼‰ï¼Œä¸éœ€è¦è€ƒè™‘æ˜¯ä¸æ˜¯éœ€è¦æ›´å¤šçš„çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦é€‰æ‹©å“ªäº›æ—§çŠ¶æ€æ¥è®¡ç®—æ–°çŠ¶æ€ã€‚å¯¹äºŽè¿™æ ·çš„è§£æ³•ï¼Œæˆ‘ä»¬å«é€’æŽ¨ã€‚ æ–æ³¢æ‹‰å¥‘æ•°åˆ—è¿™ä¸ªä¾‹å­è¿‡äºŽç®€å•ï¼Œä»¥è‡³äºŽè®©äººå¿½è§†äº†é˜¶æ®µçš„æ¦‚å¿µã€‚æ‰€è°“é˜¶æ®µæ˜¯æŒ‡éšç€é—®é¢˜çš„è§£å†³ï¼Œåœ¨åŒä¸€ä¸ªæ—¶åˆ»å¯èƒ½ä¼šå¾—åˆ°çš„ä¸åŒçŠ¶æ€çš„é›†åˆã€‚æ–æ³¢æ‹‰å¥‘æ•°åˆ—ä¸­ï¼Œæ¯ä¸€æ­¥ä¼šè®¡ç®—å¾—åˆ°ä¸€ä¸ªæ–°æ•°å­—ï¼Œæ‰€ä»¥æ¯ä¸ªé˜¶æ®µåªæœ‰ä¸€ä¸ªçŠ¶æ€ã€‚å’±ä»¬æ¥æƒ³è±¡å¦å¤–ä¸€ä¸ªæƒ…æ™¯ï¼šå‡å¦‚æŠŠä½ æ”¾åœ¨ä¸€ä¸ªå›´æ£‹æ£‹ç›˜ä¸Šçš„æŸä¸€ç‚¹ï¼Œä½ æ¯ä¸€æ­¥åªèƒ½èµ°ä¸€æ ¼ï¼Œå› ä¸ºä½ å¯ä»¥ä¸œå—è¥¿åŒ—éšä¾¿èµ°ï¼Œæ‰€ä»¥ä½ å½“ä½ åŒæ ·èµ°å››æ­¥å¯èƒ½ä¼šå¤„äºŽå¾ˆå¤šä¸ªä¸åŒçš„ä½ç½®ã€‚ä»Žå¤´å¼€å§‹èµ°äº†å‡ æ­¥å°±æ˜¯ç¬¬å‡ ä¸ªé˜¶æ®µï¼Œèµ°äº†næ­¥å¯èƒ½å¤„äºŽçš„ä½ç½®ç§°ä¸ºä¸€ä¸ªçŠ¶æ€ï¼Œèµ°äº†è¿™næ­¥æ‰€æœ‰å¯èƒ½åˆ°è¾¾çš„ä½ç½®çš„é›†åˆå°±æ˜¯è¿™ä¸ªé˜¶æ®µä¸‹æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ã€‚ çŽ°åœ¨é—®é¢˜æ¥äº†ï¼Œæœ‰äº†é˜¶æ®µä¹‹åŽï¼Œè®¡ç®—æ–°çŠ¶æ€å¯èƒ½ä¼šé‡åˆ°å„ç§å¥‡è‘©çš„æƒ…å†µï¼Œé’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼Œå°±éœ€è¦ä¸åŒçš„ç®—æ³•ï¼Œä¸‹é¢å°±åˆ†æƒ…å†µæ¥è¯´æ˜Žä¸€ä¸‹ï¼š å‡å¦‚é—®é¢˜æœ‰nä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¤šä¸ªçŠ¶æ€ï¼Œä¸åŒé˜¶æ®µçš„çŠ¶æ€æ•°ä¸å¿…ç›¸åŒï¼Œä¸€ä¸ªé˜¶æ®µçš„ä¸€ä¸ªçŠ¶æ€å¯ä»¥å¾—åˆ°ä¸‹ä¸ªé˜¶æ®µçš„æ‰€æœ‰çŠ¶æ€ä¸­çš„å‡ ä¸ªã€‚é‚£æˆ‘ä»¬è¦è®¡ç®—å‡ºæœ€ç»ˆé˜¶æ®µçš„çŠ¶æ€æ•°è‡ªç„¶è¦ç»åŽ†ä¹‹å‰æ¯ä¸ªé˜¶æ®µçš„æŸäº›çŠ¶æ€ã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸçš„è®¡ç®—æ‰€æœ‰çŠ¶æ€ã€‚ æ¯”å¦‚æ‹¿è¿™æ ·ä¸€ä¸ªçš„æ£‹ç›˜é—®é¢˜ä¸¾ä¾‹ï¼š ä»Žæ£‹ç›˜çš„å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’æœ€çŸ­éœ€è¦å‡ æ­¥ã€‚ç­”æ¡ˆå¾ˆæ˜¾ç„¶ï¼Œç”¨è¿™æ ·ä¸€ä¸ªç®€å•çš„é—®é¢˜æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬ç†è§£é˜¶æ®µå’ŒçŠ¶æ€ã€‚æŸä¸ªé˜¶æ®µç¡®å®žå¯ä»¥æœ‰å¤šä¸ªçŠ¶æ€ï¼Œæ­£å¦‚è¿™ä¸ªé—®é¢˜ä¸­èµ°næ­¥å¯ä»¥èµ°åˆ°å¾ˆå¤šä½ç½®ä¸€æ ·ã€‚ä½†æ˜¯åŒæ ·næ­¥ä¸­ï¼Œæœ‰å“ªäº›ä½ç½®å¯ä»¥è®©æˆ‘ä»¬åœ¨ç¬¬n+1æ­¥ä¸­èµ°çš„æœ€è¿œå‘¢ï¼Ÿæ²¡é”™ï¼Œæ­£æ˜¯ç¬¬næ­¥ä¸­èµ°çš„æœ€è¿œçš„ä½ç½®ã€‚æ¢æˆä¸€å¥ç†Ÿæ‚‰è¯å«åšâ€œä¸‹ä¸€æ­¥æœ€ä¼˜æ˜¯ä»Žå½“å‰æœ€ä¼˜å¾—åˆ°çš„â€ã€‚æ‰€ä»¥ä¸ºäº†è®¡ç®—æœ€ç»ˆçš„æœ€ä¼˜å€¼ï¼Œåªéœ€è¦å­˜å‚¨æ¯ä¸€æ­¥çš„æœ€ä¼˜å€¼å³å¯ï¼Œè§£å†³ç¬¦åˆè¿™ç§æ€§è´¨çš„é—®é¢˜çš„ç®—æ³•å°±å«è´ªå¿ƒç®—æ³•ã€‚å¦‚æžœåªçœ‹æœ€ä¼˜çŠ¶æ€ä¹‹é—´çš„è®¡ç®—è¿‡ç¨‹æ˜¯ä¸æ˜¯å’Œæ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„è®¡ç®—å¾ˆåƒï¼Ÿæ‰€ä»¥è®¡ç®—çš„æ–¹æ³•ä¹Ÿæ˜¯é€’æŽ¨ã€‚ æ—¢ç„¶é—®é¢˜éƒ½æ˜¯å¯ä»¥åˆ’åˆ†æˆé˜¶æ®µå’ŒçŠ¶æ€çš„ã€‚è¿™æ ·ä¸€æ¥æˆ‘ä»¬ä¸€ä¸‹å­è§£å†³äº†ä¸€å¤§ç±»é—®é¢˜ï¼šä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¯ä»¥ç”±å‰ä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¾—åˆ°ã€‚ å¦‚æžœä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜æ— æ³•ç”¨å‰ä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜å¾—åˆ°å‘¢ï¼Ÿï¼ˆéœ€è¦å‰ä¸¤ä¸ªé˜¶æ®µå¾—åˆ°å½“å‰æœ€ä¼˜ï¼Œè·Ÿåªç”¨å‰ä¸€ä¸ªé˜¶æ®µå¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼‰ æœ€éº»çƒ¦çš„æƒ…å†µåœ¨äºŽä½ éœ€è¦ä¹‹å‰æ‰€æœ‰çš„æƒ…å†µæ‰è¡Œã€‚å†ä¸¾ä¸€ä¸ªæŽ¢ç´¢è¿·å®«çš„ðŸŒ° ï¼š çŽ°åœ¨æœ‰ä¸€ä¸ªè¿·å®«ï¼Œæˆ‘ä»¬è¦è®¡ç®—ä»Žèµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯çº¿ã€‚è¿™æ—¶ä½ å°±ä¸èƒ½åªä¿å­˜å½“å‰é˜¶æ®µçš„çŠ¶æ€äº†ï¼Œå› ä¸ºè¦æ±‚ä½ è®¡ç®—æœ€çŸ­è·¯å¾„ï¼Œæ‰€ä»¥ä½ å¿…é¡»çŸ¥é“ä¹‹å‰èµ°è¿‡çš„æ‰€æœ‰ä½ç½®ã€‚å› ä¸ºå³ä¾¿ä½ å½“å‰åœ¨çš„ä½ç½®ä¸å˜ï¼Œä¹‹å‰çš„è·¯çº¿ä¸åŒä¹Ÿä¼šå½±å“ä½ ä¹‹åŽèµ°çš„è·¯çº¿ã€‚è¿™æ—¶ä½ éœ€è¦ä¿å­˜çš„æ˜¯ä¹‹å‰æ¯ä¸ªé˜¶æ®µæ‰€ç»åŽ†çš„çŠ¶æ€ï¼Œæ ¹æ®ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€ä½ æ‰èƒ½è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ï¼æ¯ä¸ªé˜¶æ®µçš„çŠ¶æ€æˆ–è®¸ä¸å¤šï¼Œä½†æ˜¯æ¯ä¸ªçŠ¶æ€éƒ½å¯ä»¥è½¬ç§»åˆ°ä¸‹ä¸€é˜¶æ®µçš„å¤šä¸ªçŠ¶æ€ï¼Œè¿™ç§è®°å½•æ‰€æœ‰çŠ¶æ€è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ç®—æ³•å°±å«æœç´¢ã€‚æ‰€ä»¥æœç´¢çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯æŒ‡æ•°çº§çš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯æŒ‡æ•°çš„ã€‚ åˆšæ‰æåˆ°çš„é‚£ç§ä»¤äººä¸å¼€å¿ƒçš„æƒ…å†µï¼Œå°±å«åšæœ‰åŽæ•ˆæ€§ã€‚ åˆšåˆšçš„æƒ…å†µå®žåœ¨å¤ªæ™®éï¼Œæˆ‘ä»¬åˆšåˆšè¯´åˆ°çš„è§£å†³æ–¹æ³•ä¹Ÿå®žåœ¨å¤ªæš´åŠ›ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰å“ªäº›æƒ…å†µå¯ä»¥é¿å…å¦‚æ­¤çš„æš´åŠ›å‘¢ï¼Ÿå¥‘æœºå°±åœ¨äºŽåŽæ•ˆæ€§ã€‚ æœ‰è¿™ä¹ˆä¸€ç±»é—®é¢˜ï¼Œçœ‹ä¼¼éœ€è¦ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€ï¼Œå…¶å®žä¸ç”¨ã€‚æ¯”å¦‚æ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰é•¿åº¦é—®é¢˜ï¼š åœ¨ä¸€ä¸ªæ— åºçš„æ•°ç»„é‡Œï¼Œæ‰¾å‡ºä¸€ç»„å°½å¯èƒ½é•¿çš„ç”±ä½Žåˆ°é«˜æŽ’åˆ—çš„æ•°ï¼Œè¿™ç»„æ•°å°±å«æœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚ æ¯”å¦‚ï¼Œç»™å‡º[5,4,1,2,3]ï¼ŒLIS å°±æ˜¯ [1,2,3]ï¼Œé•¿åº¦æ˜¯3ï¼›ç»™å‡º[4,2,4,5,3,7]ï¼ŒLIS æ˜¯ [2,4,5,7]ï¼Œé•¿åº¦æ˜¯ 4ã€‚ çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ååº”å°±æ˜¯ç”¨éåŽ†åŽ»è§£å†³ã€‚ä»Žå¤´åˆ°å°¾ä¾æ¬¡æžšä¸¾æ˜¯å¦é€‰æ‹©å½“å‰çš„æ•°å­—ï¼Œæ¯é€‰å®šä¸€ä¸ªæ•°å­—å°±è¦åŽ»çœ‹çœ‹æ˜¯ä¸æ˜¯æ»¡è¶³â€œä¸Šå‡â€çš„æ€§è´¨ï¼Œè¿™é‡Œç¬¬iä¸ªé˜¶æ®µå°±æ˜¯åŽ»æ€è€ƒæ˜¯å¦è¦é€‰æ‹©ç¬¬iä¸ªæ•°ï¼Œç¬¬iä¸ªé˜¶æ®µæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯é€‰å’Œä¸é€‰ã€‚å“ˆå“ˆï¼Œä¾ç¨€å‡ºçŽ°äº†åˆšåˆšæœç´¢è¿·å®«çš„å½±å­ï¼ ä½†æ˜¯å½“æˆ‘ä»¬ä»”ç»†æ€è€ƒä¹‹åŽä¼šå‘çŽ°ï¼Œæ¯æ¬¡å½“æˆ‘å†³å®šè¦é€‰æ‹©å½“å‰æ•°å­—çš„æ—¶å€™ï¼Œåªéœ€è¦å’Œä¹‹å‰é€‰å®šçš„ä¸€ä¸ªæ•°å­—æ¯”è¾ƒï¼Œå°±èƒ½åšå‡ºåˆ¤æ–­äº†ï¼è¿™æ˜¯å’Œä¹‹å‰è¿·å®«é—®é¢˜çš„æœ¬è´¨ä¸åŒã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦è®°å½•ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€äº†ã€‚å› ä¸ºæœ€åŽè¦æ±‚çš„æ˜¯åºåˆ—é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•ä»¥æŸä¸ªå…ƒç´ ç»“å°¾çš„LISé•¿åº¦å°±å¥½ã€‚ è¿™ç§â€œæ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¯ä»¥ä»Žä¹‹å‰æŸä¸ªé˜¶æ®µçš„æŸä¸ªæˆ–æŸäº›çŠ¶æ€ç›´æŽ¥å¾—åˆ°â€çš„æ€§è´¨å°±å«åšæœ€ä¼˜å­ç»“æž„ï¼›è€Œâ€œä¸ç®¡çŠ¶æ€ä¹‹å‰æ˜¯å¦‚ä½•å¾—åˆ°çš„â€çš„æ€§è´¨å°±å«åšæ— åŽæ•ˆæ€§ã€‚ é‚£ä¹ˆï¼Œç»ˆäºŽå¯ä»¥è¯´å‡ºåŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸¤ä¸ªç‰¹ç‚¹äº†ï¼Œè¿™ä¸¤ä¸ªç‰¹ç‚¹å°±æ˜¯æœ€ä¼˜å­ç»“æž„å’Œæ— åŽæ•ˆæ€§ï¼åªè¦æœ‰è¿™ä¸¤ä¸ªç‰¹ç‚¹çš„é—®é¢˜ï¼Œå°±å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ¥è§£å†³äº†ã€‚ é€šè¿‡ä¹‹å‰çš„ä¸€ç³»åˆ—æè¿°æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯è¯¥ç”¨é€’æŽ¨ã€è´ªå¿ƒã€æœç´¢è¿˜æ˜¯åŠ¨æ€è§„åˆ’ï¼Œå®Œå…¨æ˜¯ç”±è¿™ä¸ªé—®é¢˜æœ¬èº«é˜¶æ®µé—´çš„çŠ¶æ€è½¬ç§»æ–¹å¼å†³å®šçš„ï¼ æ¯ä¸ªé˜¶æ®µåªæœ‰ä¸€ä¸ªçŠ¶æ€ â€”â€” ç”¨é€’æŽ¨ã€‚ æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€éƒ½æ˜¯ç”±ä¸Šä¸€ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¾—åˆ° â€”â€” ç”¨è´ªå¿ƒã€‚ æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€æ˜¯ç”±ä¹‹å‰æ‰€æœ‰é˜¶æ®µçš„çŠ¶æ€çš„ç»„åˆå¾—åˆ° â€”â€” ç”¨æœç´¢ã€‚ æ¯ä¸ªé˜¶æ®µçš„æœ€ä¼˜çŠ¶æ€å¯ä»¥ä»Žä¹‹å‰æŸä¸ªé˜¶æ®µçš„æŸä¸ªæˆ–æŸäº›çŠ¶æ€ç›´æŽ¥å¾—åˆ°è€Œä¸ç®¡ä¹‹å‰è¿™ä¸ªçŠ¶æ€æ˜¯å¦‚ä½•å¾—åˆ°çš„ â€”â€” ç”¨åŠ¨æ€è§„åˆ’ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªé—®é¢˜ä»Žä¸åŒçš„è§’åº¦åˆ†æžï¼Œå„é˜¶æ®µçŠ¶æ€çš„å®šä¹‰å’ŒçŠ¶æ€è½¬ç§»æ–¹å¼å¯èƒ½éƒ½ä¸ç›¸åŒï¼Œå­˜åœ¨ä¸€ä¸ªæœ‰åŽæ•ˆæ€§çš„å®šä¹‰ï¼Œå¹¶ä¸ä»£è¡¨è¯¥é—®é¢˜ä¸é€‚ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ¥è§£ã€‚å°±åƒæˆ‘æœ€æ—©è¯´è¿‡çš„ä¸€æ ·ï¼šå¯»æ‰¾çœ‹é—®é¢˜çš„è§’åº¦ï¼Œæ‰æ˜¯åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒ~ å¥½çš„é‚£ä¹ˆç”±äºŽæ—¶é—´ä¸è¶³æœ¬æ¬¡çš„åšå®¢å°±åˆ°è¿™é‡Œï¼Œå¦‚æžœä¸å‡ºæ„å¤–çš„è¯ï¼Œå¤§æ¦‚å¯èƒ½maybeä¹Ÿè®¸ä¸‹å‘¨äº”ä¼šæ›´æ–°å§~ï¼èƒ½ä¸èƒ½å‡†æ—¶æ›´æ–°ï¼Œå°±å…¨çœ‹ç±³å¨œæ¡‘ç‚¹èµžæ‰“èµè½¬å‘å®‰åˆ©å‘è¯„è®ºçš„çƒ­æƒ…å•¦~ï¼ ç™½äº†ä¸ªç™½~ï¼ ç›¸å…³èµ„æ–™ ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’ï¼ŸåŠ¨æ€è§„åˆ’çš„æ„ä¹‰æ˜¯ä»€ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[èŠèŠåŠ¨æ€è§„åˆ’(1) -- æ¦‚å¿µ]]></title>
      <url>%2F2017%2F02%2F17%2Fdynamic-programming-1%2F</url>
      <content type="text"><![CDATA[ä¹‹å‰æŸå¤©é¢è¯•äº†ä¸ªå¹´è½»çš„å·¥ç¨‹å¸ˆï¼Œä¹ æƒ¯æ€§çš„é—®äº†å‡ ä¸ªç®€å•çš„ç®—æ³•é¢˜ï¼Œå†’æ³¡æŽ’åºäºŒåˆ†æŸ¥æ‰¾ä¹‹ç±»çš„ã€‚ä»–æ²¡æœ‰ç­”ä¸Šæ¥ï¼Œè§£é‡Šé“è¿™äº›å¹³æ—¶å¼€å‘ä¸­æ ¹æœ¬ä¸ä¼šç”¨åˆ°ï¼Œå°±ç®—éœ€è¦ï¼Œå„ç§å¼€æºæ¡†æž¶ä¹Ÿéƒ½å°è£…çš„çƒ‚å¤§è¡—äº†ï¼Œæ ¹æœ¬ä¸ç”¨è‡ªå·±å†™ã€‚ å¬ä»–è¿™ä¹ˆè¯´ç€ï¼Œä»¿ä½›çœ‹åˆ°äº†å‡ å¹´å‰çš„è‡ªå·±ã€‚å½“æ—¶æˆ‘ä¹Ÿè§‰å¾—ä¸ç”¨äº†è§£ç®—æ³•çŸ¥è¯†ï¼ŒçŸ¥é“å†’æ³¡å¿«æŽ’èƒ½åº”ä»˜é¢è¯•å°±å¾—äº†ã€‚å‰ç«¯é¢å‘çš„æ˜¯ç•Œé¢åŠäº¤äº’å®žçŽ°ï¼Œé™¤éžä½ å¡«æ¸¸æˆæˆ–è€…å¯Œæ–‡æœ¬çš„å‘ï¼Œä¸ç„¶å“ªå„¿ç”¨çš„ä¸Šä»€ä¹ˆç®—æ³•ã€‚çœŸéœ€è¦äº†ï¼Œä¸Šç½‘æœå‘—ã€‚Max Howell è¿žä¸ªç¿»è½¬äºŒå‰æ ‘éƒ½ä¸ä¼šï¼Œä¸ä¹Ÿç…§æ ·æŠŠ Homebrew åšå‡ºæ¥äº†å—ã€‚ ç›´åˆ°æˆ‘å¬äº†ä¸€æ¬¡ä¹‹å‰çš„é¢†å¯¼çš„åˆ†äº«ã€‚ä»–åœ¨åˆ†äº«ä¸­ä»‹ç»ï¼Œé¢è¯•ä¸­è€ƒå¯Ÿç®—æ³•çŸ¥è¯†ï¼Œå¹¶ä¸æ˜¯æƒ³çœ‹ä½ èƒŒäº†å¤šå°‘é¢˜ï¼Œè€Œæ˜¯æƒ³è€ƒå¯Ÿä½ è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€‚ç®—æ³•èƒ½åŠ›ä½“çŽ°çš„ä¸åªæ˜¯çŸ¥è¯†å‚¨å¤‡ï¼Œè¿˜èƒ½ä½“çŽ°ä¸€ä¸ªäººçš„èªæ˜Žæ‰æ™ºã€‚ å¬å®Œä¹‹åŽæˆ‘èŒ…åŽ•é¡¿å¼€ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼Œæ‰€è°“çš„ç®—æ³•ï¼Œå…¶å®žå°±æ˜¯ä½ è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚æ‰€ä»¥å°±ç®—ä½ ä¸çŸ¥é“æœ€ä½³ç­”æ¡ˆï¼Œç”¨ä½ çŸ¥é“çš„çŸ¥è¯†è§£å†³é—®é¢˜ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§ç®—æ³•ã€‚æ¯”å¦‚ä½ è¦åŽ»ä¸ªåœ°æ–¹ï¼Œå¯ä»¥åå…¬äº¤ååœ°é“ï¼Œä½ éƒ½ä¸çŸ¥é“æ€Žä¹ˆåï¼Œèµ°è¿‡åŽ»ä¹Ÿç®—æ˜¯ä¸€ç§ç®—æ³•ã€‚ç®—æ³•é¢˜ä¹Ÿå¹¶ä¸æ˜¯è·Ÿå®žé™…å¼€å‘æ²¡æœ‰å…³è”ã€‚å°±å¥½æ¯” â€œæ°´æ± èƒ½è£…100Læ°´ï¼Œè¿›æ°´ç®¡æ¯åˆ†é’Ÿè¿›æ°´10Lï¼Œå‡ºæ°´ç®¡æ¯åˆ†é’Ÿå‡ºæ°´5Lï¼Œå¤šé•¿æ—¶é—´æ°´æ± èƒ½æ»¡ï¼Ÿâ€ è¿™ç§å‚»é€¼çš„é—®é¢˜ï¼Œå¦‚æžœæ”¹æˆ â€œä¸€ä¸ªé©´ç‰Œçš„åŒ…åŒ…1ä¸‡ï¼Œä½ ä¸€ä¸ªæœˆæŒ£5000ï¼ŒèŠ±2000ï¼Œå¤šé•¿æ—¶é—´èƒ½ä¹°çš„èµ·ï¼Ÿâ€ ä¸å°±æœ‰äº†å®žé™…çš„æ„ä¹‰äº†å—â€¦â€¦è¯è¯´æˆ‘è¿˜çœŸæ˜¯å–œæ¬¢æ‰“æ¯”æ–¹çš„(ï¿£â–½ï¿£)â€¦â€¦ é‚£ä¹ˆï¼Œæ€Žä¹ˆæ‰ç®—çœŸæ­£å…·å¤‡ä¸€å®šç®—æ³•èƒ½åŠ›ï¼Œå…¥äº†ç®—æ³•çš„é—¨å„¿äº†å‘¢ï¼Ÿæ˜¾ç„¶åªä¼šä¸ªæŽ’åºè‚¯å®šæ˜¯ä¸è¡Œçš„â€¦â€¦å½“ç„¶æˆ‘å¹¶ä¸æ˜¯è¯´æŽ’åºç®—æ³•å°±ç®€å•ï¼Œå„ç§æŽ’åºç®—æ³•ä¼˜åŒ–å•¥çš„æˆ‘è§‰å¾—ä¹ŸæŒºéš¾çš„â€¦â€¦æˆ‘ä¸ªäººè§‰å¾—ï¼Œåœ¨å„ç§å¸¸è§çš„ç®—æ³•ä¸­ï¼ŒåŠ¨æ€è§„åˆ’åº”è¯¥ç®—æ˜¯ä¸€é“åŽå„¿ï¼Œè¿‡åŽ»äº†å°±ç®—å…¥é—¨å„¿äº†ã€‚winterå¤§ç¥žä¹Ÿè¯´è¿‡ï¼Œå†™å‡ºåŠ¨æ€è§„åˆ’ï¼Œå†è°ˆç®—æ³•ã€‚ é‚£ä¹ˆåŠ¨æ€è§„åˆ’åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åŠ¨æ€è§„åˆ’(dynamic programming)æ˜¯æ±‚è§£å¤šé˜¶æ®µå†³ç­–è¿‡ç¨‹(multistep decision process)æœ€ä¼˜åŒ–çš„æ•°å­¦æ–¹æ³•ã€‚ ç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªå®šä¹‰çš„æ—¶å€™æˆ‘è„‘å­é‡Œåªæœ‰ â€œè¯´äººè¯â€ è¿™ä¸‰ä¸ªå­—â€¦â€¦okï¼Œè®©æˆ‘ä»¬æ¥ä»”ç»†æŽ°åƒæŽ°åƒã€‚ ä»”ç»†è§‚å¯Ÿå‘çŽ°ï¼Œè¿™ä¸ªå®šä¹‰å¯ä»¥æ‹†åˆ†æˆä»¥ä¸‹ä¸¤éƒ¨åˆ†ï¼š åŠ¨æ€è§„åˆ’ç”¨æ¥æ±‚è§£é—®é¢˜çš„æœ€ä¼˜åŒ–æ–¹æ¡ˆçš„ é—®é¢˜è¡¨çŽ°ä¸ºå¤šé˜¶æ®µå†³ç­–è¿‡ç¨‹ æœ€ä¼˜åŒ–æ–¹æ¡ˆæ¯”è¾ƒå¥½ç†è§£ã€‚æ‰€è°“å¤šé˜¶æ®µå†³ç­–ï¼Œæ˜¯å°†å†³ç­–é—®é¢˜çš„å…¨è¿‡ç¨‹æ°å½“åœ°åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªç›¸äº’è”ç³»çš„å­è¿‡ç¨‹ï¼ˆæ¯ä¸ªå­è¿‡ç¨‹ä¸ºä¸€ä¸ªé˜¶æ®µï¼‰ï¼Œä»¥ä¾¿æŒ‰ç…§ä¸€å®šçš„æ¬¡åºåŽ»æ±‚è§£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¤§çš„é—®é¢˜å¯ä»¥è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªç›¸äº’è”ç³»çš„å­é—®é¢˜ã€‚è¿™ç§ç›¸äº’è”ç³»çš„å­é—®é¢˜ï¼Œåˆå«äº¤å å­é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜Žäº¤å å­é—®é¢˜ï¼Œä»¥æ–æ³¢æ‹‰å¥‘(Fibonacci)æ•°åˆ—ä¸ºä¾‹ï¼Œè®¡ç®—ç¬¬100é¡¹çš„æ—¶å€™ï¼Œéœ€è¦è®¡ç®—ç¬¬99é¡¹å’Œ98é¡¹ï¼›åœ¨è®¡ç®—ç¬¬101é¡¹çš„æ—¶å€™ï¼Œéœ€è¦ç¬¬100é¡¹å’Œç¬¬99é¡¹ï¼Œè¿™æ—¶å€™ä½ è¿˜éœ€è¦é‡æ–°è®¡ç®—ç¬¬99é¡¹å—ï¼Ÿä¸éœ€è¦ï¼Œä½ åªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è®¡ç®—çš„æ—¶å€™æŠŠå®ƒè®°ä¸‹æ¥å°±å¯ä»¥äº†ã€‚ä¸Šè¿°çš„éœ€è¦å†æ¬¡è®¡ç®—çš„â€œç¬¬99é¡¹â€ï¼Œå°±å«äº¤å å­é—®é¢˜ã€‚ åœ¨ç†è§£äº†ä¸Šé¢æ¯ä¸ªå­¦æœ¯åè¯çš„æ¦‚å¿µä»¥åŽï¼Œå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œæ‰€è°“åŠ¨æ€è§„åˆ’ï¼Œå°±æ˜¯å¯¹äºŽæŸä¸€ç±»é—®é¢˜çš„è§£å†³æ–¹æ³•â€¦â€¦å‘ƒâ€¦â€¦å¯èƒ½ä¼šæœ‰äººè§‰å¾—è¿™æ˜¯åºŸè¯ï¼Œä½†å…¶å®žæˆ‘ä»¬æ­£åœ¨ä¸€æ­¥æ­¥æŽ¥è¿‘é—®é¢˜çš„æ ¸å¿ƒã€‚ä¸ªäººè§‰å¾—ï¼ŒåŠ¨æ€è§„åˆ’çš„é‡ç‚¹å°±åœ¨äºŽå¦‚ä½•é‰´å®šâ€œæŸä¸€ç±»é—®é¢˜â€æ˜¯åŠ¨æ€è§„åˆ’å¯è§£çš„ï¼Œè€Œä¸æ˜¯çº ç»“ç”¨ä»€ä¹ˆè§£å†³æ–¹æ³•ã€‚å› ä¸ºç”¨ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Œå–å†³äºŽä½ ä»Žä»€ä¹ˆè§’åº¦è§‚å¯Ÿé—®é¢˜ï¼Œæ‹†åˆ†å­é—®é¢˜ã€‚å¯»æ‰¾çœ‹é—®é¢˜çš„è§’åº¦ï¼Œæ‰æ˜¯åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒã€‚ é‚£ä¹ˆï¼Œå¦‚ä½•é‰´å®šåŠ¨æ€è§„åˆ’å¯è§£çš„é—®é¢˜å‘¢ï¼Ÿè¿™ä¼šæ˜¯ä¸€ä¸ª long long storyâ€¦â€¦æ‰€ä»¥ï¼Œå’±ä»¬ä¸‹æœŸå†è®²~~(ï¿£â–½ï¿£)~~ï¼ï¼ï¼ å¥½çš„é‚£ä¹ˆç”±äºŽæ—¶é—´ä¸è¶³æœ¬æ¬¡çš„åšå®¢å°±åˆ°è¿™é‡Œï¼Œç®€å•é¢„å‘Šä¸€ä¸‹ï¼Œä¸‹æœŸåšå®¢ä¼šä»Žè®¡ç®—æœºæ˜¯æ€Žä¹ˆå·¥ä½œçš„è¯´èµ·äº†â€¦â€¦ å¦‚æžœä¸å‡ºæ„å¤–çš„è¯ï¼Œå¤§æ¦‚å¯èƒ½maybeä¹Ÿè®¸ä¸‹å‘¨äº”ä¼šæ›´æ–°å§~ï¼èƒ½ä¸èƒ½å‡†æ—¶æ›´æ–°ï¼Œå°±å…¨çœ‹ç±³å¨œæ¡‘ç‚¹èµžæ‰“èµè½¬å‘å®‰åˆ©å‘è¯„è®ºçš„çƒ­æƒ…å•¦~ï¼ ç™½äº†ä¸ªç™½~ï¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¹´ç»ˆå¥–é¿ç¨Žç¨‹åºä¼˜åŒ–]]></title>
      <url>%2F2017%2F02%2F03%2Fjavascript-year-bonus-evade-tax-2%2F</url>
      <content type="text"><![CDATA[æ˜¥èŠ‚å‰å†™äº†ä¸ªå¹´ç»ˆå¥–é¿ç¨Žçš„ç¨‹åºã€‚ä½†æ˜¯ä¹‹å‰çš„å®žçŽ°ä¸Šæ•ˆçŽ‡æœ‰ç‚¹å„¿ä½Žï¼Œè¿™æ¬¡çš„åšå®¢å°±å†™ä¸€å†™å¦‚ä½•ä¼˜åŒ–è¿™ä¸ªç¨‹åºå¥½äº†ï¼ˆå…¶å®žæ˜¯å¿«åˆ°deadlineæ‰æƒ³èµ·æ¥è¦å†™åšå®¢ä¸´æ—¶æŠ“çš„é¢˜ç›®â€¦â€¦ï¼‰ é’ˆå¯¹è¿™ä¸ªå¹´ç»ˆå¥–é¿ç¨Žçš„ç¨‹åºï¼Œä¼˜åŒ–çš„ä¸»è¦æ–¹å‘æ˜¯é™ä½Žç¨‹åºè¿è¡Œçš„é€Ÿåº¦ã€‚ä¹‹å‰çš„å®žçŽ°ï¼Œæœ€è€—æ—¶çš„æ˜¯getOneMonthBonuså’ŒgetTwoMonthBonusä¸­çš„å¾ªçŽ¯ã€‚è¿™æ˜¯åœ¨ä½¿ç”¨ç©·ä¸¾æœç´¢æœ€ä½Žçº³ç¨Žç‚¹ã€‚é’ˆå¯¹ç©·ä¸¾çš„ä¼˜åŒ–ï¼Œæˆ‘äº†è§£çš„æ¯”è¾ƒé€šç”¨çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¸€ç§æ˜¯å¢žåŠ ç¼“å­˜ï¼Œä¸€ç§æ˜¯å¯¹ç©·ä¸¾è¿›è¡Œå‰ªæžã€‚ ç»è¿‡è§‚å¯Ÿå‘çŽ°ï¼Œæ‹†åˆ†å¹´ç»ˆå¥–ä¸å¯èƒ½æŠŠå¹´ç»ˆå¥–çš„50%ä»¥ä¸Šæ‹†åˆ°å·¥èµ„é‡Œï¼Œå› ä¸ºå¹´ç»ˆå¥–æ˜¯ç”¨å•†æ•°æ¥ç¡®å®šäº¤ç¨Žæ¯”ä¾‹çš„ï¼Œç¡®å®šæ¯”ä¾‹æ‰€ç”¨çš„è¡¨ç›¸å½“äºŽæœˆè–ªå‡åŽ»èµ·å¾ç‚¹ã€‚è¿™æ ·æˆ‘ä»¬å°±å‡å°‘äº†ä¸€åŠçš„è®¡ç®—é‡ã€‚è¿˜æœ‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥å­˜å‚¨è®¡ç®—è¿‡çš„æ‹†åˆ†æ–¹æ¡ˆï¼Œå¦‚æžœé‡åˆ°ç›¸åŒçš„æƒ…å†µå°±ç›´æŽ¥ä½¿ç”¨å¯¹è±¡é‡Œé¢çš„ç»“æžœå°±å¯ä»¥äº†ã€‚ å…¶å®žåœ¨ç¼–å†™å…¶ä»–ç¨‹åºçš„æ—¶å€™ï¼Œè¿™ä¸¤ç§ä¹Ÿæ˜¯æœ€ç®€å•æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹æ³•ã€‚æ¦‚æ‹¬çš„è¯´ï¼Œå°±æ˜¯æ‹¿ç©ºé—´æ¢æ—¶é—´å’Œå‡å°‘è®¡ç®—é‡â€¦â€¦ okï¼Œæœ€åŽæ”¾ä¸Šä¼˜åŒ–åŽçš„ç¨‹åºï¼Œè¿™ä¸€æœŸçš„çžŽæ‰¯å°±è¿™ä¹ˆæ„‰å¿«çš„ç»“æŸäº†ï¼Œå’±ä»¬ä¸‹æœŸå†è§~ï¼\ï¼ˆï¿£ï¸¶ï¿£ï¼‰/ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151var baseQuota = 3500;var taxQuota = [1500, 4500, 9000, 35000, 55000, 80000];var taxRat = [0.03, 0.10, 0.20, 0.25, 0.30, 0.35, 0.45];var taxQuick = [0, 105, 555, 1005, 2755, 5505, 13505];var cacheGetOnlyBonusTax = &#123;&#125;;var cacheGetOneMonthBonus = &#123;&#125;;var cacheGetTwoMonthBonus = &#123;&#125;;// èŽ·å–ä¸æ‹†åˆ†å¹´å¥–äº¤ç¨Žæ€»é¢function getOnlyBonusTax(yearBonus, monthSalary) &#123; var cached = cacheGetOnlyBonusTax[yearBonus + ',' + monthSalary] if (typeof cached != 'undefined') &#123; return cached; &#125; var tax = 0; if (monthSalary &gt; baseQuota) &#123; perMonth = yearBonus / 12; tax = round(yearBonus * getTaxRat(perMonth) - getTaxQuick(perMonth), 2); &#125; else &#123; if (yearBonus &lt; baseQuota - monthSalary) &#123; tax = 0; &#125; else &#123; perMonth = (yearBonus - (baseQuota - monthSalary)) / 10; tax = (yearBonus - (baseQuota - monthSalary)) * getTaxRat(perMonth) - getTaxQuick(perMonth); &#125; &#125; cacheGetOnlyBonusTax[yearBonus + ',' + monthSalary] = tax return tax;&#125;// èŽ·å–ç¨ŽçŽ‡ç­‰çº§function getTaxNum(money)&#123; for (var i = 0, l = taxQuota.length; i &lt; l; i++) &#123; if (money &lt;= taxQuota[i]) &#123; return i; &#125; &#125; return i;&#125;// èŽ·å–ç¨ŽçŽ‡function getTaxRat(money)&#123; return taxRat[getTaxNum(money)];&#125;// èŽ·å–é€Ÿç®—æ‰£é™¤æ•°function getTaxQuick(money) &#123; return taxQuick[getTaxNum(money)];&#125;// èŽ·å–å¹³å¸¸æœˆäº¤ç¨Žé‡‘é¢function getMonthTax(money) &#123; if (money &gt; baseQuota) &#123; return getTax(money - baseQuota); &#125; else &#123; return 0; &#125;&#125;// èŽ·å–å¹´å¥–å¹³å‡æœˆäº¤ç¨Žé‡‘é¢function getPerMonthTax(money) &#123; return getTax(money);&#125;// è®¡ç®—ä¸ªäººæ‰€å¾—ç¨Žé‡‘é¢function getTax(money) &#123; return round(money * getTaxRat(money) - getTaxQuick(money), 2);&#125;// è®¡ç®—å¢žåŠ çš„äº¤ç¨Žé‡‘é¢function getMonthTaxAdd(monthSalary, addNum) &#123; var monthAddSalary = monthSalary + addNum; monthTaxAdd = round(getMonthTax(monthAddSalary) - getMonthTax(monthSalary), 2); return monthTaxAdd;&#125;// è®¡ç®—é‡‘é¢å°æ•°function round(num, toFix) &#123; return parseFloat(num.toFixed(toFix), 10);&#125;// èŽ·å–æ‹†åˆ†ä¸ºä¸€ä¸ªæœˆäº¤ç¨Žæ€»é¢function getOneMonthBonus(yearBonus, monthSalary) &#123; var cached = cacheGetOneMonthBonus[yearBonus + ',' + monthSalary] if (typeof cached != 'undefined') &#123; return cached &#125; var nowBonusTax = getOnlyBonusTax(yearBonus, monthSalary); var halfBonus = round(yearBonus/2); for (var i = 1; i &lt; halfBonus; i++) &#123; var bonusRemain = yearBonus - i; var monthTaxAdd = getMonthTaxAdd(monthSalary, i); var bonusTax = round(getOnlyBonusTax(bonusRemain, monthSalary) + monthTaxAdd, 2); if (bonusTax &lt; nowBonusTax) &#123; nowBonusTax = bonusTax; oneMonth = i; &#125; &#125; var result = &#123; tax: nowBonusTax, bonus: i &#125;; cacheGetOneMonthBonus[yearBonus + ',' + monthSalary] = result; return result;&#125;// èŽ·å–æ‹†åˆ†ä¸ºä¸¤ä¸ªæœˆäº¤ç¨Žæ€»é¢function getTwoMonthBonus(yearBonus, monthSalary) &#123; var cached = cacheGetTwoMonthBonus[yearBonus + ',' + monthSalary] if (typeof cached != 'undefined') &#123; return cached &#125; var nowBonusTax = getOnlyBonusTax(yearBonus, monthSalary); var halfBonus = round(yearBonus/2); for (var i = 1; i &lt; halfBonus; i++) &#123; var bonusRemain = yearBonus - i; var monthTaxAdd = getMonthTaxAdd(monthSalary, (i / 2)) * 2; var bonusTax = round(getOnlyBonusTax(bonusRemain, monthSalary) + monthTaxAdd, 2); if (bonusTax &lt; nowBonusTax) &#123; nowBonusTax = bonusTax; twoMonth = i / 2; &#125; &#125; var result = &#123; tax: nowBonusTax, bonus: i &#125;; cacheGetTwoMonthBonus[yearBonus + ',' + monthSalary] = result return result&#125;function run(yearBonus, monthSalary)&#123; var startTime = (new Date).getTime(); var yearBonusTax = getOnlyBonusTax(yearBonus, monthSalary); var oneMonthTax = getOneMonthBonus(yearBonus, monthSalary); var twoMonthTax = getTwoMonthBonus(yearBonus, monthSalary); var minTax = Math.min(yearBonusTax, oneMonthTax.tax, twoMonthTax.tax); var bonusRemain = yearBonus - minTax; if (minTax == yearBonusTax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + yearBonus, 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + 0, 'ç¬¬äºŒä¸ªæœˆå‘æ”¾ï¼š' + 0, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; else if (minTax == oneMonthTax.tax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + (yearBonus - oneMonthTax.bonus), 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + oneMonthTax.bonus, 'ç¬¬äºŒä¸ªæœˆå‘æ”¾ï¼š' + 0, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; else if (minTax == twoMonthTax.tax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + (yearBonus - (twoMonthTax.bonus * 2)), 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + twoMonthTax.bonus, 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + twoMonthTax.bonus, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; var endTime = (new Date).getTime(); console.log('è€—æ—¶ï¼š' + (endTime - startTime) + 'ms');&#125;run(19000, 9500);]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[javascriptå®žçŽ°å¹´ç»ˆå¥–é¿ç¨Žç¨‹åº]]></title>
      <url>%2F2017%2F01%2F24%2Fjavascript-year-bonus-evade-tax%2F</url>
      <content type="text"><![CDATA[æ˜¨å¤©å…¬å¸å‘äº†å¹´ç»ˆå¥–ï¼Œæ‰£äº†æˆ‘20%çš„ç¨Žâ€¦æˆ‘å°±æ“äº†ï¼Œè‚‰ç–¼å•Šâ€¦T^Tâ€¦è¯è¯´å¹´ç»ˆå¥–é¿ç¨Žä¸æ˜¯æ²¡æœ‰åŠžæ³•å•Šï¼Œä¸ºæ¯›ä¸ç»™æ•´æ•´å‘¢ï¼Œæ€»è§‰å¾—è‚¯å®šæœ‰ä»€ä¹ˆä¸å¯å‘Šäººçš„ç§˜å¯†â€¦ äºŽæ˜¯æˆ‘å†³å®šå†™ä¸ªå¹´ç»ˆå¥–é¿ç¨Žçš„ç¨‹åºåŽ»åŽ»ç«ï¼Œä¸ç„¶è¿™å£æ°”æ†‹åœ¨å¿ƒé‡Œéžæ†‹åäº†ä¸å¯â€¦ æ”¿ç­–è°ƒæŸ¥è°ƒæŸ¥äº†ä¸‹ç›¸å…³çš„æ”¿ç­–ï¼Œæ ¹æ®çŽ°æœ‰ä¸ªäººæ‰€å¾—ç¨Žè®¡ç¨ŽåŠžæ³•ï¼Œä¸ªäººè–ªé…¬è®¡ç¨Žæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§ä¸ºæœˆå·¥èµ„ï¼ˆå«æœˆå¥–é‡‘ï¼‰è®¡ç¨Žï¼Œä¸€ç§ä¸ºå¹´ç»ˆå¥–ç»¼åˆè®¡ç¨Žã€‚åœ¨å¹´ç»ˆå¥–ç»¼åˆè®¡ç¨Žå‘æ”¾è¿‡ç¨‹ä¸­ï¼Œåœ¨æŸäº›åŒºé—´ä¼šå‡ºçŽ°ç¨Žå‰å¥–é‡‘å¢žåŠ ï¼Œç¨ŽåŽå®žé™…æ”¶å…¥åè€Œå‡å°‘çš„æƒ…å†µã€‚ å…·ä½“çš„ç¨Žæ”¶åŠžæ³•æ˜¯è¿™æ ·çš„ï¼Œ æœˆå·¥èµ„è®¡ç¨Žå…¬å¼ï¼š åº”çº³ç¨Žé¢ = æœˆå·¥èµ„åº”çº³ç¨Žæ‰€å¾—é¢ * é€‚ç”¨ç¨ŽçŽ‡ - é€Ÿç®—æ‰£é™¤æ•° æœˆå·¥èµ„åº”çº³ç¨Žæ‰€å¾—é¢ = è®¡ç¨Žæœˆå·¥èµ„é¢ - ä¸ªäººæ‰€å¾—ç¨Žèµ·å¾ç‚¹ ä¸ªäººæ‰€å¾—ç¨Žèµ·å¾ç‚¹ = 3500 è§£é‡Šä¸¤ä¸ªæ¦‚å¿µï¼š ä¸ªäººæ‰€å¾—ç¨Žèµ·å¾ç‚¹æ—¢ç¨Žæ³•è§„å®šçš„è´¹ç”¨æ‰£é™¤é¢ã€‚ é€Ÿç®—æ‰£é™¤æ•°é€Ÿç®—æ‰£é™¤æ•°å¹¶éžç¨Žæ³•è§„å®šï¼Œè€Œæ˜¯æ ¹æ®ç¨Žæ³•æŽ¨ç®—å‡ºæ¥çš„ä¸€ä¸ªæ–¹ä¾¿è®¡ç®—çš„ç³»æ•°ã€‚ç¨Žæ³•ä¸­å…³äºŽä¸ªç¨Žçš„è®¡ç®—åº”è¯¥æ˜¯åˆ†é˜¶æ®µçš„ã€‚ä¸è¶…è¿‡1500å…ƒçš„æ”¶3%ï¼Œè¶…è¿‡1500å…ƒè‡³4500å…ƒçš„éƒ¨åˆ†æ”¶10%ï¼Œè¶…è¿‡4500å…ƒè‡³9000å…ƒçš„éƒ¨åˆ†20%â€¦ å¦‚æžœæŸäººæ‰£ä¿é™©åŽå·¥èµ„10000ï¼Œæ€Žä¹ˆè®¡ç®—å‘¢ï¼Ÿ10000 = 3500 + 1500 + 3000 + 2000ã€‚ å…¶ä¸­3500å…å¾ï¼›1500æŒ‰3%ï¼Œå¾ç¨Ž45å…ƒï¼›3000æŒ‰10%ï¼Œå¾300å…ƒï¼›2000æŒ‰20%ï¼Œå¾400å…ƒã€‚æ•´ä¸ªç®—ä¸‹æ¥å¾ç¨Ž745å…ƒã€‚è¿™ä¹ˆç®—å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä¼šè®¡ä»¬å‘æ˜Žäº†é€Ÿç®—æ‰£é™¤æ•°ã€‚ç¨ŽçŽ‡3%å¯¹åº”é€Ÿç®—æ‰£é™¤æ•°ä¸º0ï¼›ç¨ŽçŽ‡10%å¯¹åº”é€Ÿç®—æ‰£é™¤æ•°ä¸º 1500 * (10% - 3%) + 0 = 105ï¼›ç¨ŽçŽ‡20%å¯¹åº”é€Ÿç®—æ‰£é™¤æ•°ä¸º 4500 * (20% - 10%) + 105 = 555ï¼›ä»¥æ­¤ç±»æŽ¨ï¼Œå¾—åˆ°çº§åˆ«çš„é€Ÿç®—æ‰£é™¤æ•°ã€‚ æ”¾ä¸Šæ±‡æ€»ä¹‹åŽçš„ä¸ªäººæ‰€å¾—ç¨Žç¨ŽçŽ‡è¡¨ï¼Œä¹‹åŽä¼šç”¨åˆ°ï¼š çº§æ•° å…¨æœˆåº”çº³ç¨Žæ‰€å¾—é¢ï¼ˆå…ƒï¼‰ ç¨ŽçŽ‡ï¼ˆ%ï¼‰ é€Ÿç®—æ‰£é™¤æ•° 1 0 ~ 1500 3 0 2 1500.01 ~ 4500 10 105 3 4500.01 ~ 9000 20 555 4 9000.01 ~ 35000 25 1005 5 35000.01 ~ 55000 30 2755 6 55000.01 ~ 80000 35 5505 7 80000.01 ~ âˆž 45 13505 å¹´ç»ˆå¥–ç»¼åˆè®¡ç¨ŽåŠžæ³•ï¼š çº³ç¨Žäººå–å¾—å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘ï¼Œå•ç‹¬ä½œä¸ºä¸€ä¸ªæœˆå·¥èµ„ã€è–ªé‡‘æ‰€å¾—è®¡ç®—çº³ç¨Žï¼Œå¹¶æŒ‰ä»¥ä¸‹åŠžæ³•è®¡ç¨Žã€‚ (ä¸€) å…ˆå°†é›‡å‘˜å½“æœˆå†…å–å¾—çš„å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘ï¼Œé™¤ä»¥12ä¸ªæœˆï¼ŒæŒ‰å…¶å•†æ•°ç¡®å®šé€‚ç”¨ç¨ŽçŽ‡å’Œé€Ÿç®—æ‰£é™¤æ•°ã€‚ å¦‚æžœåœ¨å‘æ”¾å¹´ç»ˆä¸€æ¬¡æ€§å¥–é‡‘çš„å½“æœˆï¼Œé›‡å‘˜å½“æœˆè®¡ç¨Žå·¥èµ„é¢ä½ŽäºŽç¨Žæ³•è§„å®šçš„è´¹ç”¨æ‰£é™¤é¢ï¼ˆä¸ªäººæ‰€å¾—ç¨Žèµ·å¾ç‚¹3500å…ƒï¼‰ï¼Œåº”å°†å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘å‡é™¤â€é›‡å‘˜å½“æœˆè®¡ç¨Žå·¥èµ„é¢ä¸Žè´¹ç”¨æ‰£é™¤é¢çš„å·®é¢â€åŽçš„ä½™é¢ï¼ŒæŒ‰ä¸Šè¿°åŠžæ³•ç¡®å®šå…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘çš„é€‚ç”¨ç¨ŽçŽ‡å’Œé€Ÿç®—æ‰£é™¤æ•°ã€‚ (äºŒ) å°†é›‡å‘˜ä¸ªäººå½“æœˆå†…å–å¾—çš„å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘ï¼ŒæŒ‰ç¬¬(ä¸€)é¡¹ç¡®å®šçš„é€‚ç”¨ç¨ŽçŽ‡å’Œé€Ÿç®—æ‰£é™¤æ•°è®¡ç®—å¾ç¨Žï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š å¦‚æžœé›‡å‘˜å½“æœˆå·¥èµ„è–ªé‡‘æ‰€å¾—é«˜äºŽ(æˆ–ç­‰äºŽ)ç¨Žæ³•è§„å®šçš„è´¹ç”¨æ‰£é™¤é¢çš„ï¼Œé€‚ç”¨å…¬å¼ä¸ºï¼š åº”çº³ç¨Žé¢ ï¼ é›‡å‘˜å½“æœˆå–å¾—å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘ * é€‚ç”¨ç¨ŽçŽ‡ - é€Ÿç®—æ‰£é™¤æ•° å¦‚æžœé›‡å‘˜å½“æœˆè®¡ç¨Žå·¥èµ„é¢ä½ŽäºŽç¨Žæ³•è§„å®šçš„è´¹ç”¨æ‰£é™¤é¢çš„ï¼Œé€‚ç”¨å…¬å¼ä¸ºï¼š åº”çº³ç¨Žé¢ ï¼ (é›‡å‘˜å½“æœˆå–å¾—å…¨å¹´ä¸€æ¬¡æ€§å¥–é‡‘ - é›‡å‘˜å½“æœˆè®¡ç¨Žå·¥èµ„é¢ä¸Žè´¹ç”¨æ‰£é™¤é¢çš„å·®é¢) * é€‚ç”¨ç¨ŽçŽ‡ - é€Ÿç®—æ‰£é™¤æ•° (ä¸‰) åœ¨ä¸€ä¸ªçº³ç¨Žå¹´åº¦å†…ï¼Œå¯¹æ¯ä¸€ä¸ªçº³ç¨Žäººï¼Œè¯¥è®¡ç¨ŽåŠžæ³•åªå…è®¸é‡‡ç”¨ä¸€æ¬¡ã€‚ å®žä¾‹çœ‹è¿‡åˆšæ‰çš„æ”¿ç­–ï¼Œå’±ä»¬å†æ¥çœ‹ä¸‰ä¸ªä¾‹å­ï¼š å‘˜å·¥Aï¼Œæœˆè–ª2500ï¼Œå¹´ç»ˆå¥–ä¸º5000ï¼Œåº”ç¼´ä¸ªç¨Žä¸º150ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š å…ˆç®—è®¡ç¨ŽåŸºç¡€ï¼Œ(5000 - (3500 - 2500)) / 12 = 333.33ï¼ŒæŸ¥ç¨ŽçŽ‡è¡¨ï¼Œé€‚ç”¨3%çš„ç¨ŽçŽ‡ã€‚ å†ç®—åº”çº³æ‰€å¾—ç¨Žï¼Œ5000 * 3% - 0 = 150ï¼Œç¨ŽåŽæ‰€å¾—ä¸º 5000 - 150 = 4850ã€‚ å‘˜å·¥Bï¼Œæœˆè–ª9000ï¼Œå¹´ç»ˆå¥–18000ï¼Œåº”ç¼´ä¸ªç¨Žä¸º540ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š å…ˆç®—è®¡ç¨ŽåŸºç¡€ï¼Œ18000 / 12 = 1500ï¼ŒæŸ¥ç¨ŽçŽ‡è¡¨ï¼Œé€‚ç”¨3%çš„ç¨ŽçŽ‡ã€‚ å†ç®—åº”çº³æ‰€å¾—ç¨Žï¼Œ18000 * 3% - 0 = 540ï¼Œç¨ŽåŽæ‰€å¾—ä¸º 18000 - 540 = 17460ã€‚ å‘˜å·¥Cï¼Œæœˆè–ª9500ï¼Œå¹´ç»ˆå¥–19000ï¼Œåº”ç¼´ä¸ªç¨Žä¸º1795ï¼Œè®¡ç®—è¿‡ç¨‹æ›´ä¸Šé¢ä¸€æ ·ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š å…ˆç®—è®¡ç¨ŽåŸºç¡€ï¼Œ19000 / 12 = 1583.3ï¼ŒæŸ¥ç¨ŽçŽ‡è¡¨ï¼Œé€‚ç”¨10%çš„ç¨ŽçŽ‡ã€‚ å†ç®—åº”çº³æ‰€å¾—ç¨Žï¼Œ19000 * 10% - 105 = 1795ï¼Œç¨ŽåŽæ‰€å¾—ä¸º 19000 - 1795 = 17205ã€‚ çœ‹è¿‡ä¹‹å‰ä¸‰ä¸ªä¾‹å­ä½ å‘çŽ°äº†å—ï¼Ÿå‘˜å·¥Cè™½ç„¶è´¦é¢ä¸Šæ¯”å‘˜å·¥Bå¤šæ‹¿äº†1000çš„å¹´ç»ˆå¥–ï¼Œä½†æ˜¯å®žé™…æ‰€å¾—å´æ¯”å‘˜å·¥Bè¿˜å°‘â€¦è¿™å°±æ˜¯ä¹‹å‰å’±ä»¬è¯´åˆ°çš„é‚£ä¸ªé—®é¢˜â€¦ä¹Ÿæ˜¯å¹´ç»ˆå¥–éœ€è¦é¿ç¨Žçš„ä¸»è¦åŽŸå› â€¦ é€ æˆè¿™ä¸ªé—®é¢˜çš„ä¸»è¦åŽŸå› ï¼Œæ˜¯ç”±äºŽç¨ŽçŽ‡è™½ç„¶æŒ‰ç…§å¹´ç»ˆå¥–çš„12åˆ†ä¹‹1è®¡ç®—äº†ï¼Œä½†æ˜¯é€Ÿç®—æ‰£é™¤æ•°å´æ²¡æœ‰å¯¹åº”çš„æ‰©å¤§12å€ã€‚ å‡å¦‚é€Ÿç®—æ‰£é™¤æ•°ä¹Ÿç›¸åº”æ‰©å¤§12å€ï¼Œé‚£ä¹ˆå¹´ç»ˆå¥–19000çš„åº”ç¼´ä¸ªç¨Žä¸º19000 * 10% - 105 * 12 = 640ï¼Œè¿™æ ·å’Œå¹´ç»ˆå¥–18000çº³æ‰€å¾—ç¨Ž540æ˜¯ä¸æ˜¯å·®å¼‚å°±å¾ˆå°äº†ï¼Ÿ æ®è¯´ä¹‹æ‰€ä»¥æ²¡æœ‰æ‰§è¡Œè¿™æ ·çš„æ”¿ç­–ï¼Œæ˜¯å› ä¸ºå¹´ç»ˆå¥–ä¸€èˆ¬éƒ½ä¼šè¶…è¿‡ä¸€ä¸ªæœˆå·¥èµ„ï¼Œç›´æŽ¥æŒ‰ç…§ä¸ªäººæ‰€å¾—ç¨Žçš„ç¨ŽçŽ‡çº³ç¨Žï¼Œè‚¯å®šæ˜¯è¦å¤šç¼´ç¨Žçš„ã€‚é™¤ä»¥12ä¸ªæœˆä½œä¸ºè®¡ç¨ŽåŸºç¡€ï¼Œå·²ç»æ˜¯ç¨ŽåŠ¡å±€ç»™äºˆçº³ç¨Žäººå¾ˆå¤§çš„ä¼˜æƒ äº†ï¼Œæ‰€ä»¥é€Ÿç®—æ‰£é™¤æ•°ä¸èƒ½å†ç»™äºˆä¼˜æƒ â€¦ é¿ç¨Žå¸¸è§çš„å¹´ç»ˆå¥–é¿ç¨Žæ–¹å¼æ˜¯å°†å¹´ç»ˆå¥–æ‹†åˆ†ï¼Œä¸€éƒ¨åˆ†æŒ‰å¹´ç»ˆå¥–ç»¼åˆè®¡ç¨Žå‘æ”¾ï¼Œä¸€éƒ¨åˆ†éšæœˆå·¥èµ„å‘æ”¾ï¼Œä¸€èˆ¬1åˆ°2ä¸ªæœˆå‘å®Œã€‚ æ¯”å¦‚ï¼Œæœˆè–ª9500ï¼Œå¹´ç»ˆå¥–19000ï¼Œå¦‚æžœä¸åšæ‹†åˆ†ç›´æŽ¥çº³ç¨Žï¼Œåº”ç¼´ä¸ªç¨Ž1795ã€‚å¦‚æžœæ‹†åˆ†ä¸ºå¹´ç»ˆå‘18000ï¼Œä¹‹åŽæœˆå·¥èµ„å¤šå‘1000å¥–é‡‘ï¼Œå¹´ç»ˆå¥–éƒ¨åˆ†åº”ç¼´ä¸ªç¨Žåº”ä¸º18000 * 3% = 540ï¼Œå·¥èµ„éƒ¨åˆ†åº”ç¼´ä¸ªç¨Ž(9500 + 1000 - 3500) * 20% - 555 = 845ï¼Œæ¯”æŒ‰æœˆè–ª9500ç¼´çº³ä¸ªç¨Žå¤šç¼´äº† 200ï¼Œæ‰€ä»¥æ€»å…±å°‘ç¼´çº³ä¸ªç¨Ž1795 - (540 + 200) = 1055 æŒ‰ç…§è¿™ä¸ªæ€è·¯å°±æ¥è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œæ¥è‡ªåŠ¨è®¡ç®—æ€Žä¹ˆæ‹†åˆ†æœ€å¥½ï¼Œèƒ½è®©æ”¶å…¥æœ€å¤šã€‚ è®¾è®¡é¦–å…ˆè€ƒè™‘ä¸‹è¿™ä¸ªç¨‹åºçš„è¾“å…¥è¾“å‡ºï¼Œè¾“å…¥æœˆå·¥èµ„å’Œå¹´ç»ˆå¥–ï¼Œç„¶åŽæ‰“å°å‡ºå¹´ç»ˆå¥–å‘å¤šå°‘ï¼Œå‰©ä½™çš„æ€Žä¹ˆæ‹†åˆ†ã€‚ ç„¶åŽè€ƒè™‘å…·ä½“çš„åŠŸèƒ½ï¼Œç¼´ç¨Žé¢è®¡ç®—éƒ½æœ‰çŽ°æˆçš„å…¬å¼ï¼Œå°è£…æˆç‹¬ç«‹çš„å‡½æ•°å°±è¡Œäº†ã€‚å¹´ç»ˆå¥–çš„æ‹†åˆ†åº”è¯¥ä¼šå‡ºçŽ°ä¸‰ç§æƒ…å†µï¼šä¸æ‹†åˆ†æœ€ä¼˜ï¼Œæ‹†åˆ†å…¥ä¸€ä¸ªæœˆæœ€ä¼˜ï¼Œæ‹†åˆ†å…¥ä¸¤ä¸ªæœˆæœ€ä¼˜ã€‚ å› ä¸ºæš‚æ—¶è¿˜æ²¡æƒ³åˆ°ä»€ä¹ˆå¥½ç®—æ³•ï¼Œæ‰€ä»¥å°±ä¸è€ƒè™‘æ€§èƒ½ï¼Œå…ˆå®žçŽ°äº†åŠŸèƒ½å†è¯´ï¼Œç”¨éåŽ†æŠŠæ‰€æœ‰å¯èƒ½çš„æ‹†åˆ†éƒ½è¯•ä¸€éï¼Œä»¥åŽåœ¨è€ƒè™‘åšå‰ªæžã€‚ å®žçŽ°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129var baseQuota = 3500;var taxQuota = [1500, 4500, 9000, 35000, 55000, 80000];var taxRat = [0.03, 0.10, 0.20, 0.25, 0.30, 0.35, 0.45];var taxQuick = [0, 105, 555, 1005, 2755, 5505, 13505];// èŽ·å–ä¸æ‹†åˆ†å¹´å¥–äº¤ç¨Žæ€»é¢function getOnlyBonusTax(yearBonus, monthSalary) &#123; var tax = 0; if (monthSalary &gt; baseQuota) &#123; perMonth = yearBonus / 12; tax = round(yearBonus * getTaxRat(perMonth) - getTaxQuick(perMonth), 2); &#125; else &#123; if (yearBonus &lt; baseQuota - monthSalary) &#123; tax = 0; &#125; else &#123; perMonth = (yearBonus - (baseQuota - monthSalary)) / 10; tax = (yearBonus - (baseQuota - monthSalary)) * getTaxRat(perMonth) - getTaxQuick(perMonth); &#125; &#125; return tax;&#125;// èŽ·å–ç¨ŽçŽ‡ç­‰çº§function getTaxNum(money)&#123; for (var i = 0, l = taxQuota.length; i &lt; l; i++) &#123; if (money &lt;= taxQuota[i]) &#123; return i; &#125; &#125; return i;&#125;// èŽ·å–ç¨ŽçŽ‡function getTaxRat(money)&#123; return taxRat[getTaxNum(money)];&#125;// èŽ·å–é€Ÿç®—æ‰£é™¤æ•°function getTaxQuick(money) &#123; return taxQuick[getTaxNum(money)];&#125;// èŽ·å–å¹³å¸¸æœˆäº¤ç¨Žé‡‘é¢function getMonthTax(money) &#123; if (money &gt; baseQuota) &#123; return getTax(money - baseQuota); &#125; else &#123; return 0; &#125;&#125;// èŽ·å–å¹´å¥–å¹³å‡æœˆäº¤ç¨Žé‡‘é¢function getPerMonthTax(money) &#123; return getTax(money);&#125;// è®¡ç®—ä¸ªäººæ‰€å¾—ç¨Žé‡‘é¢function getTax(money) &#123; return round(money * getTaxRat(money) - getTaxQuick(money), 2);&#125;// è®¡ç®—å¢žåŠ çš„äº¤ç¨Žé‡‘é¢function getMonthTaxAdd(monthSalary, addNum) &#123; var monthAddSalary = monthSalary + addNum; monthTaxAdd = round(getMonthTax(monthAddSalary) - getMonthTax(monthSalary), 2); return monthTaxAdd;&#125;// è®¡ç®—é‡‘é¢å°æ•°function round(num, toFix) &#123; return parseFloat(num.toFixed(toFix), 10);&#125;// èŽ·å–æ‹†åˆ†ä¸ºä¸€ä¸ªæœˆäº¤ç¨Žæ€»é¢function getOneMonthBonus(yearBonus, monthSalary) &#123; var nowBonusTax = getOnlyBonusTax(yearBonus, monthSalary); for (var i = 1; i &lt; yearBonus; i++) &#123; var bonusRemain = yearBonus - i; var monthTaxAdd = getMonthTaxAdd(monthSalary, i); var bonusTax = round(getOnlyBonusTax(bonusRemain, monthSalary) + monthTaxAdd, 2); if (bonusTax &lt; nowBonusTax) &#123; nowBonusTax = bonusTax; oneMonth = i; &#125; &#125; return &#123; tax: nowBonusTax, bonus: i &#125;&#125;// èŽ·å–æ‹†åˆ†ä¸ºä¸¤ä¸ªæœˆäº¤ç¨Žæ€»é¢function getTwoMonthBonus(yearBonus, monthSalary) &#123; var nowBonusTax = getOnlyBonusTax(yearBonus, monthSalary); for (var i = 1; i &lt; yearBonus; i++) &#123; var bonusRemain = yearBonus - i; var monthTaxAdd = getMonthTaxAdd(monthSalary, (i / 2)) * 2; var bonusTax = round(getOnlyBonusTax(bonusRemain, monthSalary) + monthTaxAdd, 2); if (bonusTax &lt; nowBonusTax) &#123; nowBonusTax = bonusTax; twoMonth = i / 2; &#125; &#125; return &#123; tax: nowBonusTax, bonus: i &#125;;&#125;function run(yearBonus, monthSalary)&#123; var startTime = (new Date).getTime(); var yearBonusTax = getOnlyBonusTax(yearBonus, monthSalary); var oneMonthTax = getOneMonthBonus(yearBonus, monthSalary); var twoMonthTax = getTwoMonthBonus(yearBonus, monthSalary); var minTax = Math.min(yearBonusTax, oneMonthTax.tax, twoMonthTax.tax); var bonusRemain = yearBonus - minTax; if (minTax == yearBonusTax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + yearBonus, 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + 0, 'ç¬¬äºŒä¸ªæœˆå‘æ”¾ï¼š' + 0, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; else if (minTax == oneMonthTax.tax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + (yearBonus - oneMonthTax.bonus), 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + oneMonthTax.bonus, 'ç¬¬äºŒä¸ªæœˆå‘æ”¾ï¼š' + 0, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; else if (minTax == twoMonthTax.tax) &#123; console.log('å¹´ç»ˆå¥–å‘æ”¾ï¼š' + (yearBonus - (twoMonthTax.bonus * 2)), 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + twoMonthTax.bonus, 'ç¬¬ä¸€ä¸ªæœˆå‘æ”¾ï¼š' + twoMonthTax.bonus, 'å®žé™…æ”¶å…¥ï¼š' + bonusRemain); &#125; var endTime = (new Date).getTime(); console.log('è€—æ—¶ï¼š' + (endTime - startTime) + 'ms');&#125;run(19000, 9500); okï¼Œè¿™æ¬¡å°±å…ˆåˆ°è¿™é‡Œï¼Œä¸‹æ¬¡å†æ›´æ–°è¿™ä¸ªç¨‹åºçš„ä¼˜åŒ–æ–¹æ¡ˆå§ã€‚å¦‚æžœä¸å‡ºæ„å¤–çš„è¯ï¼Œmaybeå¯èƒ½å¤§æ¦‚ä¸‹å‘¨äº”ä¼šæ›´æ–°å§~é©¬ä¸Šè¦è¿‡å¹´äº†ï¼Œè¿™é‡Œå…ˆç¥ç±³å¨œæ¡‘é¸¡å¹´å¤§å‰å’¯~ï¼\ï¼ˆï¿£ï¸¶ï¿£ï¼‰/]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸€åœºæŠ½å¥–å¼•å‘çš„æ‰¯æ·¡]]></title>
      <url>%2F2017%2F01%2F19%2Fgab-draw%2F</url>
      <content type="text"><![CDATA[èµ·å› ä»Šå¹´å¹´ä¼šçš„æŠ½å¥–ç®—æ³•å†™çš„å®žåœ¨æ˜¯å¤ªçƒ‚ã€‚æ•´ä¸ªæ•´ä¸ªæŠ½å¥–æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼šæ¯æ¬¡æŠ½å¥–æ˜¯æŠ½å¥–äººå…ˆè¯´å¼€å§‹ï¼ŒäºŽæ˜¯å¼€å§‹æ’­æ”¾åŠ¨ç”»éåŽ†é˜Ÿåˆ—ï¼Œç„¶åŽè¿‡ä¸€æ®µæ—¶é—´ï¼ŒæŠ½å¥–äººè¯´åœï¼ŒéåŽ†ç»“æŸï¼Œåœåœ¨å“ªå„¿è°å°±ä¸­å¥–ã€‚å¯æ˜¯ä¸ç”¨çœ‹ä»£ç æˆ‘éƒ½çŸ¥é“ï¼Œæ¯æ¬¡æŠ½å¥–æ—¶æ²¡æœ‰å¯¹é˜Ÿåˆ—è¿›è¡ŒéšæœºæŽ’åºã€‚å› ä¸ºæœ‰åŠ¨ç”»æ•ˆæžœï¼ŒéåŽ†çš„é€Ÿåº¦ä¸å¯èƒ½å¾ˆå¿«ï¼ŒæŠ½å¥–äººåˆä¸ä¼šç­‰å¾ˆä¹…æ‰è¯´åœï¼Œæ‰€ä»¥æŽ’åœ¨åŽé¢çš„æ€Žä¹ˆå¯èƒ½ä¸­å¥–ï¼ˆæˆ‘å°±æ˜¯æŽ’åœ¨åŽé¢çš„ï¼‰â€¦â€¦äºŽæ˜¯æˆ‘å¼€å§‹æ€è€ƒï¼Œå¦‚æžœæ˜¯æˆ‘ï¼Œæˆ‘ä¼šæ€Žä¹ˆå†™è¿™ä¸ªæŠ½å¥–çš„ç¨‹åºå‘¢ã€‚ å®žçŽ°æŠ½å¥–å¯ä»¥æ¦‚æ‹¬çš„æè¿°ä¸ºï¼šä»Žä¸€ä¸ªæŒ‡å®šçš„é›†åˆä¸­ï¼Œéšæœºé€‰å‡ºè‹¥å¹²ä¸ªå…ƒç´ ã€‚ okï¼Œç”¨ç¼–ç¨‹è¯­è¨€ç¿»è¯‘ç¿»è¯‘ï¼š 12345678910function draw(list = [], number = 0) &#123; list = list.concat() let result = [] while (number--) &#123; result.push(list.splice(Math.floor(Math.random()*list.length), 1)[0]) &#125; return result&#125;let drawResult = draw(['åˆ˜èƒ½', 'è°¢å¤§è„š', 'çŽ‹é•¿è´µ', 'èµµå››', 'åˆ˜è‹±', 'æŽå¤§å›½', 'èµµçŽ‰ç”°', 'åˆ˜å¤§è„‘è¢‹', 'çŽ‹å¤©æ¥', 'çŽ‹å¤§æ‹¿', 'æŽç§‹æ­Œ'], 3)console.log(`ä¸­å¥–è€…ä¸ºï¼š$&#123;drawResult.join('ï¼Œ')&#125;`) è´¨ç–‘ç¨‹åºæ˜¯å†™å¥½äº†ï¼Œä½†æ˜¯è¿™ä¸ªç¨‹åºçœŸçš„èƒ½ä¿è¯å…¬å¹³å…¬æ­£çš„æŠ½å¥–å—ï¼Ÿä»Žä¸Šé¢çš„ç¨‹åºä¸­ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬çš„æŠ½å¥–ç¨‹åºæ˜¯ä¾èµ–äºŽMath.randomç”Ÿæˆçš„éšæœºæ•°çš„ã€‚ ä½†æ˜¯ï¼Œå¯èƒ½ä¼šæœ‰äººè´¨ç–‘ï¼ŒMath.randomç”Ÿæˆçš„éšæœºæ•°çœŸçš„æ˜¯éšæœºçš„ï¼Œæ²¡æœ‰è§„å¾‹çš„å—ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½é€šè¿‡é¢„æµ‹å‡ºè§„å¾‹ä»Žè€ŒæŽ§åˆ¶ä¸­å¥–ç»“æžœï¼Ÿ Math.randomè¯´åˆ°javascriptçš„Math.randomï¼ŒECMAScriptæ˜¯è¿™ä¹ˆè§„å®šçš„ï¼š â€˜20.2.2.27Math.random ( )â€™ Returns a Number value with positive sign, greater than or equal to 0 but less than 1, chosen randomly or pseudo randomly with approximately uniform distribution over that range, using an implementation-dependent algorithm or strategy. This function takes no arguments. Each â€˜Math.randomâ€™ function created for distinct realms must produce a distinct sequence of values from successive calls. å¹¶æ²¡æœ‰æåˆ°æ˜¯å¦‚ä½•å®žçŽ°çš„ã€‚æ‰€ä»¥å„å®¶æµè§ˆå™¨å®žçŽ°çš„æ–¹æ³•ä¹Ÿéƒ½ä¸ä¸€æ ·ã€‚ æ¯”å¦‚ï¼ŒV8æ˜¯è¿™æ ·å®žçŽ°çš„MathRandomï¼ŒSpiderMonkeyæ˜¯è¿™æ ·å®žçŽ°çš„ensureRandomNumberGeneratorï¼Œwebkitæ˜¯è¿™æ ·å®žçŽ°çš„WeakRandomã€‚ ä½†æ˜¯ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ–¹æ³•ç”Ÿæˆï¼ŒåŸºæœ¬è§„åˆ™éƒ½æ˜¯åŸºäºŽä¸€ä¸ªç§å­ï¼ˆseedï¼‰ï¼Œç»è¿‡ä¸€ç³»åˆ—è®¡ç®—ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªå€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœç§å­æ˜¯ç¡®å®šçš„ï¼Œé‚£ä¹ˆæœ€ç»ˆç”Ÿæˆçš„å€¼ä¹Ÿä¸€å®šæ˜¯ç¡®å®šçš„â€¦â€¦ é‚£ä¹ˆç§å­åˆæ˜¯æ ¹æ®ä»€ä¹ˆç¡®å®šçš„å‘¢ï¼Ÿä¸€èˆ¬æ˜¯ä½¿ç”¨å‡½æ•°è°ƒç”¨æ—¶çš„å½“å‰æ—¶é—´ä½œä¸ºç§å­çš„ã€‚ ç»“è®ºæ—¢ç„¶ä¸Šé¢è¯´åˆ°äº†ï¼Œæ‰€æœ‰çš„ç»“æžœéƒ½æ˜¯è®¡ç®—çš„ç»“æžœï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯è¯´æ˜ŽæŠ½å¥–ç»“æžœå¹¶ä¸æ˜¯éšæœºçš„æ˜¯å¯é¢„æµ‹çš„å‘¢ï¼Ÿå…¶å®žä¹Ÿä¸æ˜¯ï¼Œå› ä¸ºåœ¨æŠ½å¥–çš„è¿‡ç¨‹ä¸­å¼•å…¥äº†éšæœºçš„å¤–éƒ¨è¾“å…¥ã€‚æ²¡é”™ï¼ŒæŠ½å¥–å‡½æ•°çš„æ‰§è¡Œæ—¶æœºæ˜¯ç”±äººæŽŒæŽ§çš„ï¼Œè€Œäººçš„æ€æƒ³æ˜¯ä¸å¯æŽŒæŽ§çš„ï¼Œæ‰€ä»¥å¯ä»¥æŠŠæŠ½å¥–çš„æ—¶æœºå½“åšéšæœºäº‹ä»¶ï¼Œè¿™æ ·æŠ½å¥–çš„ç»“æžœä¹Ÿè‚¯å®šæ˜¯éšæœºçš„äº†â€¦â€¦å¤§æ¦‚å§â€¦â€¦ ä½†æ˜¯ï¼Œå¦‚æžœæå‰ç¡®å®šä¸‹äº†æŠ½å¥–çš„æ—¶é—´äº†ï¼Œç†è®ºä¸Šï¼ŒæŠ½å¥–çš„ç»“æžœå°±æ˜¯å¯é¢„æµ‹çš„äº†ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰åŠžæ³•ä¸ä¾èµ–ç”¨æˆ·è¾“å…¥æ¥äº§ç”Ÿéšæœºçš„ç»“æžœå‘¢ï¼Ÿåªè¦å¼•å…¥ä¸€äº›æ— æ³•è®¤ä¸ºæŽ§åˆ¶çš„å…ƒç´ å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ä½¿ç”¨ä¸€äº›æ— æ³•é¢„æµ‹å’ŒæŽ§åˆ¶çš„ç‰©ç†ä¿¡æ¯æˆ–è€…è‡ªç„¶çŽ°è±¡æ¥ç”Ÿæˆéšæœºæ•°ã€‚ ä¾‹å¦‚ï¼ŒLinuxä¸­çš„æŽ¥å£/dev/randomå°±æ˜¯å¼•å…¥äº†ç‰©ç†å™ªéŸ³ä½œä¸ºè¾“å…¥æ¥äº§ç”Ÿéšæœºæ•°çš„ã€‚ è¿˜æœ‰RANDOM.ORGï¼Œè¿™ä¸ªç½‘ç«™ä½¿ç”¨å¤§æ°”å™ªéŸ³æ¥ç”Ÿæˆéšæœºæ•°ã€‚ï¼ˆä»–ä»¬æä¾›çš„æœåŠ¡è¿˜æ˜¯å…è´¹çš„ï¼Œå¯ä»¥å†è¿™é‡ŒæŸ¥çœ‹ä»–ä»¬æä¾›çš„æœåŠ¡åˆ—è¡¨ï¼‰ P.S.å…¶å®žæ‰€æœ‰çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨éƒ½é•¿å‘¨æœŸç›¸å…³çŽ°è±¡ï¼Œä¸è¿‡åªè¦è¿™ä¸ªå‘¨æœŸè¶³å¤Ÿé•¿ï¼ŒçŸ­æ—¶é—´å†…æ˜¯ä¸ä¼šå‡ºçŽ°é—®é¢˜çš„ã€‚ä¹‹å‰V8å°±çˆ†å‡ºè¿‡ä¹±åº¦ä¸è¶³çš„é—®é¢˜ï¼ŒåŽæ¥åœ¨49ç‰ˆæœ¬æ”¹ç”¨xorshift128+ç®—æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚xorshift128+ç®—æ³•æ‹¥æœ‰æžé•¿çš„å‘¨æœŸé•¿åº¦ï¼š This has been pointed out to us, and having understood the problem and after some research, we decided to reimplement Math.random based on an algorithm called xorshift128+. It uses 128 bits of internal state, has a period length of 2128 - 1, and passes all tests from the TestU01 suite. åº”ä»˜å¹´ä¼šæŠ½å¥–è¿™ç§å°èŒƒå›´çš„æ´»åŠ¨è‚¯å®šæ˜¯ç»°ç»°æœ‰ä½™çš„äº†ã€‚ä½†æ˜¯å¦‚æžœè¦åœ¨å¯†ç æˆ–è€…å®‰å…¨é¢†åŸŸä½¿ç”¨ä¼ªéšæœºæ•°ï¼Œæœ€å¥½è¿˜æ˜¯ä½¿ç”¨CSPRNGï¼ˆå¯†ç å­¦å®‰å…¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼‰æ¥ç”Ÿæˆã€‚æµè§ˆå™¨çŽ¯å¢ƒå¯ä»¥ä½¿ç”¨crypto.getRandomValuesï¼ŒnodejsçŽ¯å¢ƒå¯ä»¥ä½¿ç”¨crypto.randomBytesã€‚ éœ€è¦æ³¨æ„çš„æ˜¯crypto.getRandomValueså‡½æ•°æŽ¥æ”¶çš„æ˜¯ä¸€ä¸ªTypedArrayï¼ˆInt8Arrayï¼ŒUint8Arrayâ€¦â€¦ï¼‰è€Œä¸æ˜¯æ™®é€šçš„æ•°ç»„ï¼Œç„¶åŽè¿”å›žä¸€ä¸ªéšæœºæ•°é˜Ÿåˆ—ã€‚crypto.randomByteså‡½æ•°æŽ¥å—ä¸€ä¸ªå­—ç¬¦æŒ‡å®šè¿”å›žå€¼å¾—é•¿åº¦ï¼Œç„¶åŽè¿”å›žä¸€ä¸ªbufferè€Œä¸æ˜¯æ•°å­—ã€‚è¦æƒ³è½¬æ¢ä¸ºæ•°å­—çš„è¯éœ€è¦å…ˆç”¨toString(â€˜hexâ€™)è½¬æ¢ä¸º16è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå†ç”¨parseIntå°†å…¶è½¬åŒ–ä¸ºæ•°å­—ã€‚ okï¼Œé‚£ä¹ˆè¿™æ¬¡çš„æ‰¯æ·¡å°±åˆ°è¿™é‡Œï¼Œæ„Ÿè°¢æ‚¨çš„æ”¶çœ‹ï¼Œå’±ä»¬ä¸‹æ¬¡å†æ‰¯ï¼Œå®Œç»“æ’’èŠ±~\ï¼ˆï¿£ï¸¶ï¿£ï¼‰/ æ‰©å±•é˜…è¯» ä¼ªéšæœºçš„ä¸Šä½å’ŒçœŸéšæœºçš„é€†è¢­ V8 çš„ Math.random() äº‚åº¦ä¸è¶³çš„å•é¡Œ Math.random() å…³äºŽéšæœºæ•°]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ·±å…¥mobxåŽŸç†]]></title>
      <url>%2F2017%2F01%2F13%2Fan-in-depthexplanation-of-mobx%2F</url>
      <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ªmobxä½œè€… Michel Weststrate çš„ä¸€ç¯‡åšå®¢ï¼Œè™½ç„¶æˆ‘ä¹Ÿæƒ³åšåˆ°ä¿¡è¾¾é›…ï¼Œå¥ˆä½•è‹±è¯­æ°´å¹³æœ‰é™â€¦â€¦æ‰€ä»¥å…¶ä¸­æŽºæ‚äº†å¾ˆå¤šæˆ‘è‡ªå·±çš„ç†è§£ã€‚æƒ³äº†è§£ç»†èŠ‚çš„è¯å¯ç§»æ­¥åŽŸæ–‡ çœ‹è¿‡æˆ‘ä¹‹å‰çš„åšå®¢çš„çœ‹å®˜éƒ½çŸ¥é“ï¼Œmobxçš„é™¤äº†èƒ½å®žçŽ°å“åº”å¼çš„åŠŸèƒ½ï¼Œå®ƒçš„è¿è¡Œé€Ÿåº¦è¿˜å¾ˆå¿«ï¼Œé‚£ä¹ˆï¼Œä»–æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹mobxçš„å†…éƒ¨è¿è¡Œæœºåˆ¶ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥å›žé¡¾ä¸€ä¸‹mobxçš„æ ¸å¿ƒæ¦‚å¿µï¼š å¯è§‚æµ‹çŠ¶æ€ çŠ¶æ€æ˜¯æŒ‡ä»»ä½•å¯ä»¥æ”¹å˜å¹¶ä¸”ä¼šå¼•å‘è®¡ç®—å±žæ€§å˜åŒ–çš„å€¼ã€‚mobxå¯ä»¥æŠŠå¤§å¤šæ•°ç±»åž‹çš„å€¼(åŸºç¡€ç±»åž‹ã€æ•°ç»„ã€å„ç§å¯¹è±¡)ï¼Œéƒ½è½¬åŒ–æˆå¯è§‚æµ‹çš„ã€‚è€Œä¸”é’ˆå¯¹ï¼Œæ•°ç»„æˆ–å¯¹è±¡ç­‰çš„ç»“æž„åŒ–çš„æ•°æ®ç±»åž‹ï¼Œè¿™ç§è½¬åŒ–æ˜¯é€’å½’çš„ï¼Œæ•°ç»„æˆ–å¯¹è±¡çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½ä¼šè¢«è½¬åŒ–ã€‚ è®¡ç®—å±žæ€§ è®¡ç®—å±žæ€§æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¸æŽ¥æ”¶å‚æ•°ï¼Œåªå•çº¯çš„ä¾èµ–çš„å…¶ä»–å¯è§‚æµ‹çŠ¶æ€ã€‚ä¾èµ–çš„å¯è§‚æµ‹çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå®ƒçš„è¿è¡Œç»“æžœæ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚ è™½ç„¶å’Œå®šä¹‰æœ‰ä¸€å®šå‡ºå…¥ï¼Œä½†æ˜¯ä»Žè¾“å…¥è¾“å‡ºä¿æŒä¸€è‡´è¿™ç‚¹æ¥çœ‹ï¼Œè®¡ç®—å±žæ€§åº”è¯¥ç®—æ˜¯ä¸€ç§çº¯å‡½æ•°ã€‚ å¾ˆå¤šåœºæ™¯éƒ½èƒ½ç”¨åˆ°è®¡ç®—å±žæ€§ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²çš„è¿žæŽ¥ï¼Œæˆ–è€…ç”Ÿæˆå¤æ‚ç»“æž„çš„å¯¹è±¡ã€‚å› ä¸ºè®¡ç®—å±žæ€§è‡ªèº«ä¹Ÿæ˜¯å¯è§‚æµ‹çš„ï¼Œæ‰€ä»¥ç”šè‡³å¯ä»¥ä½¿ç”¨å®ƒä»Žå¯è§‚æµ‹çŠ¶æ€å¯¼å‡ºå®Œæ•´çš„ç”¨æˆ·ç•Œé¢ã€‚è®¡ç®—å±žæ€§è¿˜å¯ä»¥åœ¨æƒ°æ€§å’Œæ´»è·ƒä¸¤ç§çŠ¶æ€ä¹‹é—´åˆ‡æ¢ã€‚ ååº” ååº”å’Œè®¡ç®—å±žæ€§æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºŽï¼Œè®¡ç®—å±žæ€§çš„å‡½æ•°æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œè€Œååº”æ˜¯äº§ç”Ÿä¸€ä¸ªå‰¯ä½œç”¨ã€‚æ‰€è°“å‰¯ä½œç”¨ï¼Œå°±æ˜¯æŒ‡ä¸€äº›è·Ÿè®¡ç®—æ— å…³çš„åŠ¨ä½œï¼Œæ¯”å¦‚æ‰“å°æ—¥å¿—ï¼Œç½‘ç»œè¯·æ±‚ï¼Œæ›´æ–°ç•Œé¢ä¹‹ç±»çš„ã€‚æ€»ä¹‹ä½¿ç”¨ååº”å¯ä»¥æŠŠæ•°æ®å˜åŒ–å’Œå…¶ä»–æµç¨‹å…³è”èµ·æ¥ã€‚ åŠ¨ä½œ åŠ¨ä½œæ˜¯ä¿®æ”¹çŠ¶æ€çš„ä¸»è¦æ–¹æ³•ã€‚åŠ¨ä½œæœ¬èº«å¹¶ä¸å¯¹çŠ¶æ€æ›´æ”¹åšå“åº”ï¼Œè€Œæ˜¯ä¿®æ”¹å¯è§‚æµ‹çŠ¶æ€ã€‚ï¼ˆå¦‚ç”¨æˆ·è§¦å‘çš„äº‹ä»¶ã€web-socketä¼ å…¥æ¶ˆæ¯ã€æˆ–ç›´æŽ¥å¯¹å¯è§‚æµ‹çŠ¶æ€çš„ä¿®æ”¹ï¼‰ è¿™å››ä¸ªæ ¸å¿ƒæ¦‚å¿µå¯¹åº”mobxä¸­æœ€å¸¸ç”¨çš„4ä¸ªapiï¼Œobservableã€computedã€reactionï¼ˆautorunï¼‰ã€actionã€‚ ä¹‹åŽï¼Œæˆ‘ä»¬æŠŠè®¡ç®—å±žæ€§å’Œååº”éƒ½ç§°ä¸ºæ´¾ç”Ÿã€‚ ä¸Šé¢çš„è§£é‡Šå¯èƒ½æœ‰ç‚¹å„¿ä¸å¥½ç†è§£ï¼Œé‚£æˆ‘æŠŠå®ƒè¯´çš„æ›´å½¢è±¡ä¸€äº›ï¼š execléƒ½ç”¨è¿‡å§ï¼Ÿå¯è§‚æµ‹çŠ¶æ€ å°±æ˜¯é‡Œé¢çš„å•å…ƒæ ¼ã€‚è®¡ç®—å±žæ€§ å°±æ˜¯é‡Œé¢çš„å…¬å¼ã€‚åŠ¨ä½œ å¥½æ¯”ä½ åŒå‡»äº†ä¸€ä¸ªå•å…ƒæ ¼æ”¹å˜äº†å•å…ƒæ ¼çš„æ•°æ®ã€‚æŠŠä¿®æ”¹è¿‡åŽçš„æ•°æ®åé¦ˆåˆ°å±å¹•ä¸Šå°±æ˜¯ ååº” åšçš„äº‹ã€‚ è¿™æœ‰ä¸ªä½¿ç”¨mobxå’Œreactçš„ä¾‹å­ï¼Œä¾‹å­ä¸­ä½¿ç”¨åˆ°äº†è¿™å››ä¸ªæ¦‚å¿µï¼š 123456789101112131415161718192021222324252627class Person &#123; @observable firstName = "Michel"; @observable lastName = "Weststrate"; @observable nickName; @computed get fullName() &#123; return this.firstName + " " + this.lastName; &#125;&#125;const michel = new Person();// è¿™é‡Œå°±ç®—æ˜¯ä¸€ä¸ªååº”ï¼Œç”¨æ¥æ‰“å°å¯è§‚æµ‹çŠ¶æ€å˜åŒ–çš„æ—¥å¿—autorun(() =&gt; console.log(person.nickName ? person.nickName : person.fullName));// ç¤ºä¾‹çš„reactç»„ä»¶ï¼Œæ ¹æ®çŠ¶æ€å˜åŒ–å‘ç”Ÿæ”¹å˜ï¼Œå…¶ä¸­observeræ˜¯æ¥è‡ªreact-mobxçš„apiconst profileView = observer(props =&gt; &#123; if (props.person.nickName) return &lt;div&gt;&#123;props.person.nickName&#125;&lt;/div&gt; else return &lt;div&gt;&#123;props.person.fullName&#125;&lt;/div&gt;&#125;);// åŠ¨ä½œsetTimeout(() =&gt; michel.nickName = "mweststrate", 5000)React.render(React.createElement(profileView, &#123; person: michel &#125;), document.body); ä¾‹1:å¯è§‚æµ‹çŠ¶æ€ã€è®¡ç®—å±žæ€§ã€ååº”æ¸²æŸ“Reactjsç»„ä»¶å’ŒåŠ¨ä½œ åŸºäºŽä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥æ•´ç†å‡ºä¸‹å›¾çš„ä¾èµ–å…³ç³»æ ‘: å›¾1:profileViewç»„ä»¶çš„ä¾èµ–å…³ç³»æ ‘ã€‚æ­¤æ—¶fullNameå¤„äºŽæ´»è·ƒçŠ¶æ€ï¼Œå®ƒåŒæ—¶è§‚å¯ŸfirstNameå’ŒlastName è“è‰²çš„æ˜¯å¯è§‚æµ‹çŠ¶æ€ã€‚ç»¿è‰²çš„fullNameæ˜¯è®¡ç®—å±žæ€§ï¼Œå¯ä»¥é€šè¿‡è§‚æµ‹firstNameå’ŒlastNameçš„çŠ¶æ€è‡ªåŠ¨è®¡ç®—ã€‚åŒç†ï¼ŒnickNameå’ŒfullNameçš„å˜åŒ–éƒ½ä¼šä¼ å¯¼åˆ°profileViewã€‚profileView çš„çŠ¶æ€å˜åŒ–ä¼šäº§ç”Ÿä¸€ä¸ªå‰¯ä½œç”¨ï¼Œè®©reactç»„ä»¶æ ‘æ›´æ–°ã€‚ åœ¨mobxä¸­ï¼Œä¾èµ–å…³ç³»æ ‘ä¼šè¢«é™åˆ¶åœ¨æœ€å°é™åº¦ã€‚ä¾‹å¦‚,ä¸€æ—¦personå¯¹è±¡æœ‰nickNameå±žæ€§ï¼Œåˆ™è§†å›¾ä¸å†å—fullNameçš„å½±å“ï¼Œä¹Ÿä¸ä¼šå—firstNameå’ŒlastNameçš„å½±å“ã€‚è¿™äº›å€¼ä¹‹é—´çš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½ä¼šè¢«æ¸…ç†ï¼ŒMobXä¼šè‡ªåŠ¨ç®€åŒ–ä¾èµ–å…³ç³»æ ‘ï¼š å›¾ 2: å½“personå¯¹è±¡æœ‰nicknameå±žæ€§æ—¶çš„profileViewç»„ä»¶çš„ä¾èµ–æ€§æ ‘ï¼Œä¸Žå›¾1ç›¸åï¼ŒfullNameçŽ°åœ¨å¤„äºŽæƒ°æ€§çŠ¶æ€ï¼ŒåŒäº‹ä»–ä¹Ÿä¸ä¼šè§‚æµ‹firstNameå’ŒlastName mobxå°†æ€»æ˜¯è¯•å›¾æœ€å°åŒ–äº§ç”Ÿä¸€è‡´çŠ¶æ€æ‰€éœ€çš„è®¡ç®—çš„æ•°é‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†,æˆ‘å°†æè¿°ç”¨æ¥å®žçŽ°è¿™ä¸€ç›®æ ‡çš„ä¸€äº›ç­–ç•¥ã€‚ä½†åœ¨æŽ¢ç´¢è®¡ç®—å±žæ€§å’Œååº”ä¿æŒåŒæ­¥çš„åŽŸç†å‰ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹MobXèƒŒåŽçš„åŽŸåˆ™: å“åº”çŠ¶æ€å˜åŒ–æ°¸è¿œæ¯”å¤„ç†çŠ¶æ€å˜åŒ–å¥½ã€‚ åœ¨æˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œä¸­ï¼Œåº”ç”¨ç¨‹åºåœ¨å“åº”çŠ¶æ€æ›´æ”¹æ—¶æ‰€è§¦å‘çš„æ“ä½œï¼Œé€šå¸¸ä¼šåˆ›å»ºæˆ–æ›´æ–°æŸäº›å€¼ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä»Žå¦ä¸€ä¸ªè§’åº¦ç†è§£ï¼Œæ—¢å¯ä»¥æŠŠå¤§å¤šæ•°çš„åŠ¨ä½œéƒ½ç†è§£ä¸ºå¯¹æœ¬åœ°ç¼“å­˜çš„æ“ä½œã€‚è§¦å‘ç”¨æˆ·ç•Œé¢æ›´æ–°?æ›´æ–°æŸäº›å€¼?ä¸ŽåŽç«¯é€šä¿¡?è¿™äº›éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç¼“å­˜å¤±æ•ˆï¼Œæˆ‘ä»¬ä¸ºäº†æ›´æ–°ç¼“å­˜æ‰€æ‰§è¡Œçš„åŠ¨ä½œã€‚ä¸ºäº†è®©è¿™äº›ç¼“å­˜ä¿æŒåŒæ­¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè®¢é˜…ç¼“å­˜çš„çŠ¶æ€å˜åŒ–ï¼Œç¼“å­˜å¤±æ•ˆäº†ï¼Œå¥½é€šçŸ¥ä½ çš„åŠ¨ä½œå†æ¬¡è¢«è§¦å‘ã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼å´æœ‰ä¸ªæ ¹æœ¬çš„é—®é¢˜ï¼šéšç€ä½ çš„åº”ç”¨çš„ä¸æ–­æ‰©å¤§ï¼Œä½ è¦ç®¡ç†çš„è®¢é˜…ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œåœ¨è¿™ä¸ªç®¡ç†è¿‡ç¨‹ä¸­ï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä¼šçŠ¯ä¸€äº›é”™è¯¯ã€‚æ¯”å¦‚è¶…é¢è®¢é˜…(ç»§ç»­è®¢é˜…ä¸€ä¸ªå€¼ä¸å†ä½¿ç”¨çš„å€¼)æˆ–é—æ¼è®¢é˜…(å¿˜è®°ç›‘å¬æ•°æ®æ›´æ–°è€Œå¯¼è‡´çš„æ•°æ®è¿‡æ—¶çš„bug)ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰‹åŠ¨ç»´æŠ¤è®¢é˜…å…³ç³»ï¼Œåº”ç”¨ç¨‹åºæ—©æ™šä¼šå‡ºçŽ°æ•°æ®å’Œå±•ç¤ºä¸ä¸€è‡´çš„æƒ…å†µã€‚ å›¾3:æ›´æ–°äº†ä¸ªäººä¿¡æ¯ä¹‹åŽï¼ŒTwitteré¡µé¢ä¸Šçš„ä¸ä¸€è‡´çŽ°è±¡ï¼ŒæŽ¨æ–‡åˆ—è¡¨ä¸­ä½œè€…çš„ç”¨æˆ·åå’Œå¤´åƒè¿˜æ˜¯æ—§çš„å€¼ Twitterç”¨æˆ·ç•Œé¢ä¸ä¸€è‡´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­çš„ã€‚æˆ‘åœ¨Reactive2015è®ºå›ä¸Šè§£é‡Šè¿‡é€ æˆè¿™ç§æƒ…å†µçš„ä¸¤ç§åŽŸå› ï¼šè¦ä¹ˆæ˜¯æ²¡æœ‰è®¢é˜…é€šçŸ¥æŽ¨æ–‡åˆ—è¡¨ç”¨æˆ·ä¿¡æ¯å·²ç»æ”¹å˜ï¼Œéœ€è¦é‡æ–°æ¸²æŸ“ã€‚è¦ä¹ˆå°±æ˜¯æŽ¨æ–‡ä½œè€…çš„æ•°æ®å’Œå½“å‰ç™»é™†ç”¨æˆ·ä¹‹å‰æ²¡æœ‰å…³è”ï¼Œå°½ç®¡è¿™ä¸¤éƒ¨åˆ†çš„æ•°æ®æè¿°çš„æ˜¯ç›¸åŒçš„å±žæ€§ç›¸åŒçš„å¯¹è±¡ã€‚ è€ŒåƒFluxé‚£æ ·çš„ç²—ç²’åº¦çš„è®¢é˜…å¾ˆå®¹æ˜“é€ æˆè¶…é¢è®¢é˜…ã€‚ä½¿ç”¨reactæ—¶ï¼Œå¯ä»¥ä½¿ç”¨reactæä¾›çš„å¼€å‘å·¥å…·æ‰“å°è°ƒè¯•ä¿¡æ¯æŸ¥çœ‹æ˜¯å¦æœ‰æµªè´¹çš„æ¸²æŸ“ï¼Œæ¥ç®€å•çš„åˆ¤æ–­æ˜¯å¦æœ‰è¶…é¢è®¢é˜…çš„æƒ…å†µã€‚è€ŒMobXå¯ä»¥å°†è¿™ç§æƒ…å†µé™è‡³é›¶ã€‚mobxä¼šè‡ªåŠ¨å¸®ä½ ç®¡ç†æˆåƒä¸Šä¸‡çš„è®¢é˜…ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¶…é¢è®¢é˜…å¯èƒ½ä¼šå¾ˆéšç§˜ã€‚å¦‚æžœä½ è®¢é˜…çš„æ•°æ®ä½†å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£å®ƒä»ç„¶æ˜¯è¶…é¢è®¢é˜…çš„ã€‚ä¾‹å¦‚ä¾‹1ä¸­ï¼ŒprofileViewç»„ä»¶è®¢é˜…äº†çš„fullNameï¼Œä½†æ˜¯personå¯¹è±¡æœ‰nickNameå±žæ€§æ—¶ï¼Œå®ƒè¿˜æ˜¯è¶…é¢è®¢é˜…çš„ã€‚ æ‰€ä»¥è®¾è®¡mobxèƒŒåŽçš„ä¸€ä¸ªé‡è¦çš„åŽŸåˆ™æ˜¯: åªæœ‰è¿è¡Œæ—¶ç¡®å®šä¸‹æ¥çš„è®¢é˜…ï¼Œæ‰æ˜¯æœ€å°çš„è®¢é˜…é›†åˆ mboxèƒŒåŽçš„ç¬¬äºŒä¸ªé‡è¦æ€æƒ³æ˜¯ï¼šå°½é‡ä½¿ç”¨mobxåŽ»åˆ›å»ºä¸€ä¸ªå›¾ç»“æž„çš„æ•°æ®æ¨¡åž‹åŽ»ç®¡ç†ä½ çš„åº”ç”¨ï¼Œè€Œä¸æ˜¯å¹³æ—¶å¸¸ç”¨çš„æ ‘çŠ¶ç»“æž„ã€‚ æˆ‘ä»¬çœŸæ­£è¦å¼€å‘çš„åº”ç”¨é€šå¸¸ä¼šæ¯”TodoListå¤æ‚å¾ˆå¤šã€‚å›¾ç»“æž„å¯ä»¥æœ‰æ•ˆçš„ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¹¶é¿å…æ•°æ®é‡å¤ã€‚ mobxå¦‚ä½•ä¿æŒæ‰€æœ‰æ´¾ç”Ÿä¸€è‡´è§£å†³æ–¹æ¡ˆï¼šç”¨è®¡ç®—ä»£æ›¿ç¼“å­˜ã€‚æœ‰äººä¼šé—®ï¼šâ€œé‚£ä¸æ˜¯éžå¸¸æ¶ˆè€—èµ„æºçš„å—?â€å…¶å®žå¹¶æ²¡æœ‰ï¼Œè€Œä¸”ä»–æ•ˆçŽ‡è¿˜æŒºé«˜çš„ã€‚ åŽŸå› æ­£å¦‚ä¸Šé¢æ‰€è§£é‡Šçš„ï¼šmobxå¹¶ä¸è¿è¡Œæ‰€æœ‰æ´¾ç”Ÿï¼ŒåªåŒæ­¥é‚£äº›å‚ä¸Žåˆ°ååº”ä¸­çš„è®¡ç®—å±žæ€§å’Œå¯è§‚æµ‹çŠ¶æ€ã€‚è¿™äº›æ´¾ç”Ÿè¢«ç§°ä¸ºæ´»è·ƒçš„ã€‚ æƒ°æ€§å’Œæ´»è·ƒé‚£ä¹ˆæ²¡æœ‰ç›´æŽ¥æˆ–é—´æŽ¥è¢«ååº”è°ƒç”¨çš„æ´¾ç”Ÿå’‹åŠžå‘¢ï¼Ÿå½“ç„¶ï¼Œä½ ä»ç„¶å¯ä»¥éšæ—¶æ£€æŸ¥è®¡ç®—å±žæ€§ï¼ˆå¦‚fullNameï¼‰çš„å€¼ã€‚ è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼šå¦‚æžœä¸€ä¸ªè®¡ç®—å€¼ä¸æ˜¯æ´»è·ƒçš„ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨éœ€è¦ä»–çš„æ—¶å€™é‡æ–°è®¡ç®—ï¼ˆå°±æ˜¯æƒ°æ€§çš„ï¼‰ï¼Œå°±è·Ÿä¸€ä¸ªæ­£å¸¸çš„getterå‡½æ•°ä¸€æ ·ã€‚å¦‚æžœæƒ°æ€§çš„æ´¾ç”Ÿ(ä»Žæ¥æ²¡æœ‰è§‚å¯Ÿåˆ°ä»»ä½•ä¸œè¥¿)ä»Žä½œç”¨åŸŸä¸­ç§»é™¤ï¼Œå°±ä¼šè¢«åžƒåœ¾æ”¶é›†ã€‚è¿˜è®°å¾—è®¡ç®—å±žæ€§æ˜¯å¯è§‚å¯ŸçŠ¶æ€çš„çº¯å‡½æ•°å§ï¼Ÿè¿™å°±æ˜¯ä¸ºå•¥ä»–æ˜¯çº¯å‡½æ•°çš„åŽŸå› :ä¸ç®¡ä»€ä¹ˆçŠ¶æ€ä¸‹ï¼Œç›¸åŒçš„å¯è§‚æµ‹çŠ¶æ€ï¼Œè®¡ç®—å±žæ€§å‡½æ•°è®¡ç®—çš„ç»“æžœä¹Ÿä¸€å®šæ˜¯ç›¸åŒçš„ã€‚ è¿è¡Œè®¡ç®—mobxä¸­ååº”å’Œè®¡ç®—å±žæ€§éƒ½æ˜¯ç”±ä»¥åŒæ ·çš„æ–¹å¼è¿è¡Œçš„ã€‚å½“å‰è¿è¡Œçš„æ´¾ç”Ÿæœ‰ä¸ªå‡½æ•°æ ˆï¼Œå½“æœ‰è®¡ç®—è§¦å‘äº†æ´¾ç”Ÿçš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¢«æŽ¨å…¥æ ˆä¸­ã€‚åªè¦è®¡ç®—æ­£åœ¨è¿è¡Œï¼Œè¢«è®¿é—®çš„æ¯ä¸ªè¢«è§‚æµ‹çŠ¶æ€éƒ½ä¼šå°†å…¶è‡ªèº«æ³¨å†Œä¸ºæ´¾ç”Ÿæ ˆçš„æœ€é¡¶å±‚å‡½æ•°çš„ä¾èµ–ã€‚å¦‚æžœéœ€è¦è®¡ç®—å±žæ€§çš„å€¼ï¼Œå¹¶ä¸”è®¡ç®—å±žæ€§å·²ç»å¤„äºŽæ´»è·ƒçŠ¶æ€ï¼Œåˆ™ç›´æŽ¥ä½¿ç”¨æœ€åŽä¸€æ¬¡è®¡ç®—å‡ºçš„å€¼ã€‚å¦åˆ™å°±å°†ä»–æŽ¨å…¥æ´¾ç”Ÿå‡½æ•°æ ˆï¼Œåˆ‡æ¢åˆ°æ´»è·ƒçŠ¶æ€ï¼Œå¹¶å¼€å§‹è®¡ç®—ã€‚ å›¾4:åœ¨æ‰§è¡ŒprofileViewå“åº”å‡½æ•°æœŸé—´çš„è®¡ç®—è¿‡ç¨‹ã€‚ å½“è®¡ç®—å®Œæˆæ—¶ï¼Œæ´¾ç”Ÿå°†èŽ·å¾—åœ¨æ‰§è¡ŒæœŸé—´è®¿é—®çš„å¯è§‚æµ‹åˆ—è¡¨ã€‚ ä¾‹å¦‚ï¼Œåœ¨profileViewä¸­ï¼Œæ­¤åˆ—è¡¨å°†åªåŒ…å«nickNameå±žæ€§ï¼Œæˆ–nickNameå’ŒfullNameå±žæ€§ã€‚ æ¯æ¬¡èŽ·å¾—çš„åˆ—è¡¨ä¸Žä¹‹å‰çš„éƒ½å¯èƒ½ä¸åŒã€‚ ä»»ä½•è¢«åºŸå¼ƒçš„å±žæ€§éƒ½å°†è¢«å¿½ç•¥ï¼ˆè®¡ç®—å±žæ€§å¯èƒ½ä»Žæ´»è·ƒæ¨¡å¼è½¬æ¢åˆ°æƒ°æ€§æ¨¡å¼ï¼‰ï¼Œå¹¶ä¸”ä»»ä½•æ–°æ·»åŠ çš„å¯è§‚æµ‹çŠ¶æ€éƒ½å°†è¢«è§‚æµ‹ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡è®¡ç®—ã€‚ å¦‚æžœfirstnameçš„å€¼ä»¥åŽæ›´æ”¹äº†ï¼Œè§‚æµ‹å®ƒçš„æ´¾ç”Ÿå°±çŸ¥é“fullNameéœ€è¦é‡æ–°è®¡ç®—ã€‚è¿™åè¿‡æ¥å°†å¯¼è‡´ç•Œé¢é‡æ–°æ¸²æŸ“ã€‚ ä¸‹ä¸€æ®µæ›´è¯¦ç»†åœ°è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ã€‚ çŠ¶æ€å˜åŒ–çš„ä¼ æ’­ å›¾5ï¼šåœ¨ä¾èµ–å…³ç³»æ ‘ä¸Šæ›´æ”¹â€™1â€™çš„å€¼çš„æ•ˆæžœã€‚ è™šçº¿è¾¹æ¡†è¡¨ç¤ºéœ€è¦è¢«æ›´æ–°çš„æ´¾ç”Ÿã€‚ æ•°å­—è¡¨ç¤ºè®¡ç®—çš„é¡ºåºã€‚ æ´¾ç”Ÿä¼šè‡ªåŠ¨å“åº”çŠ¶æ€çš„å˜åŒ–ã€‚æ‰€æœ‰ååº”å‡½æ•°éƒ½æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè€Œä¸”æ˜¯æ— å¹²æ‰°çš„ã€‚å½“ä¸€ä¸ªå¯è§‚æµ‹çš„å€¼è¢«ä¿®æ”¹ï¼Œæ•´ä¸ªä¿®æ”¹ç®—æ³•å¦‚ä¸‹ï¼š è¢«è§‚æµ‹å¯¹è±¡ç»™æ‰€æœ‰è§‚å¯Ÿå®ƒçš„æ´¾ç”Ÿå‘é€ä¸€ä¸ªè¿‡æœŸé€šçŸ¥ï¼Œå‘Šè¯‰å®ƒä»¬è‡ªå·±éœ€è¦æ›´æ–°äº†ã€‚ä»»ä½•å—åˆ°å½±å“çš„è®¡ç®—å±žæ€§å°†é€’å½’çš„æŠŠæ¶ˆæ¯ä¼ é€’ç»™å…¶ä»–çš„è§‚å¯Ÿè€…ã€‚ç»“æžœï¼Œä¾èµ–æ ‘ä¸­çš„ä¸€éƒ¨åˆ†è¢«æ ‡è®°ä¸ºè¿‡æœŸã€‚åœ¨å›¾5çš„ç¤ºä¾‹ä¾èµ–å…³ç³»æ ‘ä¸­ï¼Œå½“å€¼â€™1â€™æ”¹å˜æ—¶å˜ä¸ºé™ˆæ—§çš„è§‚å¯Ÿè€…ç”¨æ©™è‰²çš„è™šçº¿æ ‡è®°ã€‚è¿™äº›éƒ½æ˜¯å—å½±å“çš„æ´¾ç”Ÿã€‚ å‘é€å¤±æ•ˆé€šçŸ¥å¹¶å­˜å‚¨æ–°å€¼åŽï¼Œå°†å‘é€å°±ç»ªé€šçŸ¥ã€‚ æ­¤æ¶ˆæ¯è¿˜å°†æ ‡è®°å€¼æ˜¯å¦çœŸçš„å‘ç”Ÿäº†æ”¹å˜ã€‚ ä¸€æ—¦æ´¾ç”ŸæŽ¥æ”¶åˆ°é’ˆå¯¹æ­¥éª¤1çš„å°±ç»ªé€šçŸ¥ï¼Œå®ƒå°±çŸ¥é“æ‰€æœ‰çš„è§‚æµ‹å€¼éƒ½å·²ç»ç¨³å®šäº†ï¼Œç„¶åŽå®ƒä¼šå¼€å§‹é‡æ–°è®¡ç®—ã€‚å°±ç»ª/å¤±æ•ˆæ¶ˆæ¯çš„è®¡æ•°å™¨ä¼šä¿è¯è®¡ç®—å±žæ€§â€™4â€™å°†ä¼šåœ¨è®¡ç®—å±žæ€§â€™3â€™å˜å¾—ç¨³å®šä¹‹åŽæ‰é‡æ–°è®¡ç®—ã€‚ å¦‚æžœæ²¡æœ‰æŽ¥åˆ°å°±ç»ªé€šçŸ¥å€¼ï¼Œåˆ™æ´¾ç”Ÿå°†ç®€å•çš„å‘Šè¯‰è‡ªå·±çš„è§‚å¯Ÿè€…è‡ªå·±å·²ç»å‡†å¤‡å¥½äº†ï¼Œä½†æ˜¯å€¼æ²¡å˜ã€‚å¦åˆ™ï¼Œè®¡ç®—å±žæ€§å°†é‡æ–°è®¡ç®—å¹¶ç»™è‡ªå·±çš„è§‚å¯Ÿè€…å‘é€å°±ç»ªé€šçŸ¥ã€‚åœ¨å›¾5ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯”å¦‚è®¡ç®—å±žæ€§â€˜4â€™é‡æ–°è®¡ç®—åŽæ²¡æœ‰äº§ç”Ÿæ–°å€¼ï¼Œé‚£ä¹ˆæœ€åŽçš„å“åº”ï¼ˆâ€˜-â€™è¡¨ç¤ºçš„é‚£ä¸ªï¼‰æ°¸è¿œéƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚ å‰ä¸¤æ®µæ€»ç»“äº†å¦‚ä½•åœ¨è¿è¡Œæ—¶è·Ÿè¸ªå¯è§‚æµ‹çŠ¶æ€å’Œæ´¾ç”Ÿä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡æ´¾ç”Ÿæ¥ä¼ æ’­å˜åŒ–ã€‚ çŽ°åœ¨ï¼Œä½ å¯èƒ½è¿˜ä¼šæ„è¯†åˆ°ï¼Œååº”å…¶å®žå°±æ˜¯ä¸€ä¸ªæ€»æ˜¯å¤„äºŽæ´»è·ƒçŠ¶æ€çš„è®¡ç®—å±žæ€§ã€‚ æ­¤å¤–ï¼Œmobxè¿˜åº”ç”¨äº†è®¸å¤šå…¶ä»–ä¼˜åŒ–ï¼Œä¸è¿‡è¿™è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼Œæš‚ä¸è®¨è®ºã€‚ åŒæ­¥æ‰§è¡Œäººä»¬ç»å¸¸æƒŠè®¶ä¸Žmobxæ‰€æœ‰çš„åŠ¨ä½œéƒ½æ˜¯åŒæ­¥è¿è¡Œçš„ï¼ˆåƒRxJså’Œä¸åƒknockoutï¼‰ã€‚ è¿™æœ‰ä¸¤å¤§ä¼˜ç‚¹ï¼šé¦–å…ˆï¼Œå®ƒå˜å¾—æ ¹æœ¬ä¸å¯èƒ½è§‚å¯Ÿåˆ°è¿‡æœŸçš„æ´¾ç”Ÿã€‚ å› æ­¤ï¼Œåœ¨å½±å“å®ƒçš„å€¼ä¿®æ”¹ä¹‹åŽï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨æ´¾ç”Ÿçš„å€¼ã€‚ å…¶æ¬¡ï¼Œå®ƒä½¿æ ˆè·Ÿè¸ªå’Œè°ƒè¯•æ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒé¿å…äº†æ— ç”¨çš„æ ˆè·Ÿè¸ªã€‚ ä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸å¼•å…¥æ‰¹é‡æ“ä½œã€‚æ¯”å¦‚autocomplateä¹‹ç±»çš„å¸¸è§åŠŸèƒ½ï¼Œä¼šåœ¨çŸ­æ—¶é—´å†…è¿žç»­å¤šæ¬¡æ”¹å˜å€¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸€ç³»åˆ—æ”¹å˜ä¹‹åŽå†å‘é€å°±ç»ªé€šçŸ¥ã€‚è¿™å°±è¦ç”¨mobxä¸­çš„å¦ä¸€ä¸ªæ¦‚å¿µï¼Œäº‹åŠ¡ï¼ˆtransactionï¼‰ã€‚ äº‹åŠ¡å¯ä»¥æŽ¨è¿Ÿå°±ç»ªé€šçŸ¥ï¼Œæ•´ä¸ªäº‹åŠ¡å®Œæˆã€‚ 1234transaction(() =&gt; &#123; michel.firstName = "Mich"; michel.lastName = "W.";&#125;); ä¾‹ 2: äº‹åŠ¡ç¤ºä¾‹ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬æ€»ç»“äº†mobxæœ€åŸºæœ¬çš„å®žçŽ°ç»†èŠ‚ã€‚æˆ‘ä»¬è¿˜æ²¡æœ‰è¦†ç›–ä¸€åˆ‡ï¼Œä½†æ˜¯å‰©ä¸‹çš„ä¹Ÿéƒ½å¾ˆå¥½ç†è§£ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥ç»„åˆè®¡ç®—å±žæ€§ã€‚ é€šè¿‡ç»„åˆååº”å’Œè®¡ç®—å±žæ€§ï¼Œç”šè‡³å¯ä»¥è‡ªåŠ¨å°†ä¸€ä¸ªæ•°æ®å›¾è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ•°æ®å›¾ã€‚é€šè¿‡è¿™äº›ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜èƒ½å¾ˆå®¹æ˜“çš„å®žçŽ°ä¸€äº›å¤æ‚çš„æ¨¡å¼ï¼Œå¦‚map-reduceï¼Œæ—¶é—´å›žæº¯ï¼Œæˆ–è€…æ¨ªå‘æ•°æ®åŠ è½½ã€‚ é‡ç‚¹æ¦‚è¦ï¼š å¤æ‚åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºçŠ¶æ€æœ€å¥½ä½¿ç”¨å›¾è¡¨æ¥è¡¨ç¤ºï¼Œæ—¢èƒ½ä¿è¯æ•°æ®å’Œè§†å›¾çš„ä¸€è‡´æ€§ï¼Œåˆç›´è§‚å¥½ç†è§£ ä¸åº”è¯¥é€šè¿‡æ‰‹åŠ¨è®¢é˜…æ¥åŒæ­¥çŠ¶æ€ã€‚è¿™å°†ä¸å¯é¿å…åœ°å¯¼è‡´è¶…é¢è®¢é˜…å’Œé—æ¼è®¢é˜… ä½¿ç”¨è¿è¡Œæ—¶åˆ†æžæ¥ç¡®å®šè§‚å¯Ÿè€…â†’å¯è§‚æµ‹çŠ¶æ€å…³ç³»çš„æœ€å°é›†åˆã€‚ è¿™æ ·å°±èƒ½è¾¾åˆ°æ—¢ä¿è¯åŸºæœ¬åŠŸèƒ½ï¼Œåˆä¿æŒæœ€å°è®¡ç®—é‡çš„æ•ˆæžœã€‚ æ²¡æœ‰è¢«ä¸»åŠ¨è°ƒç”¨çš„æ´¾ç”Ÿéƒ½ä¼šè¢«ä¼˜åŒ–æŽ‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[javascriptä¸­çš„è¿›ç¨‹ã€çº¿ç¨‹å’Œåç¨‹]]></title>
      <url>%2F2016%2F12%2F30%2Fprocess-thread-and-coroutine-in-javascript%2F</url>
      <content type="text"><![CDATA[è¿™å‘¨ä¸€ç›´åœ¨ç¼–å‰ç«¯æž„å»ºçš„è„šæœ¬ï¼Œç”¨åˆ°äº†å¤šè¿›ç¨‹åŽ»è§£å†³ä¸€ä¸ªæ•ˆçŽ‡é—®é¢˜ã€‚æœŸé—´å·®äº†å¾ˆå¤šè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„èµ„æ–™ï¼Œåœ¨è¿™é‡Œè®°å½•å›žé¡¾ä¸€ä¸‹ã€‚ æ¦‚å¿µå…³äºŽè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„æ¦‚å¿µè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œå…·ä½“çš„å¯ä»¥å‚è€ƒwikiç™¾ç§‘ï¼š è¿›ç¨‹ çº¿ç¨‹ åç¨‹ ç®€å•æ¦‚æ‹¬ä¸€ä¸‹å®ƒä»¬é—´çš„åŒºåˆ«å°±æ˜¯ç›¸å¯¹çº¿ç¨‹å’Œåç¨‹ï¼Œè¿›ç¨‹æ›´ç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥è¿›ç¨‹é—´é€šä¿¡æ¯”è¾ƒå›°éš¾ã€‚çº¿ç¨‹æ¯”è¿›ç¨‹è½»é‡çº§ï¼Œå±žäºŽåŒä¸€è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹é—´å¯ä»¥å…±äº«å…¨éƒ¨èµ„æºã€‚åç¨‹ä¸Žçº¿ç¨‹ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºŽï¼Œçº¿ç¨‹ç”±ç³»ç»ŸæŽ§åˆ¶åˆ‡æ¢ï¼Œåç¨‹æ˜¯ç”±ç”¨æˆ·æŽ§åˆ¶åˆ‡æ¢ã€‚ é‚£ä¹ˆï¼ŒæŽ§åˆ¶åˆ‡æ¢ï¼ŒæŒ‡çš„æ˜¯æŽ§åˆ¶ä»€ä¹ˆçš„åˆ‡æ¢å‘¢ï¼Ÿ åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œçš„ç¨‹åºï¼Œæœ‰æ—¶éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªå·¥ä½œï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè®©æ¯ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªå·¥ä½œã€‚ä½†æ˜¯ï¼Œè¿›ç¨‹åªæœ‰ä¸€ä¸ªã€‚å°±å¥½æ¯”ä¸€ä¸ªäººï¼Œä½ ç»™ä»–åˆ†é…äº†å¤šä¸ªå·¥ä½œï¼Œå¸®ä»–æŠŠæ¯ä¸ªå·¥ä½œå•ç‹¬æ‹‰äº†ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯è¿˜æ˜¯ä»–ä¸€ä¸ªäººå¹²ï¼Œä»–åªèƒ½ä¸€ä¼šå„¿å¹²å¹²è¿™ä¸€ä¼šå„¿å¹²å¹²é‚£ï¼Œæ¥æ¨¡æ‹Ÿå¤šä¸ªå·¥ä½œåŒæ—¶è¿›è¡Œçš„çŠ¶æ€ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç³»ç»ŸæŽ§åˆ¶åˆ‡æ¢ï¼Œç³»ç»Ÿä¸åœçš„åœ¨å¤šä¸ªçº¿ç¨‹é—´åˆ‡æ¢æ¥è¾¾åˆ°å¹¶è¡Œçš„æ•ˆæžœã€‚ä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£æ ¹ä¸€ä»¶ä¸€ä»¶å¹²ä¸æ˜¯ä¸€æ ·å—ï¼Ÿæ²¡é”™ï¼Œæ˜¯ä¸€æ ·çš„ï¼Œåœ¨åªæœ‰ä¸€ä¸ªcpuçš„ç”µè„‘ä¸Šï¼Œç”¨ä¸ç”¨å¤šçº¿ç¨‹ç¨‹åºæ‰§è¡Œçš„æ—¶é—´æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æžœè¿™ä¸ªäººé•¿äº†ä¸¤ä¸ªè„‘è¢‹å‘¢ï¼Ÿé‚£ä¹ˆä»–å°±èƒ½åŒæ—¶å¤„ç†ä¸¤ä»¶å·¥ä½œäº†ã€‚å¤šæ ¸cpuå°±æ˜¯é‚£ä¸ªé•¿äº†å¥½å¤šä¸ªè„‘åœ°çš„äººâ€¦â€¦è€Œåç¨‹çš„åˆ‡æ¢æ˜¯è¦ç”±ç”¨æˆ·æ‰‹åŠ¨æ¥æŽ§åˆ¶çš„ï¼Œæ‰€ä»¥åç¨‹å¹¶é€‚åˆå¹¶è¡Œè®¡ç®—ï¼Œè€Œæ›´å¤šçš„ç”¨æ¥ä¼˜åŒ–ç¨‹åºç»“æž„ã€‚ jséƒ½æ”¯æŒå—ï¼Ÿè¿™è¦çœ‹jsåœ¨ä»€ä¹ˆçŽ¯å¢ƒè¿è¡Œã€‚ åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡webworkersåˆ›å»ºè¿›ç¨‹ï¼Œå¯ä»¥é€šè¿‡async/awaitï¼Œyield/Generator/GeneratorFunctionå®žçŽ°åç¨‹ï¼ŒæŽ§åˆ¶ç¨‹åºåˆ‡æ¢ã€‚ åœ¨nodeä¸­ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨ä¸Šé¢æµè§ˆå™¨ä¸­å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡clusterï¼Œchild_processåˆ›å»ºè¿›ç¨‹ï¼Œé€šè¿‡libuvï¼Œtaggåˆ›å»ºçº¿ç¨‹ åˆšæ‰æåˆ°çš„é‚£äº›éƒ½æ˜¯å•¥ï¼Ÿæ€Žä¹ˆç”¨ï¼Ÿwebworkersç®€å•ç‚¹å„¿è¯´å°±æ˜¯ä½¿ç”¨webworkersä½ å¯ä»¥åœ¨å…¨æ–°çš„çŽ¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªä½ æŒ‡å®šçš„jsæ–‡ä»¶ã€‚è¿™ä¸ªå…¨æ–°çš„çŽ¯å¢ƒæ˜¯ç‹¬ç«‹çš„ï¼Œæ—¢ä¸€ä¸ªå…¨æ–°çš„è¿›ç¨‹ï¼Œæœ‰ç‚¹å„¿åƒä¸€ä¸ªæ–°iframeè¿˜æ²¡æœ‰window.topï¼Œwindow.parentå±žæ€§ï¼Œå“ˆå“ˆâ€¦â€¦ webworkersåˆ›å»ºçš„è¿›ç¨‹å’Œä¸»è¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡messageäº‹ä»¶ä¼ é€’æ¶ˆæ¯ï¼Œä½†æ˜¯æ¶ˆæ¯åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æƒ³è¦ä¼ å¯¹è±¡å’Œæ•°ç»„å°±åªèƒ½ä¼ jsonäº†â€¦â€¦è¿™ä¹Ÿæ˜¯ä»–ä¸æ–¹ä¾¿çš„åœ°æ–¹ã€‚ å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹MDNä¸Šçš„æ–‡ç« ï¼šä½¿ç”¨ Web Workers async/awaitasync/awaitæ˜¯es7ä¸­æ–°åŠ çš„ä¸¤ä¸ªå…³é”®å­—ï¼Œasync å¯ä»¥å£°æ˜Žä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ­¤å‡½æ•°éœ€è¦è¿”å›žä¸€ä¸ª Promise å¯¹è±¡ã€‚await å¯ä»¥ç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡ resolveï¼Œå¹¶æ‹¿åˆ°ç»“æžœã€‚ å…¶å®žå°±æ˜¯ç±»ä¼¼æ±‡ç¼–çš„å¯„å­˜å™¨å’Œè·³è½¬æŒ‡ä»¤â€¦â€¦å‘ƒï¼Œé€šä¿—çš„è¯´å°±æ˜¯å¯ä»¥æ ¹æ®çŠ¶æ€è·³è½¬æ€å¦ä¸€ä¸ªå‡½æ•°åŠä¸­é—´ã€‚ ç”±äºŽes7è¿˜æœªåœ¨å„ä¸ªçŽ¯å¢ƒå®žçŽ°ï¼Œæƒ³è¦ä½¿ç”¨çš„è¯è¿˜çš„ç”¨ä¸€äº›babel-polyfillä¹‹ç±»çš„åº“åšå…¼å®¹â€¦â€¦ æ›´è¯¦ç»†ä»‹ç»è¯·çœ‹é˜¿é˜®çš„æ–‡ç« ï¼šå¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•° yield/Generator/GeneratorFunctiongeneratoræ˜¯es6ä¸­æ–°å¢žçš„å‡½æ•°ï¼Œæœ¬è´¨æ˜¯å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæš‚åœï¼Œå¹¶ä¿å­˜ä¸Šä¸‹æ–‡ï¼Œå†æ¬¡è°ƒç”¨æ—¶æ¢å¤å½“æ—¶çš„çŠ¶æ€ã€‚ä½†æ˜¯ç”¨æ¥è§£å†³åç¨‹åˆ‡æ¢çš„é—®é¢˜è²Œä¼¼æœ‰ç‚¹å„¿æ»¥ç”¨ç‰¹æ€§çš„æ„Ÿè§‰å‘¢â€¦â€¦ æ›´è¯¦ç»†ä»‹ç»è¯·çœ‹é˜¿é˜®çš„æ–‡ç« ï¼šGenerator å‡½æ•° clusterclusteræ˜¯nodeå®˜æ–¹æä¾›çš„ä¸€ä¸ªå¤šè¿›ç¨‹æ¨¡å—ï¼Œæ•ˆæžœå’ŒCè¯­è¨€çš„forkå‡½æ•°ç±»ä¼¼ï¼Œå½“å‰æ–‡ä»¶å®Œå…¨é‡æ–°æ‰§è¡Œä¸€éï¼Œé€šè¿‡cluster.isMasteråˆ¤æ–­æ˜¯ä¸æ˜¯ä¸»è¿›ç¨‹ï¼Œåœ¨åŒºåˆ†ä¸åŒçš„æ“ä½œã€‚è¿›ç¨‹é—´é€šè¿‡äº‹ä»¶å›žè°ƒæ¥é€šä¿¡ï¼ŒNodeJS 0.6.x ä»¥ä¸Šçš„ç‰ˆæœ¬å¼€å§‹æ”¯æŒã€‚ ç¤ºä¾‹ä»£ç å°±ä¸æ”¾äº†ï¼Œnodeå®˜æ–¹æ–‡æ¡£ä¸Šå†™çš„å¾ˆè¯¦ç»†ï¼šcluster child_processnodeè‡ªå¸¦çš„child_processæ¨¡å—é‡Œçš„forkå‡½æ•°å¯ä»¥å®žçŽ°ç±»ä¼¼æµè§ˆå™¨é‡Œwebworkersçš„æ•ˆæžœï¼Œä½¿ç”¨æ–¹æ³•å’Œwebworkerä¸€æ¯›ä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡è¯»å–æ–°æ–‡ä»¶å¼€å¯æ–°è¿›ç¨‹ï¼Œé€šè¿‡messageé€šä¿¡ã€‚ å…·ä½“ä»‹ç»è¯·çœ‹æ–‡æ¡£ï¼šchild_process.fork(modulePath[, args][, options]) å®˜æ–¹æ–‡æ¡£æ²¡æœ‰ç¤ºä¾‹ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªwebæœåŠ¡æŽ¥æ”¶å‚æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°ç»„çš„ä¾‹å­ï¼š index.js1234567891011121314var express = require('express');var fork = require('child_process').fork;var app = express();app.get('/', function(req, res)&#123; var worker = fork('./work_fibo.js') //åˆ›å»ºä¸€ä¸ªå·¥ä½œè¿›ç¨‹ worker.on('message', function(m) &#123;//æŽ¥æ”¶å·¥ä½œè¿›ç¨‹è®¡ç®—ç»“æžœ if('object' === typeof m &amp;&amp; m.type === 'fibo')&#123; worker.kill();//å‘é€æ€æ­»è¿›ç¨‹çš„ä¿¡å· res.send(m.result.toString());//å°†ç»“æžœè¿”å›žå®¢æˆ·ç«¯ &#125; &#125;); worker.send(&#123;type:'fibo',num:~~req.query.n || 1&#125;);//å‘é€ç»™å·¥ä½œè¿›ç¨‹è®¡ç®—fiboçš„æ•°é‡&#125;);app.listen(8124); work_fibo.js123456789101112131415var fibo = function fibo (n) &#123;//å®šä¹‰ç®—æ³• return n &gt; 1 ? fibo(n - 1) + fibo(n - 2) : 1;&#125;process.on('message', function(m) &#123;//æŽ¥æ”¶ä¸»è¿›ç¨‹å‘é€è¿‡æ¥çš„æ¶ˆæ¯ if(typeof m === 'object' &amp;&amp; m.type === 'fibo')&#123; var num = fibo(~~m.num); //è®¡ç®—jibo process.send(&#123;type: 'fibo',result:num&#125;) //è®¡ç®—å®Œæ¯•è¿”å›žç»“æžœ &#125;&#125;);process.on('SIGHUP', function() &#123; process.exit();//æ”¶åˆ°killä¿¡æ¯ï¼Œè¿›ç¨‹é€€å‡º&#125;); libuvlibuvæ˜¯nodeåº•å±‚å®žçŽ°ä½¿ç”¨çš„c++åº“â€¦â€¦å‘ƒï¼Œæ‰€ä»¥å¦‚æžœä½ æƒ³ä½¿ç”¨è¿™ä¸ªåº“æ¥å®žçŽ°å¤šçº¿ç¨‹ï¼Œé‚£ä¹ˆä½ å°±å¾—ç¼–å†™c++çš„ä»£ç äº†ï¼Œä¸å¾—ä¸è¯´ï¼Œè¦æƒ³çœŸæ­£ç†è§£ç¨‹åºçš„æœ¬è´¨ï¼Œä¸å¤šæŽŒæ¡å‡ é—¨è¯­è¨€çœŸæ˜¯ä¸è¡Œå•Šâ€¦â€¦ å¯¹c++ä¸äº†è§£æˆ‘å°±ä¸çžŽBBäº†ï¼ŒæŽ¨èä¸¤ç¯‡æ–‡ç« å»¶ä¼¸é˜…è¯»ï¼š libuvå¤šçº¿ç¨‹å¤„ç†çš„ç®€å•ç¤ºä¾‹ åˆ©ç”¨libuvç¼–å†™å¼‚æ­¥å¤šçº¿ç¨‹çš„addonå®žä¾‹ taggtagg(Threads a gogo for Node.js)æ˜¯Jorge Chamorro Bielingå¼€å‘çš„ä¸€ä¸ªnodeåŒ…ã€‚ä½¿ç”¨cè¯­è¨€phreadåº“å®žçŽ°çš„å¤šçº¿ç¨‹ã€‚ è¿˜æ˜¯é‚£åˆšæ‰çš„æ–æ³¢é‚£å¥‘æ•°ç»„è®¡ç®—ä¸ºä¾‹ï¼š 12345678910var Threads = require('threads_a_gogo');//åŠ è½½taggåŒ…function fibo(n) &#123;//å®šä¹‰æ–æ³¢é‚£å¥‘æ•°ç»„è®¡ç®—å‡½æ•° return n &gt; 1 ? fibo(n - 1) + fibo(n - 2) : 1;&#125;var t = Threads.create().eval(fibo);t.eval('fibo(35)', function(err, result) &#123;//å°†fibo(35)ä¸¢å…¥å­çº¿ç¨‹è¿è¡Œ if (err) throw err; //çº¿ç¨‹åˆ›å»ºå¤±è´¥ console.log('fibo(35)=' + result);//æ‰“å°fiboæ‰§è¡Œ35æ¬¡çš„ç»“æžœ&#125;);console.log('not block');//æ‰“å°ä¿¡æ¯äº†ï¼Œè¡¨ç¤ºæ²¡æœ‰é˜»å¡ž æœ€åŽç»“æžœï¼š12not blockfibo(35)=14930352 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œæ•ˆæžœä¸Žwebworkerç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯é€šä¿¡ä½¿ç”¨äº†å¼‚æ­¥å›žè°ƒçš„æ–¹å¼ã€‚ å€¼å¾—ä¸€æçš„æ˜¯taggåŒ…ç›®å‰åªèƒ½åœ¨linuxä¸‹å®‰è£…è¿è¡Œï¼Œè¿™é‡Œå†æŽ¨èä¸€ä¸ªtagg2åŒ…ï¼Œæ˜¯è·¨å¹³å°çš„ã€‚ è¿™é‡Œéœ€è¦é‡ç‚¹æä¸€ä¸‹çš„æ˜¯ï¼Œä¸è®ºtaggè¿˜æ˜¯tagg2åŒ…éƒ½æ˜¯åˆ©ç”¨phtreadåº“å’Œv8çš„v8::Isolate Classç±»æ¥å®žçŽ°jså¤šçº¿ç¨‹åŠŸèƒ½çš„ã€‚ Isolateä»£è¡¨ç€ä¸€ä¸ªç‹¬ç«‹çš„v8å¼•æ“Žå®žä¾‹ï¼Œv8çš„Isolateæ‹¥æœ‰å®Œå…¨åˆ†å¼€çš„çŠ¶æ€ï¼Œåœ¨ä¸€ä¸ªIsolateå®žä¾‹ä¸­çš„å¯¹è±¡ä¸èƒ½å¤Ÿåœ¨å¦å¤–ä¸€ä¸ªIsolateå®žä¾‹ä¸­ä½¿ç”¨ã€‚åµŒå…¥å¼å¼€å‘è€…å¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹åˆ›å»ºä¸€äº›é¢å¤–çš„Isolateå®žä¾‹å¹¶è¡Œè¿è¡Œã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œä¸€ä¸ªIsolateå®žä¾‹åªèƒ½å¤Ÿè¢«ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè®¿é—®ï¼Œå¯ä»¥åˆ©ç”¨åŠ é”/è§£é”è¿›è¡ŒåŒæ­¥æ“ä½œã€‚ æ¢è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œv8çš„åµŒå…¥å¼å¼€å‘æ—¶ï¼Œæ— æ³•åœ¨å¤šçº¿ç¨‹ä¸­è®¿é—®jså˜é‡ï¼Œè¿™æ¡è§„åˆ™å°†ç›´æŽ¥å¯¼è‡´æˆ‘ä»¬ä¹‹å‰çš„tagg2é‡Œé¢çº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°æ— æ³•ä½¿ç”¨Node.jsçš„æ ¸å¿ƒapiï¼Œæ¯”å¦‚fsï¼Œcryptoç­‰æ¨¡å—ã€‚ å»¶ä¼¸é˜…è¯»ï¼š tagg tagg2 æ€»ç»“ç»è¿‡ä»¥ä¸Šçš„å­¦ä¹ ï¼Œæˆ‘ä»¬å¤§æ¦‚åº”è¯¥äº†è§£åˆ°è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„ä½¿ç”¨åœºæ™¯äº†ï¼Œè¿›ç¨‹ã€çº¿ç¨‹é€‚åˆç”¨æ¥å¤„ç†è®¡ç®—å¯†é›†åž‹æ“ä½œï¼Œåç¨‹é€‚åˆç”¨æ¥ä¼˜åŒ–ä»£ç ç»“æž„ï¼Œè§£å†³å›žè°ƒå‡½æ•°åµŒå¥—é—®é¢˜ã€‚çº¿ç¨‹æ¯”è¿›ç¨‹æ›´è½»ï¼Œæ›´èŠ‚çœèµ„æºï¼Œä½†æ˜¯ç”±äºŽä¸Šé¢æåˆ°çš„çº¿ç¨‹é—®é¢˜ï¼Œé’ˆå¯¹ä¸€äº›å¯ä»¥ä½¿ç”¨jsåŽŸç”Ÿçš„å¤§é‡è®¡ç®—æˆ–å¾ªçŽ¯è¿˜å¯ä»¥ç”¨ç”¨ï¼Œæ¶‰åŠåˆ°ä½¿ç”¨nodejsæ ¸å¿ƒapiçš„æ“ä½œï¼Œæ¯”å¦‚æ–‡ä»¶å¤„ç†ä¹‹ç±»çš„æ“ä½œï¼Œå°±è¦ç”¨è¿›ç¨‹ä½¿ç”¨è§£å†³äº†ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨libuvåº“å†™c++æ¨¡å—å¤„ç†å¤šçº¿ç¨‹çš„æ“ä½œï¼Œä½†æ˜¯è¿˜è¦å­¦c++å•Šæœ›å¤©å„¿â€¦â€¦ ç›¸å…³æ–‡ç«  Node.jsçš„çº¿ç¨‹å’Œè¿›ç¨‹ nodejså¤šçº¿ç¨‹ï¼ŒçœŸæ­£çš„éžé˜»å¡ž åç¨‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆè§‰å¾—åç¨‹æ˜¯è¶‹åŠ¿ï¼Ÿ p.s. æˆ‘çš„é—®é¢˜æˆ‘åœ¨å·¥ä½œä¸­ä½¿ç”¨çš„æ˜¯fisé…åˆgruntè°ƒç”¨æ‰“åŒ…ã€‚ç”±äºŽè¦åŒæ—¶æ‰“åŒ…å¤šä¸ªé¡¹ç›®ï¼Œgruntå’Œfiséƒ½ä¼šå®šä¹‰å…¨å±€å˜é‡ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„é…ç½®å¯èƒ½ä¼šç›¸äº’å½±å“ï¼Œå„ä¸ªæ¨¡å—åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­åˆæ²¡æœ‰ç›¸äº’çš„é€šä¿¡ï¼ŒåŒæ—¶ä¸ºäº†æé«˜æ•ˆçŽ‡ï¼Œéžå¸¸æ—¶å€™é€‚åˆä½¿ç”¨å¤šè¿›ç¨‹çš„æ–¹å¼æ¥è¿è¡Œè„šæœ¬ã€‚æ‰€ä»¥ç”¨clusterå®žçŽ°äº†å¤šè¿›ç¨‹æ‰“åŒ…çš„ã€‚ æœ€åŽï¼Œæ–°å¹´å¿«ä¹ï¼Œç¥å¤§å®¶åœ¨2017å¹´é‡Œï¼Œéƒ½èƒ½å–æœ€çƒˆçš„é…’ï¼Œæ—¥æœ€é‡Žçš„ç‹—~ â”‘(ï¿£Ð” ï¿£)â”]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å“åº”å¼reactï¼šæž„å»ºé«˜æ•ˆæ˜“ç”¨çš„reactåº”ç”¨]]></title>
      <url>%2F2016%2F12%2F23%2Fmaking-react-reactive-pursuit-high-performing-easily-maintainable-react-apps%2F</url>
      <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ªmobxä½œè€… Michel Weststrate çš„ä¸€ç¯‡åšå®¢ï¼Œè™½ç„¶æˆ‘ä¹Ÿæƒ³åšåˆ°ä¿¡è¾¾é›…ï¼Œå¥ˆä½•è‹±è¯­æ°´å¹³æœ‰é™â€¦â€¦æ‰€ä»¥æˆ‘å†™çš„å†…å®¹è‡ªåŠ¨å±è”½äº†ä¸€äº›å‰å› åŽæžœæ²¡è¥å…»çš„è¯ï¼Œåªç¿»è¯‘æˆ‘è§‰å¾—é‡ç‚¹çš„å†…å®¹ã€‚æˆ‘çš„åŽŸåˆ™æ˜¯ï¼Œæžå¹²çš„è¯´ï¼Œä¸BB~æƒ³äº†è§£ç»†èŠ‚çš„è¯å¯ç§»æ­¥åŽŸæ–‡ ä½¿ç”¨reactå¼€å‘åº”ç”¨æœ‰å•¥å¥½å¤„ï¼Œæˆ‘æƒ³æ˜¯ä¸ªå‰ç«¯éƒ½èƒ½æ•°å‡ºä¸ªåæ¡å…«æ¡æ¥ã€‚ä½†æ˜¯å¦‚æžœä½ çš„é¡¹ç›®éœ€è¦åœ¨æµè§ˆå™¨ä¸­ç»˜åˆ¶æˆåƒä¸Šä¸‡çš„å¯¹è±¡ï¼Œè€Œä¸”è¿™äº›å¯¹è±¡ä¹‹å‰è¿˜æœ‰å¤§é‡çš„è€¦åˆå…³ç³»ï¼Œé‚£ç»´æŠ¤è¿™äº›å¯¹è±¡ä¹Ÿå¤Ÿå–ä¸€å£¶çš„â€¦â€¦mobxä½œè€…åœ¨å‘æ˜Žmobxçš„æ—¶å€™å°±é¢ä¸´äº†è¿™æ ·ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ä¸ªå¯¹è±¡çš„å€¼å¯èƒ½è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œä»»ä½•å˜åŒ–éƒ½å¯èƒ½å¼•èµ·å¤§é‡çš„uiæ›´æ–°å’Œé‡ç»˜ã€‚åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œæ¯”å¦‚æ‹–æ‹½æ“ä½œï¼Œè¿™äº›åŠ¨ä½œè¿˜å¿…é¡»åœ¨40æ¯«ç§’å“åº”â€¦â€¦ äºŽæ˜¯ï¼Œmobxè¢«å¼€å‘å‡ºæ¥äº†ã€‚ç®€å•æ¥è¯´ï¼Œä»–ä½¿ç”¨äº†å‡½æ•°å“åº”å¼ç¼–ç¨‹çš„æ¦‚å¿µ Observables æ¥è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œå…¶å®ž mobx å¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªä½¿ç”¨è¿™ä¸€æ¦‚å¿µçš„å‰ç«¯åº“ï¼Œemberã€knockoutè¿˜æœ‰vueå…¶å®žéƒ½ä½¿ç”¨äº†è¿™ä¸€æ¦‚å¿µï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œmobxå°±å¥½åƒæŠŠvueå’Œknockoutçš„æ•°æ®ç»‘å®šé‚£éƒ¨åˆ†æŠ½å‡ºæ¥ç„¶åŽæ‰åˆ°ä¸€èµ·ä¸€æ ·â€¦â€¦çœŸçš„èƒ½å‘çŽ°å¾ˆå¤šæœ‰ç›¸ä¼¼çš„åœ°æ–¹â€¦â€¦ä½¿ç”¨ Observables çš„å¥½å¤„å°±åœ¨äºŽï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“å®žçŽ°è‡ªåŠ¨æ›´æ–°å…³è”æ•°æ®å’Œsideways data loadingï¼Œä»Žè€Œè§£æ”¾ç”Ÿäº§åŠ›ï¼Œæå‡åº”ç”¨çš„æ€§èƒ½ã€‚åŽé¢æµ‹è¯•æ•°æ®ä¸€ç« å¯ä»¥çœ‹åˆ°å…·ä½“çš„å¯¹æ¯”ç»“æžœã€‚ ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„è´­ç‰©åº”ç”¨ä¸ºä¾‹ï¼š é‡Œé¢åŒ…å«å•†å“åˆ—è¡¨ï¼Œè´­ç‰©è½¦ï¼Œç»“ç®—ç­‰éƒ¨åˆ†ã€‚å®Œæ•´çš„ä¾‹å­å¯ä»¥å†jsfiddleä¸Šçœ‹åˆ°ï¼ˆéœ€è¦ç¿»å¢™ï¼‰ã€‚ æ•°æ®æ¨¡åž‹é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹æ•°æ®æ¨¡åž‹ã€‚å•†å“åˆ—è¡¨ï¼ˆArticlesï¼‰é‡Œçš„æ¯ä¸ªå•†å“ï¼Œæœ‰åç§°ï¼ˆnameï¼‰å’Œä»·æ ¼ï¼ˆpriceï¼‰å±žæ€§ï¼Œè´­ç‰©è½¦ï¼ˆCartï¼‰æœ‰å·²åŠ å…¥è´­ç‰©è½¦åˆ—è¡¨ï¼ˆEntriesï¼‰å’Œæ€»ä»·ï¼ˆTotalï¼‰å±žæ€§ã€‚å·²åŠ å…¥è´­ç‰©è½¦åˆ—è¡¨ä¸­çš„æ¯ä¸ªå•†å“é™¤äº†åå­—å’Œä»·æ ¼å±žæ€§ä»¥å¤–ï¼Œè¿˜æœ‰æ•°é‡å±žæ€§ï¼ˆamountï¼‰ã€æ ¹æ®æ•°é‡å’Œå•ä»·è®¡ç®—å‡ºçš„æ€»ä»·ã€‚æ•°æ®ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ä»Žä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¦‚æžœå¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šå¸¦åŠ¨å…¶ä»–çš„æ•°æ®ä¿®æ”¹ï¼ŒåŒæ—¶è¿˜å¾—ä¿®æ”¹uiã€‚å¤§æ¦‚åˆ—ä¸€ä¸‹æ•°æ®è”åŠ¨çš„é€»è¾‘ï¼š å¦‚æžœå•†å“åˆ—è¡¨é‡Œçš„å•†å“ä»·æ ¼å‘ç”Ÿæ”¹å˜ï¼Œè´­ç‰©è½¦é‡Œçš„å•†å“ä»·æ ¼ä¹Ÿéœ€è¦æ›´æ–°ã€‚ â€¦â€¦è´­ç‰©è½¦çš„æ€»ä»·ä¹Ÿå¾—æ›´æ–°ã€‚ å¦‚æžœè´­ç‰©è½¦ä¸­å•†å“æ•°é‡å˜åŒ–ï¼Œæ€»ä»·ä¹Ÿå¾—è·Ÿç€æ›´æ–°ã€‚ å¦‚æžœå•†å“åˆ—è¡¨é‡Œçš„å•†å“è¢«é‡å‘½åäº†ï¼Œå•†å“åˆ—è¡¨çš„ç•Œé¢å¾—æ›´æ–°ã€‚ â€¦â€¦è´­ç‰©è½¦é‡Œå¯¹åº”çš„å•†å“ä¹Ÿå¾—æ›´æ–°ã€‚ å¦‚æžœæ·»åŠ æ–°æ–‡ç« åˆè®¡è´­ç‰©è½¦â€¦â€¦ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå°±æ˜¯è¿™ä¹ˆé—¹å¿ƒâ€¦â€¦ä½ ä¸å¾—ä¸å†™å¤§é‡çš„ä»£ç æ¥å¤„ç†å„ç§å¯èƒ½çš„çŠ¶æ€ï¼Œå¤„ç†é€Ÿåº¦è¿˜å¾—å¿«ï¼Œè®©ç”¨æˆ·è€çˆ·ç­‰ç€æ€¥äº†ä½ æ‹…å¾…å¾—èµ·å—â€¦â€¦ é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ€Žä¹ˆç”¨mobxæ¥æ—¥ç¿»è¿™äº›é—®é¢˜ï¼š 123456789101112131415161718192021222324252627function Article(name, price) &#123; mobx.extendObservable(this, &#123; name: name, price: price &#125;);&#125;function ShoppingCartEntry(article) &#123; mobx.extendObservable(this, &#123; article: article, amount: 1, price: function() &#123; return this.article ? this.article.price * this.amount : 0; &#125; &#125;);&#125;function ShoppingCart() &#123; mobx.extendObservable(this, &#123; entries: [], total: function() &#123; return this.entries.reduce(function(sum, entry) &#123; return sum + entry.price; &#125;, 0); &#125; &#125;);&#125; ä½¿ç”¨å·¥å…·å‡½æ•°åŒ…è£…ä¹‹åŽï¼Œé€šè¿‡æž„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å¯è§‚æµ‹çš„ï¼Œå°±æ˜¯è¯´å½“å¯¹è±¡çš„æŸä¸€ä¸ªå±žæ€§æ”¹å˜ï¼Œè·Ÿä»–è·Ÿä»–ç›¸å…³è”çš„å±žæ€§éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™æ ·çŠ¶æ€å˜åŒ–å°±ä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨ç»´æŠ¤äº†ï¼Œæ¯”å¦‚æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦æ—¶æ€»ä»·çš„å˜åŒ–ã€ç‰©å“çš„ä»·æ ¼å‘ç”Ÿå˜åŒ–æ—¶å…¶ä»–å…³è”é¡¹çš„å˜åŒ–ç­‰ç­‰ã€‚ ç•Œé¢æ¨¡åž‹å»ºå¥½äº†ï¼Œè¯¥æ­ç•Œé¢äº†ã€‚ä¸‹é¢çš„åˆ—äº†ä¸€æ®µè´­ç‰©è½¦ç»„ä»¶çš„ä»£ç ï¼ŒåŒ…å«äº†æ˜¾ç¤ºè´­ç‰©è½¦é‡Œçš„å•†å“åˆ—è¡¨å’Œæ€»ä»·ã€‚å…¶ä»–ç»„ä»¶è¯·è‡ªè¡Œè„‘è¡¥ï¼Œéƒ½å·®ä¸ç¦»çš„ã€‚ 1234567891011121314151617181920212223242526var CartView = React.createClass(&#123; render: function() &#123; function renderEntry(entry) &#123; return (&lt;CartEntryView entry=&#123;entry&#125; cart=&#123;this.props.cart&#125; key=&#123;entry.id&#125; /&gt;); &#125; return (&lt;div&gt; &lt;ul id="cart"&gt;&#123;this.props.cart.entries.map(renderEntry)&#125;&lt;/ul&gt; &lt;div&gt;&lt;b&gt;Total: &lt;span id="total"&gt;&#123;this.props.cart.total&#125;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt; &lt;/div&gt;) &#125;&#125;);var CartEntryView = React.createClass(&#123; render: function() &#123; return (&lt;li&gt; &lt;button onClick=&#123;this.removeArticle&#125;&gt;&amp;laquo;&lt;/button&gt; &lt;span&gt;&#123;this.props.entry.article.name&#125;&lt;/span&gt; &lt;span&gt;&#123;this.props.entry.amount&#125;&lt;/span&gt; &lt;/li&gt;); &#125;, removeArticle: function() &#123; if (--this.props.entry.amount &lt; 1) this.props.cart.entries.splice(this.props.cart.entries.indexOf(this.props.entry), 1); &#125;&#125;); ç»„ä»¶å†™å®Œäº†ï¼Œä½†æ˜¯æ²¡è·Ÿæ¨¡åž‹å…³è”è¿˜è·‘ä¸èµ·æ¥ï¼Œéœ€è¦ç”¨mobx-reactåº“é‡Œçš„ mobxReact.observer æ–¹æ³•æŠŠç»„ä»¶éƒ½åŒ…è£…è£…ä¸€ä¸‹ï¼Œè¿™å°±ç®—å…³è”ä¸Šäº†ï¼š 1234var CartEntryView = mobxReact.observer(React.createClass(&#123; render: function() &#123; return (&lt;li&gt; // etc... ç„¶åŽï¼Œå°±æ²¡æœ‰ç„¶åŽâ€¦â€¦æ˜¯çš„ï¼Œè¿™å°±ç®—é½æ´»äº†ã€‚è®©æˆ‘ä»¬çœ‹ä¸‹jsfiddleä¸Šçš„æ¼”ç¤ºã€‚ è¿™é‡Œ observer å‡½æ•°ä¸ºæˆ‘ä»¬åšäº†ä¸¤ä»¶äº‹ã€‚é¦–å…ˆï¼Œå®ƒå°†ç»„ä»¶çš„ render å‡½æ•°å˜æˆä¸€ä¸ªå¯è§‚å¯Ÿåˆ°çš„å‡½æ•°ã€‚ç„¶åŽï¼ŒæŠŠç»„ä»¶æ³¨å†Œåˆ°è§‚å¯Ÿè€…å‡½æ•°ï¼Œæ‰€ä»¥æ¯æ¬¡ render éœ€è¦æ›´æ–°äº†ä»–éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚mobxReact.observerï¼ˆå¦‚æžœä½ ä½¿ç”¨ES6çš„è¯æ˜¯ @observerï¼‰ç¡®ä¿æ¯å½“æ•°æ®æ”¹å˜ï¼Œåªæ›´æ–°UIçš„ç›¸å…³éƒ¨åˆ†ï¼Œå°±æ˜¯åˆšæ‰ä¸Šé¢æåˆ°çš„sideways data loadingã€‚ä½ å¯ä»¥è‡ªå·±ç‚¹ç‚¹è¯•è¯•ï¼Œæ³¨æ„çœ‹ä¸‹æ–¹çš„æ—¥å¿—é¢æ¿ï¼Œçœ‹çœ‹UIæ›´æ–°çš„æ•°æ®ï¼Œä½ ä¼šå‘çŽ°ï¼Œæ¯æ¬¡æ“ä½œï¼Œç»„ä»¶çš„é‡ç»˜æ•°é‡éƒ½æ˜¯æœ€ä½Žçš„ã€‚ å¦å¤–ï¼Œç”±äºŽæ¯ä¸ªç»„ä»¶éƒ½åªè·Ÿè¸ªè‡ªå·±çš„ä¾èµ–ï¼Œé€šå¸¸ä¸éœ€è¦é‡æ–°æ¸²æŸ“å­ç»„ä»¶ã€‚æ¯”å¦‚ï¼Œå¦‚æžœè´­ç‰©è½¦çš„æ€»ä»·é‡æ–°æ¸²æŸ“äº†ï¼Œåœ¨ä¸å¿…è¦çš„æƒ…å†µä¸‹å°±ä¸ä¼šé‡æ–°æ¸²æŸ“è´­ç‰©è½¦é‡Œçš„å•†å“åˆ—è¡¨ã€‚ æµ‹è¯•æ•°æ®ä¸œè¥¿å¥½ä¸å¥½,ä¸»è¦çœ‹ç–—æ•ˆã€‚è¿™é‡Œä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä¸€æ¯›ä¸€æ ·çš„åº”ç”¨ï¼Œä½†æ²¡æœ‰ä½¿ç”¨mobxï¼Œè€Œæ˜¯ç®€å•çš„ä½¿ç”¨æ¯æ¬¡æ›¿æ¢æ•°æ®çš„æ–¹æ³•æž„å»ºçš„ã€‚åªæœ‰å‡ ä¸ªå•†å“ï¼Œä¸ä¼šæ„Ÿè§‰åˆ°æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†ä¸€æ—¦å•†å“æ•°é‡ä¸Šå‡ï¼Œå°±ä¼šæçŽ°å‡ºçœŸæ­£æ„ä¹‰ä¸Šçš„æ€§èƒ½å·®å¼‚ã€‚ åˆ›å»ºå¤§é‡çš„æ•°æ®å’Œç»„ä»¶çš„æ—¶å€™ï¼ŒåŸºæœ¬æ²¡å•¥å·®åˆ«ã€‚ä½†æ˜¯åœ¨ä¿®æ”¹æ•°æ®æ—¶ï¼Œå¼ºå¼±ç«‹åˆ†é«˜ä¸‹åŠ›åˆ¤ã€‚å¦‚æžœåœ¨æœ‰10000ä¸ªå…ƒç´ çš„åˆ—è¡¨ä¸­æ›´æ–°å…¶ä¸­10ä¸ªå…ƒç´ çš„æ•°æ®ï¼Œé€Ÿåº¦å¤§çº¦å¿«äº†åå€ã€‚2.5ç§’ä¸‹é™åˆ°250æ¯«ç§’â€¦â€¦é‚£ä¹ˆè¿™ç§å·®åˆ«æ˜¯ä»Žå“ªé‡Œæ¥çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çž…çž…ä¸é€‚ç”¨mobxæ—¶Reactçš„æ¸²æŸ“æŠ¥å‘Šï¼š å¯ä»¥çœ‹åˆ°ï¼ŒArticleViews å’Œ CartEntryViewsä¸€å…±æ¸²æŸ“äº†20000æ¬¡ã€‚2433æ¯«ç§’çš„æ¸²æŸ“æ—¶é—´ä¸­ï¼Œ2145æ¯«ç§’çš„æ¸²æŸ“æ—¶é—´æ˜¯è¢«æµªè´¹çš„ï¼ˆWasted timeï¼‰ã€‚Wasted timeçš„æ„æ€æ˜¯ï¼šèŠ±è´¹åœ¨æ‰§è¡Œæ¸²æŸ“å‡½æ•°ä¸Šçš„æ—¶é—´ï¼Œå®žé™…ä¸Šå¹¶æ²¡æœ‰æ›´æ–°ä»»ä½•ä¸€ä¸ªDOMå…ƒç´ ã€‚è¿™æœ‰åŠ›åœ°è¯´æ˜Žäº†ï¼Œæ— è„‘æ›´æ–°æ˜¯ä¸€ä»¶å¾ˆæµªè´¹cupèµ„æºçš„ï¼Œç»„ä»¶è¶Šå¤šæµªè´¹çš„æ—¶é—´å°±è¶Šå¤šã€‚ ç›¸è¾ƒä¹‹ä¸‹ï¼Œè¿™æ˜¯ä½¿ç”¨mobxçš„æŠ¥å‘Šï¼š é‡ç»˜çš„åªæœ‰31ä¸ªç»„ä»¶ï¼Œå®Œå…¨æ²¡æœ‰ä¸€ç‚¹æµªè´¹ã€‚å°±æ˜¯è¯´æ¯ä¸ªé‡æ–°æ¸²æŸ“çš„ç»„ä»¶éƒ½æ˜¯ç¡®å®žéœ€è¦ä¿®æ”¹çš„ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦å®žçŽ°çš„æ•ˆæžœï¼ ç„¶è€Œï¼Œè¿™æ ·ä½ å°±æ»¡è¶³äº†å—ï¼Ÿæˆ‘ä»¬è¿˜å¯ä»¥å†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ ä»ŽæŠ¥å‘Šä¸­æˆ‘ä»¬è¿˜å¯ä»¥çœ‹å‡ºï¼Œ267æ¯«ç§’çš„æ€»ä½“æ¸²æŸ“æ—¶é—´é‡Œï¼Œå¤§éƒ¨åˆ†å‰©ä½™çš„æ¸²æŸ“æ—¶é—´æ¶ˆè€—åœ¨CartViewçš„æ¸²æŸ“ä¸Šï¼ˆ243æ¯«ç§’ï¼‰ã€‚é‚£æ˜¯åœ¨æ›´æ–°è´­ç‰©è½¦çš„æ€»ä»·å±žæ€§ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¦é‡æ–°æ¸²æŸ“CartViewï¼Œä¹Ÿå°±æ„å‘³ç€è¦æ£€æŸ¥è´­ç‰©è½¦ä¸­ä¸€ä¸‡ä¸ªå•†å“æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œæ˜¯å¦è¦æ›´æ–°CartEntryViewã€‚è€Œè¿™å°±æµªè´¹äº†å¤§éƒ¨åˆ†æ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ€»ä»·å†å•ç‹¬åšä¸€ä¸ªæŽ§ä»¶ï¼ŒCartTotalViewã€‚é€šè¿‡è¿™ä¸ªç®€å•çš„å¤„ç†ï¼Œå¦‚æžœåªæ˜¯æ€»ä»·çš„å˜åŒ–ï¼Œå°±å¯ä»¥è·³è¿‡CartViewçš„é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å¾—æ¸²æŸ“æ—¶é—´è¿›ä¸€æ­¥ä¸‹é™åˆ°çº¦60æ¯«ç§’ï¼ˆè§ä¸Šå›¾ä¸­çš„ç°è‰²é‚£ä¸€æ¡ï¼‰ï¼Œè¿™æ¯”æ²¡æœ‰ä½¿ç”¨Mobxçš„Reactåº”ç”¨å¤§çº¦å¿«äº†40å€! æ€»ç»“å¥½çš„ï¼Œé€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬çœ‹åˆ°äº†ä½¿ç”¨mobxå’Œä¸ä½¿ç”¨mobxåœ¨æ€§èƒ½ä¸Šçš„åŒºåˆ«ã€‚è¿™é‡Œè¿˜éœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨äº†mobxè¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå°±æ˜¯ä¸ä¼šå½±å“ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¯¹äºŽç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå°±ç®—æœ‰ä¸‡èˆ¬å¥½å¤„ï¼Œå¦‚æžœä»£ç å†™å‡ºæ¥åƒå±Žä¸€æ ·éš¾çœ‹ï¼Œä¹Ÿä¸ä¼šæœ‰äººæƒ³ç”¨å¯¹å§ï¼Ÿåœ¨jsfiddleé‡Œé¢å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªä¾‹å­çš„å®Œæ•´ç¨‹åºã€‚ä¸¤æ®µä»£ç åŸºæœ¬æ²¡å•¥å¤ªå¤§çš„åŒºåˆ«â€¦â€¦â”‘(ï¿£Ð” ï¿£)â” é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å…¶ä»–æŠ€æœ¯è¾¾åˆ°ç›¸åŒçš„æ•ˆæžœå—ï¼Ÿä¹Ÿè®¸å§ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ImmutableJSä¹Ÿèƒ½åšåˆ°sideways data loadingã€‚ç„¶è€Œï¼Œå°±åƒæˆ‘åˆšæ‰è¯´çš„ï¼Œæœ‰å¯èƒ½ä½ ä¼šæ”¶èŽ·ä¸€å¨æ˜¯ä¸€æ ·çš„ä»£ç â€¦â€¦æ¯•ç«Ÿï¼Œæ•æˆ‘ç›´è¨€ï¼Œç›¸å¯¹äºŽä¸å¯å˜å¯¹è±¡ï¼Œå¯å˜ç±»ä½¿ç”¨èµ·æ¥ä¼šæ›´æ–¹ä¾¿ä¸€äº›ã€‚æ­¤å¤–ï¼Œä¸å¯å˜çš„æ•°æ®ç»“æž„ä¸èƒ½å¸®åŠ©ä½ ä¿æŒè®¡ç®—å±žæ€§ã€‚å¦‚æžœä½¿ç”¨ä¸å¯å˜æ•°æ®ï¼Œæ”¹å˜å•†å“çš„åå­—ArticleViewä¼šé‡æ–°æ¸²æŸ“çš„å¾ˆå¿«ï¼Œä½†æ˜¯CartEntryViewä¸­å¼•ç”¨çš„ç›¸åŒå•†å“å®žä¾‹å°±ä¼šå¤±æ•ˆã€‚ å¦ä¸€ç§ä¼˜åŒ–Reactåº”ç”¨çš„æ–¹æ¡ˆæ˜¯ä¸ºæ¯ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„æ“ä½œåˆ›å»ºäº‹ä»¶ï¼Œç„¶åŽåœ¨ç®¡ç†è¿™äº›äº‹ä»¶ï¼Œåœ¨æ°å½“çš„æ—¶æœºæ°å½“çš„åœ°ç‚¹ï¼ˆç»„ä»¶ï¼‰è§¦å‘ï¼ˆæ³¨é”€ï¼‰å®ƒä»¬ã€‚ä½†è¿™å°†å¯¼è‡´ç¼–å†™å¤§é‡çš„æ ·æ¿å¼ä»£ç ï¼Œç»´æŠ¤èµ·æ¥ç›¸å½“å›°éš¾ã€‚æˆ‘ä¸çŸ¥é“äººå•Šï¼Œåæ­£æˆ‘æ˜¯æ‡’å¾—å¼„è¿™äº›â€¦â€¦ï¼ˆå“¥ä½ æ˜¯ä¸æ˜¯ä¸ä¼šæ–­å¥â€¦â€¦è¿™æ®µçœ‹çš„å¥½çº ç»“å•Šâ€¦â€¦ï¼‰ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½¿ç”¨actionæ¥æŠ½è±¡å¯¹æ¨¡åž‹çš„æ›´æ–°ï¼Œè¿™æ ·èƒ½æœ‰æ•ˆçš„åšåˆ°è¡¨çŽ°å’Œè¡Œä¸ºåˆ†ç¦»ã€‚ æœ€åŽï¼Œåœ¨å¤§åž‹é¡¹ç›®ä¸­ä½¿ç”¨mboxé…åˆReactæ˜¯éžå¸¸å¥½ç”¨çš„ã€‚æœ‰æ—¶æˆ‘çœ‹åˆ°æ•°æ®å˜åŒ–æ—¶ï¼Œç•Œé¢ä¸ŠæŸä¸ªè§’è½ä¹Ÿè·Ÿç€æ›´æ–°äº†ï¼Œæˆ‘è‡ªå·±éƒ½æƒŠå‘†äº†â€¦â€¦è€Œä¸”è¿˜æ²¡æœ‰ä»»ä½•æ€§èƒ½é—®é¢˜ï¼Œä½ è¯´æ°”äººä¸â€¦â€¦(ï¿£â–½ï¿£)â€â€¦â€¦å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼Œè®©æˆ‘ä»¬æŠŠç¹é‡çš„ç»´æŠ¤å·¥ä½œéƒ½ä¸¢ç»™Reactå’ŒMobxï¼Œæ•¬è¯·äº«å—æ›´è½»æ¾æœ‰è¶£çš„codingå§~ï¼ ç›¸å…³æ–‡ç«  MobX library React performance guide Shopping cart demo, React with Observables Shopping cart demo, React without Observables Shopping cart demo, JQuery with Observables]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MobXå…¥å‘æŒ‡å—(4) -- Utility functions]]></title>
      <url>%2F2016%2F12%2F16%2FMobX-simple-entry-4%2F</url>
      <content type="text"><![CDATA[ä¹‹å‰å‡ ç¯‡å¤§æ¦‚ä»‹ç»äº†mobxæœ€å¸¸ç”¨çš„å‡ ä¸ªæ–¹æ³•ï¼Œè¿™æ¬¡å‡†å¤‡æŠŠå‰©ä½™çš„å…¬å…±æ–¹æ³•éƒ½ä»‹ç»äº†ã€‚ autorunAsyncautorunAsync(debugName?: string, action: () =&gt; void, minimumDelay?: number, scope?): disposer autorunAsync çš„åŠŸèƒ½ä¸Ž autorun ç›¸ä¼¼ï¼ŒåŠŸèƒ½éƒ½æ˜¯åœ¨è§‚æµ‹å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è¿è¡Œå›žè°ƒå‡½æ•° actionã€‚ä¸åŒç‚¹åœ¨äºŽ autorun æ˜¯åœ¨è§‚æµ‹å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ç«‹å³æ‰§è¡Œçš„ï¼Œè€Œ autorunAsyncæ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥é€šè¿‡ minimumDelay å‚æ•°æ¥æŒ‡å®šå»¶è¿Ÿçš„æ—¶é—´ã€‚å¦‚æžœè¢«è§‚æµ‹å¯¹è±¡çš„åœ¨å»¶è¿Ÿè¿‡ç¨‹ä¸­å‘ç”Ÿå¤šæ¬¡å˜åŒ–ï¼Œaction ä¹Ÿåªä¼šåœ¨å»¶è¿Ÿç»“æŸæ—¶è§¦å‘ä¸€æ¬¡ï¼Œæ‰€ä»¥å®ƒå’ŒåŽé¢è¦ä»‹ç»åˆ°çš„ transaction æ–¹æ³•æ•ˆæžœç±»ä¼¼ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹è¿™ä¸ªæ–¹æ³•å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ä»–å¯ä»¥è¢«ç”¨æ¥é˜²æ­¢é¢‘ç¹å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚ å¦‚æžœä¼ äº† scope å‚æ•°ï¼Œé‚£ä¹ˆ scope å°†ä½œä¸º action è¿è¡Œæ—¶çš„thisã€‚ å¦‚æžœä¼ äº†ç¬¬ä¸€ä¸ªå‚æ•° debugNameï¼Œé‚£ä¹ˆåœ¨è°ƒè¯•å·¥å…·ä¸­å°†ä½¿ç”¨ debugName ä½œä¸ºè°ƒè¯•ä¿¡æ¯ã€‚ å’Œ autorun ä¸€æ ·ï¼ŒautorunAsync ä¹Ÿä¼šè¿”å›žä¸€ä¸ªé”€æ¯å‡½æ•°ã€‚ 1234567autorunAsync(() =&gt; &#123; // æˆ‘ä»¬å‡è®¾ searchBar.keyword å·²ç»è¢«è§‚æµ‹, æ˜¯æœç´¢è¾“å…¥æ¡†çš„å€¼ã€‚å½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶æˆ‘ä»¬è¦æŠŠå®ƒå‘é€åˆ°æœåŠ¡ç«¯è¯·æ±‚æœç´¢ç»“æžœã€‚ // å¦‚æžœè¿™é‡Œä½¿ç”¨autorunï¼Œé‚£ä¹ˆæ¯æ¬¡å˜åŒ–éƒ½ä¼šå‘è°ƒç”¨sendKeywordToServerã€‚ // ä½¿ç”¨autorunAsyncå»¶è¿Ÿ300mså‘é€ï¼Œå½“å‘é€æ—¶ï¼ŒsearchBar.keywordä¼šæ˜¯è¿™300mså†…å˜åŒ–çš„æœ€ç»ˆå€¼ã€‚ // è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢é¢‘ç¹è¯·æ±‚é€ æˆæœåŠ¡æŠ–åŠ¨ã€‚ sendKeywordToServer(searchBar.keyword);&#125;, 300); Atomç±» å’Œ Reactionç±»Atomæœ‰äº›æ—¶å€™ï¼Œä½ å¯èƒ½æƒ³è¦æœ‰æ›´å¤šçš„æ•°æ®ç»“æž„æˆ–å…¶ä»–çš„ä¸œè¥¿(æ¯”å¦‚streams)ï¼Œä¹Ÿå¯ä»¥ç”¨äºŽå“åº”è®¡ç®—ã€‚å¯ä»¥ä½¿ç”¨ Atom ç±»ç®€å•å¿«é€Ÿçš„å®žçŽ°è¿™ä¸€åŠŸèƒ½ã€‚Atom å®žä¾‹å¯ä»¥é€šçŸ¥mobxè§‚æµ‹å¯¹è±¡å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œmobxä¼šåœ¨å¯ç”¨å’Œåœç”¨è§‚æµ‹å¯¹è±¡çš„æ—¶å€™é€šçŸ¥ Atom å®žä¾‹ã€‚ ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº† Atom çš„å…¨éƒ¨åŠŸèƒ½ï¼Œè¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ—¶é’Ÿï¼Œè¿™ä¸ªæ—¶é’Ÿåªæœ‰åœ¨è¢«è§‚æµ‹æ—¶æ‰ä¼šè¿è¡Œã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import &#123;Atom, autorun&#125; from "mobx";class Clock &#123; atom; intervalHandler = null; currentDateTime; constructor() &#123; // åˆ›å»ºä¸€ä¸ªAtomå®žä¾‹ this.atom = new Atom( // ç¬¬ä¸€ä¸ªå‚æ•°: Atomå®žä¾‹çš„åå­—, è°ƒè¯•ç”¨çš„ "Clock", // ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰: ä»Žä¸è¢«ç›‘å¬åˆ°è¢«ç›‘å¬æ—¶çš„å›žè°ƒå‡½æ•°. () =&gt; this.startTicking(), // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰: ä»Žè¢«ç›‘å¬åˆ°ä¸è¢«ç›‘å¬æ—¶çš„å›žè°ƒå‡½æ•° // æ³¨æ„ï¼Œatomå®žä¾‹ä¼šå¤šæ¬¡åœ¨è¿™ä¸¤ç§çŠ¶æ€è§è½¬æ¢ () =&gt; this.stopTicking() ); &#125; getTime() &#123; // å¦‚æžœAtomå®žä¾‹è¢«å“åº”å‡½æ•°è°ƒç”¨ï¼Œåˆ™reportObservedè¿”å›žtrueã€‚ // åŒæ—¶ï¼ŒreportObservedä¼šé€šçŸ¥mobxè¿™ä¸ªå®žä¾‹åœ¨å“åº”å›žè°ƒä¸­è¢«ä½¿ç”¨äº†ï¼Œå®ƒè¿˜ä¼šè§¦å‘å®žä¾‹çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆstartTickingï¼‰ if (this.atom.reportObserved()) &#123; return this.currentDateTime; &#125; else &#123; // å½“æ²¡æœ‰å“åº”å‡½æ•°è°ƒç”¨Atomå®žä¾‹çš„æ—¶å€™ï¼Œå°±ä¸ä¼šè§¦å‘startTickingã€‚ // æ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œè¿™é‡Œä¹Ÿå¯ä»¥åšä¸åŒçš„å¤„ç†ï¼Œæ¯”å¦‚æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿”å›žä¸€ä¸ªé»˜è®¤å€¼ç­‰ç­‰ã€‚ return new Date(); &#125; &#125; tick() &#123; this.currentDateTime = new Date(); // é€šçŸ¥mobxå½“å‰å€¼å‘ç”Ÿäº†å˜åŒ– this.atom.reportChanged(); &#125; startTicking() &#123; this.tick(); // åˆå§‹åŒ–æ—¶é’Ÿ this.intervalHandler = setInterval( () =&gt; this.tick(), 1000 ); &#125; stopTicking() &#123; clearInterval(this.intervalHandler); this.intervalHandler = null; &#125;&#125;const clock = new Clock();const disposer = autorun(() =&gt; console.log(clock.getTime()));// ... æ¯ç§’æ‰“å°æ—¶é—´disposer();// åœæ­¢æ‰“å°ã€‚å¦‚æžœæ²¡æœ‰å“åº”å‡½æ•°è°ƒç”¨å½“å‰clockå®žä¾‹ï¼Œé‚£ä¹ˆæ—¶é’Ÿå°†åœæ­¢ã€‚ä¼šè§¦å‘stopTickingå‡½æ•°ã€‚ Reactionä½¿ç”¨ Reaction å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç›‘å¬å™¨ã€‚Reaction æŽ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»–ä¼šåˆ†æžè¿™ä¸ªå‡½æ•°æ‰€ä¾èµ–çš„è¢«è§‚æµ‹å¯¹è±¡ï¼Œç„¶åŽè¿½è¸ªä»–ä»¬ï¼Œå½“ä»–ä»¬å‘ç”Ÿå˜åŒ–æ—¶å‘å‡ºäº‹ä»¶ã€‚ ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº† autorun æ˜¯å¦‚ä½•ç”¨ Reaction å®žçŽ°çš„ï¼Œå…¶å®žè¿™ä¸ªä¾‹å­æˆ‘æ²¡çœ‹å¤ªæ‡‚ï¼Œè²Œä¼¼å¿…é¡»è°ƒç”¨ Reaction çš„trackæ–¹æ³•æ‰èƒ½è¿½è¸ªå¹¶å‘å‡ºä¿¡å·ï¼Œä½†æ˜¯ä¾‹å­ä¸­æ˜¯åœ¨ Reaction æŽ¥æ”¶çš„å‡½æ•°ä¸­è°ƒç”¨ï¼Œç„¶åŽrunReactionçš„æ—¶å€™å¼€å§‹ï¼Œå…·ä½“çš„å¾—ç­‰æˆ‘ç¿»äº†æºç ä¹‹åŽæ‰èƒ½çŸ¥é“äº†â€¦â€¦ 12345678910111213141516export function autorun(view: Lambda, scope?: any) &#123; if (scope) view = view.bind(scope); const reaction = new Reaction(view.name || "Autorun", function () &#123; this.track(view); &#125;); // å¼€å§‹æˆ–è€…æŽ’å…¥é˜Ÿåˆ— if (isComputingDerivation() || globalState.inTransaction &gt; 0) globalState.pendingReactions.push(reaction); else reaction.runReaction(); return reaction.getDisposer();&#125; createTransformercreateTransformer(transformation: (value: A) =&gt; B, onCleanup?: (result: B, value?: A) =&gt; void): (value: A) =&gt; B createTransformer å¯ä»¥å°†ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼ˆå¯ä»¥å°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºå¦ä¸€ä¸ªå€¼å¾—å‡½æ•°ï¼Œæ¯”å¦‚æ•°ç»„çš„mapæ–¹æ³•æŽ¥æ”¶çš„å‡½æ•°ï¼‰åŒ…è£…æˆä¸€ä¸ªå¯ç¼“å­˜çš„å“åº”å‡½æ•°ã€‚æ¢å¥è¯è¯´, å¦‚æžœå‚æ•°transformationæŽ¥æ”¶åˆ°ä¸€ä¸ªå€¼Aï¼Œç„¶åŽæŠŠAè½¬åŒ–ä¸ºäº†Bï¼Œé‚£ä¹ˆä»¥åŽå†æŽ¥æ”¶åˆ°Aï¼Œå®ƒå°±ä¼šæŠŠç¼“å­˜çš„Bè¿”å›žã€‚å¦‚æžœAå‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆtransformationä¼šé‡æ–°è®¡ç®—æ›´æ–°Bã€‚å¦‚æžœæ²¡æœ‰å“åº”å‡½æ•°å¼•ç”¨è¿™ä¸ªè½¬æ¢å‡½æ•°äº†ï¼Œé‚£ä¹ˆä»–å°†è‡ªåŠ¨æ¸…é™¤è‡ªå·±çš„ç¼“å­˜ã€‚ ä½¿ç”¨ createTransformer å¯ä»¥æ–¹ä¾¿çš„å¯¹ä¸€ä¸ªå®Œæ•´çš„æ•°æ®ç»“æž„è¿›è¡Œè½¬æ¢ï¼ˆåŽŸæ–‡ï¼šit is very easy to transform a complete data graph into another data graphï¼Œæˆ‘ä¸ªäººç†è§£æ˜¯ï¼Œä½œè€…æƒ³è¡¨è¾¾è¿™ç§è½¬æ¢æ–¹å¼å¯¹å›¾è¿™ç§æ•°æ®ç»“æž„ä¼šç‰¹åˆ«æœ‰æ•ˆâ€¦â€¦ï¼‰ã€‚è½¬æ¢å‡½æ•°è¿˜å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨å¾ˆå¤šå°çš„è½¬æ¢å‡½æ•°ç¢Žç‰‡ç»„æˆä¸€ä¸ªæ ‘çŠ¶ç»“æž„ï¼Œæè¿°æ›´å¤æ‚çš„æ¨¡åž‹ã€‚æœ€ç»ˆç»„æˆçš„æ•°æ®æ¨¡åž‹ä¸ä¼šè¿‡æœŸï¼Œä»–ä¼šä¸€ç›´ä¸Žç»„æˆä»–çš„è½¬æ¢å‡½æ•°ç¢Žç‰‡ä¿æŒåŒæ­¥ã€‚è¿™ä¸ªç‰¹æ€§èƒ½è®©mobxå¾ˆå®¹æ˜“å®žçŽ°ä¸€äº›å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚sideways data loadingï¼ˆreactçš„ä¸€ä¸ªæ¦‚å¿µï¼Œå°†æ•°æ®ç›´æŽ¥æŽ¨é€ç»™æŸäº›å…·ä½“çš„ç»„ä»¶ï¼Œè€Œéžä»Žçˆ¶çº§å±‚å±‚ä¼ é€’ï¼Œæ•°æ®åŠ è½½åŽåŸºæœ¬ä¸Šæ— éœ€ä»Žåº•å±‚åˆ·æ–°appï¼Œè€Œæ˜¯åˆ·æ–°è‹¥å¹²ç»„ä»¶ä¸­æŸä¸ªå…·ä½“çš„éƒ¨åˆ†ï¼‰ã€map-reduceï¼ˆä»¿ä½›è¯´çš„æ˜¯è°·æ­Œä¸‰å®ä¹‹ä¸€çš„MapReduceæž¶æž„â€¦â€¦map-reduceä¸Žjsç›¸å…³çš„èµ„æ–™æˆ‘æ²¡æœ‰æŸ¥åˆ°ï¼Œå…·ä½“MapReduceçš„ä»‹ç»å¯ä»¥çœ‹è¿™é‡Œï¼‰ã€è¿½è¸ªä¸å¯å˜å¯¹è±¡å˜æ›´åŽ†å²ï¼Œç­‰ç­‰ã€‚ onCleanup å‚æ•°ä¼šåœ¨è½¬æ¢å‡½æ•°ä¸å†è¢«ä½¿ç”¨æ—¶è¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥é”€æ¯èµ„æºã€‚ è½¬æ¢å‡½æ•°éœ€è¦ç”¨å“åº”å‡½æ•°åŒ…è£…æ‰èƒ½èµ·ä½œç”¨ï¼Œæ¯”å¦‚æ”¾åœ¨ @observer æˆ–è€… autorun é‡Œã€‚å’Œå…¶ä»–çš„è®¡ç®—å±žæ€§ä¸€æ ·ï¼Œå¦‚æžœä¸å†æœ‰è§‚å¯Ÿè€…è°ƒç”¨ï¼Œè½¬æ¢å‡½æ•°ä¹Ÿå°†é€€å¥½ä¸ºæƒ°æ€§çš„ï¼Œä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œä»¥ä¿è¯ç¨‹åºçš„æ€§èƒ½ã€‚ ä¸Šé¢è¯´çš„å„ç§æ¦‚å¿µå¯èƒ½ä¼šæ¯”è¾ƒéš¾ç†è§£ï¼Œä¸‹é¢åˆ—å‡ºäº†ä¸¤ä¸ªä¾‹å­æ¥è§£é‡Šä¹‹å‰çš„æ¦‚å¿µ: è¿½è¸ªæ•°æ®å˜åŒ–ï¼Œåˆ†äº«æ•°æ®ç»“æž„è¿™ä¸ªä¾‹å­æ˜¯ä»Žè¿™é‡Œæ¥å¾—ï¼ˆæˆ‘èƒ½ä»Žä¸­çœ‹å‡ºè¿½è¸ªæ•°æ®çŠ¶æ€æ¥ï¼Œä½†æ˜¯åˆ†äº«æ•°æ®ç»“æž„æ²¡çœ‹å‡ºæ¥â€¦â€¦ï¼‰: 12345678910111213141516171819202122232425262728293031/* storeç”¨æ¥ä¿å­˜boxeså’Œarrows*/const store = observable(&#123; boxes: [], arrows: [], selection: null&#125;);/** statesåˆ—è¡¨ç”¨æ¥ä¿å­˜åºåˆ—åŒ–ä¹‹åŽçš„storeåŽ†å²çŠ¶æ€*/const states = [];autorun(() =&gt; &#123; states.push(serializeState(store));&#125;);const serializeState = createTransformer(store =&gt; (&#123; boxes: store.boxes.map(serializeBox), arrows: store.arrows.map(serializeArrow), selection: store.selection ? store.selection.id : null&#125;));const serializeBox = createTransformer(box =&gt; (&#123;...box&#125;));const serializeArrow = createTransformer(arrow =&gt; (&#123; id: arrow.id, to: arrow.to.id, from: arrow.from.id&#125;)); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œstatesä¸­çš„æ¯ä¸ªstateçš„åºåˆ—åŒ–ï¼Œç”±ä¸‰ä¸ªä¸åŒçš„è½¬åŒ–å‡½æ•°å®Œæˆã€‚autorunè§¦å‘storeçš„åºåˆ—åŒ–ï¼Œè¿›è€Œåºåˆ—åŒ–æ‰€æœ‰çš„boxeså’Œarrowsã€‚ è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå‡è®¾çš„ä¾‹å­æ¥çœ‹çœ‹æ‰§è¡Œçš„è¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬å¾€store.boxesä¸­æ·»åŠ ä¸€ä¸ªboxï¼Œæˆ‘ä»¬å«ä»–box#3ã€‚ é¦–å…ˆbox#3ä¼šè¢« map æ–¹æ³•ä¼ å…¥ serializeBox å‡½æ•°ï¼ŒserializeBox å‡½æ•°æ‰§è¡Œå°†å…¶åºåˆ—åŒ–å¹¶å°†ç»“æžœæ·»åŠ è¿›è‡ªå·±çš„ç¼“å­˜åˆ—è¡¨ã€‚ å½“å¦ä¸€ä¸ªboxåˆ«æ·»åŠ è¿›store.boxesï¼Œå°†å¯¼è‡´ serializeState å‡½æ•°é‡æ–°è®¡ç®—ç»“æžœï¼Œä»Žè€Œäº§ç”Ÿä¸€ä¸ªå…¨æ–°çš„boxesåˆ—è¡¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯¹äºŽå·²å­˜åœ¨çš„å€¼ï¼ŒserializeBoxéƒ½å°†ä»Žç¼“å­˜åˆ—è¡¨è¿”å›žæ—§å€¼ï¼Œè¿™æ ·è½¬æ¢å‡½æ•°å°±ä¸éœ€è¦å†æ¬¡è¿è¡Œäº†ã€‚ ç„¶åŽï¼Œå¦‚æžœæœ‰äººæ›´æ”¹box#3å±žæ€§ï¼Œè¿™å°†å¯¼è‡´ serializeBox é‡æ–°è®¡ç®—box#3çš„å€¼ã€‚è½¬æ¢å‡½æ•°å°†äº§ç”Ÿä¸€ä¸ªæ–°çš„box#3çš„Jsonå¯¹è±¡ï¼Œæ‰€æœ‰è®¢é˜…äº†è¿™ä¸ªè½¬æ¢å‡½æ•°çš„è§‚å¯Ÿè€…éƒ½å°†å†æ¬¡è¿è¡Œã€‚è¿™ä¸ªä¾‹å­ä¸­ serializeState ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚serializeStateå°†äº§ç”Ÿæ–°å€¼ï¼Œæ˜ å°„æ‰€æœ‰çš„boxçš„ã€‚é™¤äº†box#3ï¼Œå…¶ä»–æ‰€æœ‰boxçš„å€¼éƒ½å°†ä¼šä»Žç¼“å­˜åˆ—è¡¨è¿”å›žã€‚ æœ€åŽï¼Œå¦‚æžœbox#3ä»Ž store.boxes ä¸­ç§»é™¤ï¼ŒserializeState ä¹Ÿå°†é‡æ–°è®¡ç®—ã€‚serializeBox ä¸å†ç›‘å¬box#3ï¼Œç›‘å¬å®ƒçš„å“åº”å‡½æ•°ä¹Ÿå°†é€€åŒ–ä¸ºéžå“åº”æ¨¡å¼ã€‚serializeBox çš„ç¼“å­˜åˆ—è¡¨ä¸­ä¹Ÿå°†ç§»é™¤box#3çš„ç¼“å­˜ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸å¯å˜çš„çŠ¶æ€è·Ÿè¸ªæœ‰æ•ˆçš„å–å¾—äº†çŠ¶æ€å˜åŒ–åˆ—è¡¨,å…±äº«äº†æ•°æ®ç»“æž„ã€‚æ‰€æœ‰boxå’Œarrowéƒ½ä¼šè¢«è½¬åŒ–ä¸ºç®€å•çŠ¶æ€æ ‘ã€‚æ¯æ¬¡è®¡ç®—çš„éƒ½ä¼šç»™states ä¸­æ·»åŠ ä¸€æ¡æ–°çš„æ•°æ®ã€‚ä¸åŒçš„æ•°æ®ä¹‹é—´å°†å…±äº«boxå’Œarrowã€‚ å°†ä¸€ä¸ªæ•°æ®ç»“æž„è½¬æ¢ä¸ºä¸€ä¸ªå¯å“åº”çš„æ•°æ®ç»“æž„ è¿™æ®µå„¿æˆ‘éƒ½çœ‹æ‡µé€¼äº†â€¦â€¦çº¯å‡­æ„Ÿè§‰ç†è§£çš„â€¦â€¦ä¸‹é¢è´´ä¸ŠåŽŸæ–‡å¯¹æ¯”ç€çœ‹å§ Instead of returning plain values from a transformation function, it is also possible to return observable objects. This can be used to transform an observable data graph into a another observable data graph, which can be used to transformâ€¦ you get the idea. è½¬æ¢å‡½æ•°é™¤äº†å¯ä»¥è¿”å›žä¸€èˆ¬æ•°æ®ç±»åž‹ï¼Œè¿˜å¯ä»¥è¿”å›žè§‚æµ‹å¯¹è±¡ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨è½¬æ¢å‡½æ•°å®Œæˆå¯è§‚æµ‹å¯¹è±¡é—´çš„è½¬æ¢ã€‚ Here is a small example that encodes a reactive file explorer that will update its representation upon each change. Data graphs that are built this way will in general react a lot faster and will consist of much more straight-forward code, compared to derived data graph that are updated using your own code. See the performance tests for some examples. ä¸‹é¢æ˜¯ä¸ªè‡ªåŠ¨å“åº”çš„æ–‡ä»¶ç®¡ç†å™¨çš„ä¾‹å­ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼æž„å»ºçš„æ•°æ®ç»“æž„ï¼Œå½¢å¼ä¸Šæ›´åŠ ç®€å•ç›´æŽ¥ï¼Œæ•°æ®æ›´æ–°æ—¶å“åº”é€Ÿåº¦ä¹Ÿæ¯”ä¸€èˆ¬çš„æ–¹å¼å¿«çš„å¤šã€‚å¯ä»¥çœ‹ä¸€çœ‹è¿™äº›ä¾‹å­çš„æ€§èƒ½æµ‹è¯•ã€‚ Unlike the previous example, the transformFolder will only run once as long as a folder remains visible; the DisplayFolder objects track the associated Folder objects themselves. ä¸åƒä¹‹å‰çš„ä¾‹å­ï¼Œå¦‚æžœæ–‡ä»¶å¤¹ä¸€ç›´å¯è§ï¼Œé‚£ä¹ˆ transformFolder åªä¼šè¿è¡Œä¸€æ¬¡ï¼›DisplayFolder å¯¹è±¡ä¼šè¿½è¸ª Folder å¯¹è±¡çš„å˜åŒ–ã€‚ In the following example all mutations to the state graph will be processed automatically. Some examples: ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ‰€æœ‰å¯¹ state çš„æ”¹å˜éƒ½ä¼šè‡ªåŠ¨å¤„ç†ã€‚æ¯”å¦‚åšå¦‚ä¸‹æ“ä½œï¼š Changing the name of a folder will update itâ€™s own path property and the path property of all its descendants. æ”¹å˜æ–‡ä»¶å¤¹çš„åå­—å°†æ›´æ–°å®ƒå’Œå®ƒçš„å­æ–‡ä»¶å¤¹çš„æ–‡ä»¶è·¯å¾„ï¼Œ Collapsing a folder will remove all descendant DisplayFolders from the tree. æŠ˜å ä¸€ä¸ªæ–‡ä»¶å¤¹å°†ä¼šç§»é™¤æ‰€æœ‰å­æ–‡ä»¶å¤¹çš„DisplayFolderå®žä¾‹ Expanding a folder will restore them again. å±•å¼€æ–‡ä»¶å¤¹æ—¶ï¼Œå­æ–‡ä»¶å¤¹å†éƒ½æ¢å¤å›žæ¥ Setting a search filter will remove all nodes that do not match the filter, unless they have a descendant that matches the filter. å¦‚æžœè®¾ç½®äº†æœç´¢è¿‡æ»¤æ¡ä»¶ï¼Œå°†ä¼šåªä¿ç•™ç¬¦åˆæ¡ä»¶çš„å­æ–‡ä»¶å¤¹ï¼Œå…¶ä»–çš„éƒ½ä¼šç§»é™¤æŽ‰ã€‚â€¦â€¦ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import &#123;extendObservable, asFlat, observable, createTransformer, autorun&#125; from mobx;function Folder(parent, name) &#123; this.parent = parent; extendObservable(this, &#123; name: name, children: asFlat([]), &#125;);&#125;function DisplayFolder(folder, state) &#123; this.state = state; this.folder = folder; extendObservable(this, &#123; collapsed: false, name: function() &#123; return this.folder.name; &#125;, isVisible: function() &#123; return !this.state.filter || this.name.indexOf(this.state.filter) !== -1 || this.children.some(child =&gt; child.isVisible); &#125;, children: function() &#123; if (this.collapsed) return []; return this.folder.children.map(transformFolder).filter(function(child) &#123; return child.isVisible; &#125;) &#125;, path: function() &#123; return this.folder.parent === null ? this.name : transformFolder(this.folder.parent).path + "/" + this.name; &#125; &#125;);&#125;var state = observable(&#123; root: new Folder(null, "root"), filter: null, displayRoot: null&#125;);var transformFolder = createTransformer(function (folder) &#123; return new DisplayFolder(folder, state);&#125;);autorun(function() &#123; state.displayRoot = transformFolder(state.root);&#125;); exprexpr(worker: () =&gt; void) expr å¯ä»¥åœ¨è®¡ç®—å±žæ€§çš„å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„è®¡ç®—å±žæ€§ï¼Œå…¶å®žå°±æ˜¯computed(func).get()ã€‚ä½œè€…åœ¨æ–‡æ¡£ä¸­è¯´è®¾è®¡è¿™ä¸ªapiçš„æ„å›¾æ˜¯ä¸ºäº†æå‡è®¡ç®—å±žæ€§çš„æ€§èƒ½ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¦‚æžœä½¿ç”¨ expr æ›¿ä»£ç›´æŽ¥ç”¨æ¯”è¾ƒè¿ç®—ï¼Œå¯ä»¥åˆ©ç”¨è®¡ç®—å±žæ€§çš„ç¼“å­˜ï¼Œå‡å°‘è¿ç®—æ¬¡æ•°ã€‚ 1234const TodoView = observer((&#123;todo, editorState&#125;) =&gt; &#123; const isSelected = mobx.expr(() =&gt; editorState.selection === todo); return &lt;div className=&#123;isSelected ? "todo todo-selected" : "todo"&#125;&gt;&#123;todo.title&#125;&lt;/div&gt;;&#125;); extendObservableextendObservable(target: object, ...properties: object) åœ¨ä¹‹å‰çš„å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¤§æ¦‚è§è¿‡ extendObservable åº”ç”¨çš„å®žä¾‹äº†ã€‚ extendObservable å’Œ Object.assign ç±»ä¼¼ï¼ŒæŽ¥å—å¤šä¸ªå‚æ•°ï¼Œå°† properties ä¸Šæ‰€æœ‰çš„é”®å€¼å¯¹ï¼Œéƒ½åˆå¹¶åˆ° target ä¸Šï¼ŒåŒæ—¶æŠŠå®ƒä»¬éƒ½è½¬æ¢æˆå¯è§‚æµ‹çš„å±žæ€§ã€‚ å¦‚æžœå±žæ€§å€¼æ˜¯ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å‡½æ•°ï¼Œé‚£ extendObservable å°†ç”¨ computed æŠŠå®ƒè½¬åŒ–ä¸ºä¸€ä¸ªè®¡ç®—å±žæ€§ã€‚ æ‰€ä»¥ï¼Œobservable(object) å…¶å®žæ˜¯ extendObservable(object, object)çš„åˆ«åã€‚ 1234567891011121314var Person = function(firstName, lastName) &#123; // åœ¨å½“å‰å®žä¾‹ä¸ºè§‚æµ‹å¯¹è±¡ extendObservable(this, &#123; firstName: firstName, lastName: lastName &#125;);&#125;var matthew = new Person("Zheng", "Xingcheng");// å‘è§‚æµ‹å¯¹è±¡ä¸Šæ·»åŠ å±žæ€§extendObservable(matthew, &#123; age: 30&#125;); isObservableisObservable(testValue:object, propertyName?: string) isObservable æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯ç”¨observableè§‚æµ‹å¯¹è±¡çš„ï¼Œå¦‚æžœæ˜¯å°±ä¼šè¿”å›žtrueï¼Œå¦‚æžœæƒ³çœ‹å˜é‡çš„æŸä¸ªå±žæ€§æ˜¯å¦å¯è§‚æµ‹ï¼Œç›´æŽ¥ä¼ å…¥å±žæ€§çš„å¼•ç”¨æ˜¯ä¸è¡Œçš„ï¼Œéœ€è¦ä¼ ç¬¬äºŒä¸ªå‚æ•° propertyName æŒ‡å®šè¦åˆ¤æ–­å“ªä¸ªå±žæ€§ï¼Œå¦‚æžœå±žæ€§å¯è§‚æµ‹ï¼Œå°±è¿”å›žtrue 1234567891011var person = observable(&#123; firstName: "Zheng", lastName: "Xingcheng"&#125;);person.age = 30;console.log(isObservable(person)); // trueconsole.log(isObservable(person, "firstName")); // trueconsole.log(isObservable(person.firstName)); // false (just a string)console.log(isObservable(person, "age")); // false ä¸ºäº†ç»†åŒ–å„ç§ç±»åž‹çš„åˆ¤æ–­ï¼Œmobxè¿˜æä¾›äº†mapï¼Œarrayï¼Œobjectä¸‰ç§ç±»åž‹çš„åˆ¤æ–­ï¼Œæ¯”èµ· isObservable ï¼Œä»–ä»¬çš„åˆ¤æ–­æ ‡å‡†æ›´ä¸¥æ ¼ï¼Œå¦‚æžœç±»åž‹ä¸ç¬¦åˆå°±ä¼šè¿”å›žfalseã€‚ isObservableMapisObservableMap(testValue:object) å¦‚æžœtestValueæ˜¯ç”¨ mobx.map åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™è¿”å›žtrueã€‚ isObservableArrayisObservableArray(testValue:object) å¦‚æžœtestValueæ˜¯ç”¨ mobx.observable(array) åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™è¿”å›žtrueã€‚ isObservableObjectisObservableObject(testValue:object) å¦‚æžœtestValueæ˜¯ç”¨ mobx.observable(object) åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™è¿”å›žtrueã€‚ 12345678910var testValue = observable(&#123; arr: [1, 2, 3], obj: &#123; x: 1 &#125;, map: map([['y',2]])&#125;);console.log(isObservableMap(testValue.map)); // trueconsole.log(isObservableArray(testValue.arr)); // trueconsole.log(isObservableObject(testValue.obj)); // true modifiersintercept &amp; observereactionspyspy(listener) spy å¯ä»¥æ³¨å†Œä¸€ä¸ªå…¨å±€çš„ç›‘å¬å‡½æ•°ï¼Œç›‘å¬æ‰€æœ‰çš„mobxå‘å‡ºçš„äº‹ä»¶ï¼Œé€šå¸¸æ˜¯ç”¨æ¥åšlogæˆ–è€…åšè°ƒè¯•çš„ã€‚ æ¯”å¦‚ä»¥ä¸‹ä¾‹å­ï¼Œä¼šæ‰“å°æ‰€æœ‰çš„actionï¼š 12345spy((event) =&gt; &#123; if (event.type === 'action') &#123; console.log(`$&#123;event.name&#125; with args: $&#123;event.arguments&#125;`) &#125;&#125;) ä¸åŒçš„æ“ä½œï¼Œeventä¹Ÿä¼šä¸ä¸€æ ·ï¼Œä¸‹é¢çš„è¡¨æ ¼æ˜¯æ¯ç§äº‹ä»¶å¯¹åº”çš„å‚æ•°ï¼š event eventå¸¦çš„å±žæ€§ æ˜¯å¦å¯ä»¥åµŒå¥—å‘ç”Ÿ action name, target (scope), arguments, fn (source function of the action) yes transaction name, target (scope) yes scheduled-reaction object (Reaction instance) no reaction object (Reaction instance), fn (source of the reaction) yes compute object (ComputedValue instance), target (scope), fn (source) no error message no update (array) object (the array), index, newValue, oldValue yes update (map) object (observable map instance), name, newValue, oldValue yes update (object) object (instance), name, newValue, oldValue yes splice (array) object (the array), index, added, removed, addedCount, removedCount yes add (map) object, name, newValue yes add (object) object, name, newValue yes delete (map) object, name, oldValue yes create (boxed observable) object (ObservableValue instance), newValue yes toJStoJS(value: any, supportCycles?=true: boolean) toJSå¯ä»¥å°†ä¸€ä¸ªobservableObjectä¸‹çš„è½¬åŒ–ä¸ºjavascriptåŽŸç”Ÿçš„å¯¹è±¡ã€‚ä»–ä¼šé€’å½’è½¬æ¢arrayï¼Œobjectï¼Œmapå’ŒåŸºç¡€ç±»åž‹çš„å€¼ï¼Œä½†æ˜¯ä¸ä¼šè½¬æ¢è®¡ç®—å±žæ€§å’Œå…¶ä»–ä¸å¯æžšä¸¾çš„å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒtoJSä¼šç¼“å­˜ä¸‹æ¯æ¬¡è¿è¡Œçš„å€¼ï¼Œè²Œä¼¼ä½œè€…è®¾è®¡è¿™ä¸ªapiå°±æ˜¯ä¸ºäº†è¾“å‡ºlogç”¨çš„ï¼Œå¯ä»¥è®¾ç½® supportCycles å‚æ•°ä¸ºfalseæ¥æé«˜toJSçš„æ€§èƒ½ã€‚ å¯¹äºŽæ›´å¤æ‚çš„åºåˆ—åŒ–ååºåˆ—åŒ–åœºæ™¯ï¼Œmobxçš„ä½œè€…æŽ¨èä½¿ç”¨ä»–å¼€å‘çš„serializråº“ã€‚ transactiontransaction(worker: () =&gt; void) åœ¨ä¹‹å‰çš„ autorunAsync æœ‰æåˆ°è¿‡ï¼Œé™¤äº† autorunAsync ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ transaction æ¥åšæ‰¹é‡å¤„ç†ã€‚ transaction ç”¨æ¥æ‰¹å¤„ç†ä¸€ç³»åˆ—çš„æ›´æ–°ï¼Œè€Œä¸ä¼šé€šçŸ¥è§‚æµ‹å¯¹è±¡ï¼Œå½“æ‰€æœ‰æ›´æ–°ç»“æŸï¼Œæ‰ä¼šå‘å‡ºé€šçŸ¥ã€‚transaction æŽ¥æ”¶ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„workerå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæˆä¹‹å‰ï¼Œä¸ä¼šé€šçŸ¥è§‚å¯Ÿè€…ã€‚transaction çš„è¿”å›žå€¼å°±æ˜¯workerå‡½æ•°çš„è¿”å›žå€¼ã€‚å¦å¤– transaction æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥è¢«åµŒå¥—ï¼Œåªæœ‰æœ€å¤–å±‚çš„ transaction æ‰§è¡Œå®Œï¼Œæ‰ä¼šè§¦å‘å“åº”ã€‚ 123456789101112131415import &#123;observable, transaction, autorun&#125; from "mobx";const numbers = observable([]);autorun(() =&gt; console.log(numbers.length, "numbers!"));// Prints: '0 numbers!'transaction(() =&gt; &#123; transaction(() =&gt; &#123; numbers.push(1); numbers.push(2); &#125;); numbers.push(3);&#125;);// Prints: '3 numbers!' untrackeduntracked(fn: () =&gt; void) ä½¿ç”¨ untracked å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸è¢«è§‚æµ‹çš„ä»£ç å—ï¼Œé€šå¸¸ untracked éœ€è¦æ”¾åœ¨ (@)action é‡Œé¢æ‰æœ‰æ„ä¹‰ï¼Œæ¯”å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼š 123456789101112131415161718192021const person = observable(&#123; firstName: "Michel", lastName: "Weststrate"&#125;);autorun(() =&gt; &#123; console.log( person.lastName, ",", // person.firstNameæ”¾åœ¨äº†untrackedçš„å›žè°ƒé‡Œé¢ï¼Œæ‰€ä»¥ä¸ä¼šè·Ÿè¿™ä¸ªautorunçš„ç›‘å¬å‡½æ•°ç»‘å®šåˆ°ä¸€èµ· // åœ¨ä¿®æ”¹person.firstNameæ—¶å°±ä¸ä¼šè§¦å‘è¿™ä¸ªç›‘å¬å‡½æ•° untracked(() =&gt; person.firstName) );&#125;);// prints: Weststrate, Michelperson.firstName = "G.K.";// doesn't print!person.lastName = "Chesterton";// prints: Chesterton, G.K. whenwhen(debugName?, predicate: () =&gt; boolean, effect: () =&gt; void, scope?) when ä¼šæ„Ÿæµ‹å¹¶è¿è¡Œå‚æ•°predicateï¼Œpredicateæœ‰ç‚¹ç±»ä¼¼ä¸€ä¸ªè®¡ç®—å±žæ€§ï¼Œå½“predicateä¸ºtrueçš„æ—¶å€™ï¼Œåˆ™è‡ªåŠ¨è¿è¡Œeffectï¼Œç„¶åŽé”€æ¯è‡ªå·±ã€‚æ‰€ä»¥ when æ˜¯ä¸€ä¸ªåªè¿è¡Œä¸€æ¬¡çš„ autorunã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ç”¨ when æ¥å®žçŽ°è‡ªåŠ¨é”€æ¯ç»„ä»¶çš„åŠŸèƒ½ï¼š 123456789101112131415161718class MyResource &#123; constructor() &#123; when( // å½“æ–­è¨€ä¸ºçœŸ... () =&gt; !this.isVisible, // ... åˆ™è¿è¡Œä¸€æ¬¡ç„¶åŽé”€æ¯ () =&gt; this.dispose() ); &#125; @computed get isVisible() &#123; // è¿”å›žç»„ä»¶æ˜¯å¦å¯è§ &#125; dispose() &#123; // é”€æ¯ç»„ä»¶ &#125;&#125; æ€»ç»“æœ¬ç¯‡æ•´ç†äº†ä¸‹mobxçš„å…¬å…±æ–¹æ³•å’Œä½œç”¨ã€‚å°±æ­¤ï¼ŒåŸºç¡€apiç®—æ˜¯éƒ½ä»‹ç»å®Œäº†ã€‚ä¹‹åŽä¼šå†ç€é‡å†™äº›ä½¿ç”¨æ–¹æ³•å’Œä»‹ç»mobxåŽŸç†çš„å†…å®¹ã€‚ è¯è¯´æœ€è¿‘æ‡’ç™Œåˆå¼€å§‹å‘ä½œäº†â€¦â€¦_(:3 ã€âˆ )_â€¦â€¦çœ‹ç€æœ‹å‹ä»¬è·Ÿæ‰“äº†é¸¡è¡€ä¸€æ ·å†™é‚£ä¹ˆå¤šblogå¥½ç€æ€¥çš„è¯´â€¦â€¦å¸Œæœ›ä»¥åŽèƒ½è¿Žå¤´èµ¶ä¸Šå§â€¦â€¦]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MobXå…¥å‘æŒ‡å—(3) -- Observable Types]]></title>
      <url>%2F2016%2F12%2F09%2FMobX-simple-entry-3%2F</url>
      <content type="text"><![CDATA[è¿™å‘¨é˜…è¯»äº†ä¸€éƒ¨åˆ†mobxçš„æºç ï¼Œå’Œä½œè€…å†™çš„å‡ ç¯‡ä»‹ç»æ–‡ç« ï¼Œå‘çŽ°è¿™ä¸ªåº“æœ‰äº›ç‰¹æ€§è¿˜æŒºæœ‰è¶£çš„ã€‚ä»¥ä¸‹çš„å†…å®¹å¤§éƒ¨åˆ†ç¿»è¯‘è‡ªmobxæ–‡æ¡£ä¸­ Observable Types ä¸€èŠ‚ï¼Œå¥ˆä½•å°ç”Ÿè‹±æ–‡æ°´å¹³æœ‰é™ï¼Œæ²¡æœ‰åˆ’è¯è½¯ä»¶å¸®å¿™å°±çœ‹ä¸æ‡‚å¥å­â€¦â€¦æ‰€ä»¥ç¿»çš„å¾ˆæ¸£ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æŽºæ‚äº†ä¸€äº›æˆ‘çš„ç†è§£åœ¨é‡Œè¾¹ï¼Œè¿žè’™å¸¦çŒœæ‹¼å‡ºæ¥çš„ï¼Œæœ‰å•¥å†™çš„ä¸å¯¹çš„ï¼Œä¹Ÿè¯·å¤šæŒ‡æ•™äº†~(ï¿£â–½ï¿£)~* åœ¨mobxä¸­ï¼Œå¦‚æžœä½ æƒ³ç›‘å¬æŸä¸ªå˜é‡çš„å˜åŒ–ï¼Œéœ€è¦å…ˆä½¿ç”¨ observable å‡½æ•°å°†å…¶è½¬åŒ–ä¸ºç”ŸæˆObservableå¯¹è±¡æ‰è¡Œã€‚è¿™ä¸ªç« èŠ‚ä¸»è¦è®²çš„æ˜¯ observable å‡½æ•°ç”Ÿæˆçš„ä¸åŒObservableå¯¹è±¡ Observable Objectså½“ observable å‡½æ•°æŽ¥å—çš„å‚æ•°æ˜¯ä¸ªæ™®é€šçš„javascript objectï¼ˆæ™®é€šjavascriptå¯¹è±¡æ˜¯æŒ‡ä¸æ˜¯é€šè¿‡æž„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡ï¼Œmobxçš„åˆ¤æ–­æ–¹å¼æ˜¯ï¼Œé€šè¿‡getPrototypeOfèŽ·å–åŽŸåž‹ï¼Œæ£€æŸ¥æ˜¯ä¸æ˜¯Object.prototypeæˆ–è€…nullï¼‰æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰å±žæ€§éƒ½å°†è¢«ä¼ å…¥ observable å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¦‚æžœå±žæ€§å€¼æ˜¯objectæˆ–è€…arrayï¼Œåˆ™ä¼šé€’å½’çš„è½¬åŒ–å†…éƒ¨çš„å…ƒç´ ã€‚ 123456789101112131415161718192021222324252627282930313233import &#123;observable, autorun, action&#125; from "mobx";var person = observable(&#123; // å¸¸é‡ä¼šè‡ªåŠ¨ä½¿ç”¨observableè½¬åŒ–: name: "John", age: 42, showAge: false, // æœ‰getæè¿°ç¬¦çš„å±žæ€§ä¼šè‡ªåŠ¨ä½¿ç”¨computedè½¬åŒ–: get labelText() &#123; return this.showAge ? `$&#123;this.name&#125; (age: $&#123;this.age&#125;)` : this.name; &#125;, // å¦‚æžœç›´æŽ¥å†™ // labelText: function () &#123; // return this.showAge ? `$&#123;this.name&#125; (age: $&#123;this.age&#125;)` : this.name; // &#125; // åœ¨è‡ªåŠ¨è½¬åŒ–æ—¶ä¼šæŠ¥ä¸€ä¸ªwarningï¼Œmobxè®¤ä¸ºæ¸²æŸ“å‡½æ•°éœ€è¦ç”¨computedæ˜¾å¼è°ƒåŠ¨ä¸€ä¸‹ // labelText: computed(function () &#123; // return this.showAge ? `$&#123;this.name&#125; (age: $&#123;this.age&#125;)` : this.name; // &#125;) // åŒç†ï¼Œactionä¹Ÿéœ€è¦æ˜¾å¼è°ƒåŠ¨ä¸€ä¸‹: setAge: action(function(age) &#123; this.age = age; &#125;)&#125;);autorun(() =&gt; console.log(person.labelText));person.name = "Dave";// 'Dave'person.setAge(21);console.log(person.age);// 21 éœ€è¦æ³¨æ„çš„ç‚¹ï¼š å½“å¯¹è±¡ä¼ å…¥ observable å‡½æ•°æ—¶ï¼Œåªæœ‰å½“æ—¶å¯¹è±¡ä¸Šå·²ç»å­˜åœ¨çš„å±žæ€§æ‰èƒ½è¢«ç›‘å¬ï¼ŒåŽæ·»åŠ çš„å±žæ€§æ˜¯ä¸èƒ½çš„ï¼Œå¦‚æžœæƒ³è¦å¾€å·²ç»ç”Ÿæˆçš„Observableå¯¹è±¡ä¸Šæ·»åŠ å±žæ€§ï¼Œéœ€è¦ä½¿ç”¨extendObservableå‡½æ•°è¿›è¡Œç±»ä¼¼mergeçš„æ“ä½œã€‚ 123456//æŽ¥ä¸Šé¢çš„ä¾‹å­extendObservable(person, &#123; sex: 'male'&#125;);console.log(person.sex);// 'male' åªæœ‰æ™®é€šå¯¹è±¡èƒ½å¤Ÿè¢«è½¬åŒ–ä¸ºObservableå¯¹è±¡ã€‚ä½¿ç”¨æž„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œéœ€è¦åœ¨æž„é€ å‡½æ•°åˆå§‹åŒ–æ—¶ä½¿ç”¨extendObservableå‡½æ•°åˆå¹¶å±žæ€§ã€‚ä½¿ç”¨ç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ @observableè£…é¥°å™¨åŒ…è£…ç±»çš„å±žæ€§ã€‚ 123456789101112131415161718192021var Person = function(firstName, lastName) &#123; // åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡é‡Œå†™è¦ç›‘å¬çš„å±žæ€§ï¼Œç„¶åŽmergeå’Œå½“å‰å®žä¾‹merge extendObservable(this, &#123; firstName: firstName, lastName: lastName &#125;);&#125;var zxc = new Person("Zheng", "Xingcheng");// æˆ–è€…class Person &#123; @observable firstName:string = ""; @observable lastName:string = ""; constructor(firstName, lastName) &#123; this.firstName = firstName; this.lastName = lastName; &#125;&#125;var zxc = new Person("Zheng", "Xingcheng"); å¸¦æœ‰getæè¿°ç¬¦çš„å±žæ€§ä¼šè‡ªåŠ¨è¢«@computedè½¬åŒ–ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­å·²ç»å±•ç¤ºäº†ã€‚ å¦‚æžœå¯¹è±¡çš„å±žæ€§å€¼æ˜¯ä¸€ä¸ªæž„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡ï¼ˆæˆ‘çœŸæ˜¯ä¸æƒ³æŠŠå®ƒå«æˆâ€éžæ™®é€šå¯¹è±¡â€â€¦â€¦ï¼‰ï¼Œé‚£è¿™ä¸ªå±žæ€§ä¹Ÿä¸ä¼šè¢« observable å‡½æ•°è‡ªåŠ¨è½¬åŒ–ã€‚ åŸºæœ¬ä¸Šä½¿ç”¨observable å‡½æ•°è‡ªåŠ¨è½¬åŒ–å·²ç»èƒ½è§£å†³ç»å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯äº†ï¼ˆåŽŸæ–‡å†™çš„æ˜¯â€95% of the casesâ€â€¦â€¦ï¼‰ã€‚å¦‚æžœæƒ³è¦äº†è§£æ›´è¯¦ç»†çš„è®¾å®šæ¯ä¸ªå±žæ€§çš„æ–¹æ³•ï¼Œè¯·çœ‹ modifiers ä¸€ç« ï¼ˆæœ¬æ¥è¿™ä¸€ç« çš„å†…å®¹ä¹Ÿæƒ³å‘åˆ°è¿™é‡Œçš„ï¼Œä½†æ˜¯å®žåœ¨æ˜¯æ²¡æ—¶é—´å†™äº†åªèƒ½æ‹‰å€’â€¦â€¦ç­‰ä¸‹æ¬¡å§ï¼‰ã€‚ Observable Arrayså’Œ object ç±»ä¼¼ï¼Œarray ä¹Ÿå¯ä»¥ä½¿ç”¨ observableå‡½æ•°è½¬åŒ–ä¸ºObservableArrayå¯¹è±¡ã€‚å½“ç„¶ï¼Œä¹Ÿæ˜¯é€’å½’è½¬åŒ–æ¯ä¸ªå…ƒç´ çš„ï¼Œæ‰€ä»¥æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ä¹Ÿä¼šè¢«è½¬åŒ–ã€‚ 123456789101112131415161718192021222324import &#123;observable, autorun&#125; from "mobx";var todos = observable([ &#123; title: "åƒåˆé¥­", completed: true &#125;, &#123; title: "å–å’–å•¡", completed: false &#125;]);autorun(() =&gt; &#123; console.log("ä»£åŠž:", todos .filter(todo =&gt; !todo.completed) .map(todo =&gt; todo.title) .join(", ") );&#125;);// 'ä»£åŠž: å–å’–å•¡'todos[0].completed = false;// 'ä»£åŠž: åƒåˆé¥­, å–å’–å•¡'todos[2] = &#123; title: "ç¡åˆè§‰", completed: false &#125;;// 'ä»£åŠž: åƒåˆé¥­, å–å’–å•¡, ç¡åˆè§‰'todos.shift();// 'ä»£åŠž: å–å’–å•¡, ç¡åˆè§‰' ç”±äºŽES5ä¸­åŽŸç”Ÿæ•°ç»„çš„é™åˆ¶ï¼ˆarray.observeåˆ°ES7ä¸­æ‰æœ‰ï¼Œè€Œä¸”æ•°ç»„ä¸èƒ½æ‰©å±•ï¼‰ï¼Œobservableå‡½æ•°åŸºäºŽåŽŸå§‹æ•°ç»„å…‹éš†äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¿™ä¸ªæ–°æ•°ç»„æ”¯æŒæ‰€æœ‰åŽŸç”Ÿæ•°ç»„çš„æ–¹æ³•å’ŒåŠŸèƒ½ï¼ŒåŒæ—¶è¿˜æœ‰ç›‘å¬å€¼å˜åŒ–çš„èƒ½åŠ›ã€‚ ä¸è¿‡ï¼Œå½“ä½¿ç”¨Array.isArrayæ£€æŸ¥åŒ…è£…åŽæ•°ç»„æ—¶è¿”å›žçš„æ˜¯falseã€‚æ‰€ä»¥åœ¨è·Ÿå…¶ä»–åº“è”åˆä½¿ç”¨æ—¶ï¼Œå¦‚æžœæƒ³æŠŠObservableArrayå¯¹è±¡å½“åšæ•°ç»„ä¼ é€’ç»™å…¶ä»–åº“ï¼Œæœ€å¥½ä½¿ç”¨æµ…æ‹·è´ç”Ÿæˆæ–°æ•°ç»„ï¼Œæˆ–è€…ä½¿ç”¨ array.slice æ–¹æ³•ç”Ÿæˆæ–°æ•°ç»„ï¼Œå°±æ˜¯è¯´ Array.isArray(observable([]).slice()) è¿”å›žçš„æ˜¯trueã€‚ ç”±äºŽä¸å–œæ¬¢åŽŸç”Ÿçš„ array.sort å’Œ array.reverse æ–¹æ³•ï¼ŒObservableArrayå¯¹è±¡çš„ sort å’Œ reverse æ–¹æ³•æ˜¯å¹¶ä¸ä¼šæ”¹å˜è‡ªèº«çš„ï¼Œè€Œæ˜¯è¿”å›žä¸€ä¸ªæ–°çš„ObservableArrayå¯¹è±¡ã€‚ é™¤äº†åŽŸç”Ÿæ•°ç»„æ”¯æŒçš„æ–¹æ³•ï¼ŒObservableArrayå¯¹è±¡è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼š intercept(interceptor)è¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨æ‰€æœ‰æ•°ç»„çš„æ“ä½œè¢«åº”ç”¨ä¹‹å‰ï¼Œå°†æ“ä½œæ‹¦æˆªã€‚å…·ä½“çš„è¯·çœ‹observe &amp; intercept observe(listener, fireImmediately? = false)è¿™ä¸ªæ–¹æ³•å¯ä»¥ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œå›žè°ƒå‡½æ•°ä¼šæŽ¥æ”¶æ•°ç»„æ–°å¢žæˆ–è€…ä¿®æ”¹çš„å…ƒç´ ï¼Œç¬¦åˆES7çš„è§„èŒƒã€‚è¿™ä¸ªæ–¹æ³•è¿”å›žä¸€ä¸ªæ³¨é”€å‡½æ•°ç”¨æ¥åœæ­¢ç›‘å¬ã€‚ clear()æ¸…ç©ºæ•°ç»„ã€‚ replace(newItems)æ›¿æ¢æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ã€‚ find(predicate: (item, index, array) =&gt; boolean, thisArg?, fromIndex?)ä½¿ç”¨æ–¹æ³•ä¸ŽES7çš„ array.find ä¸€è‡´ï¼Œä½†æ˜¯å¢žåŠ äº†formIndexå‚æ•°ã€‚ remove(value)ç§»é™¤æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå€¼ç­‰äºŽvalueçš„å…ƒç´ ï¼Œå¦‚æžœç§»é™¤æˆåŠŸä¼šè¿”å›žtrueã€‚ peek()ä¸Ž slice ç±»ä¼¼ï¼Œä¼šè¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚å®ƒä¸Ž slice çš„åŒºåˆ«åœ¨äºŽ peek ä¸ä¼šè¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼Œæ‰€ä»¥æ€§èƒ½æ›´å¥½ã€‚ Observable Mapsobservable(asMap(values?, modifier?)) å’Œ map(values?, modifier?)) æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªObservableMapå¯¹è±¡ã€‚å¦‚æžœä½ ä¸æƒ³å“åº”ç‰¹å®šå±žæ€§çš„å˜åŒ–ï¼Œè¿˜è¦æ·»åŠ åˆ é™¤å±žæ€§ï¼Œé‚£ä¹ˆä½¿ç”¨ObservableMapå¯¹è±¡å¾ˆåˆé€‚ã€‚ä¸åŒäºŽES6çš„Mapå¯¹è±¡ï¼ŒObservableMapå¯¹è±¡æ˜¯èƒ½ç”¨å­—ç¬¦ä¸²å½“åškeyã€‚ æ ¹æ®ES6 Mapçš„è§„èŒƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•: has(key)è¿”å›žmapä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªkeyï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¯è¢«ç›‘å¬çš„ set(key, value)è®¾ç½®keyå¯¹åº”çš„valueï¼Œå¦‚æžœkeyä¹‹å‰ä¸é”™åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªkeyä¼šè¢«æ·»åŠ ä¸Š delete(key)åˆ é™¤keyå’Œkeyå¯¹åº”çš„value get(key)èŽ·å–keyå¯¹åº”çš„valueï¼Œå¦‚æžœæ²¡æ‰¾åˆ°ä¼šè¿”å›žundefined keys()èŽ·å–mapçš„æ‰€æœ‰keyï¼Œé¡ºåºä¸ºkeyçš„æ’å…¥é¡ºåº values()èŽ·å–mapçš„æ‰€æœ‰keyå¯¹åº”çš„valueï¼Œé¡ºåºä¸ºkeyçš„æ’å…¥é¡ºåº entries()è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºmapä¸­çš„key/valueå¯¹ï¼Œå½¢å¼å¦‚[key, value]ï¼Œé¡ºåºä¸ºkeyçš„æ’å…¥é¡ºåº forEach(callback:(value, key, map) =&gt; void, thisArg?)å¯¹mapä¸­çš„æ¯ä¸ªkey/valueå¯¹è°ƒç”¨å›žè°ƒ clear()æ¸…é™¤mapä¸­çš„æ‰€æœ‰key/valueå¯¹ size()è¿”å›žmapä¸­æ‰€æœ‰key/valueå¯¹çš„æ•°é‡ ObservableMapå¯¹è±¡è¿˜æä¾›äº†ä»¥ä¸‹æ–¹æ³•å¯ä»¥ä½¿ç”¨: toJS()è¿”å›žä¸€ä¸ªmapçš„æµ…æ‹·è´çš„å¯¹è±¡ï¼Œå¦‚æžœæƒ³èŽ·å¾—æ·±æ‹·è´çš„å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ mobx.toJS(map) intercept(interceptor)æ³¨å†Œä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨ä¼šåœ¨mapè¢«ä¿®æ”¹ä¹‹å‰è¢«è§¦å‘ã€‚å…·ä½“çš„è¯·çœ‹observe &amp; intercept observe(listener, fireImmediately?)æ³¨å†Œä¸€ä¸ªç›‘å¬ï¼Œmapè¢«ä¿®æ”¹æ—¶ä¼šè¢«è§¦å‘ã€‚ä¸ŽObject.observeç±»ä¼¼ã€‚å…·ä½“çš„è¯·çœ‹observe &amp; intercept merge(object | map)å°†å¯¹è±¡ä¸Šæ‰€æœ‰çš„å±žæ€§æ‹·è´åˆ°å½“å‰mapä¸­ Primitive (å¸¸é‡ï¼‰åœ¨javascriptä¸­ï¼Œå¸¸é‡æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡åŠžæ³•è§‚æµ‹ã€‚æ‰€ä»¥å¦‚æžœæƒ³è¦ç›‘å¬ä¸€ä¸ªå¸¸é‡å±žæ€§çš„å˜åŒ–ï¼Œéœ€è¦ä½¿ç”¨ observable å‡½æ•°åŒ…è£…ä¸€ä¸‹ã€‚ observable å‡½æ•°åŒ…è£…åŽä¼šè¿”å›žä¸€ä¸ªObservablePrimitiveå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä½¿ç”¨getå’Œsetæ–¹æ³•æ¥èŽ·å–å’Œæ”¹å˜å˜é‡çš„å€¼ã€‚å¯ä»¥ä½¿ç”¨ .observe æ–¹æ³•æ¥ç›‘å¬å€¼çš„å˜åŒ–ã€‚ä¸è¿‡é€šå¸¸ä½¿ç”¨ mobx.autorun æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ ä»¥ä¸‹æ˜¯ObservablePrimitiveæ”¯æŒçš„æ–¹æ³•ï¼š get()è¿”å›žå½“å‰å€¼ set(value)æ›¿æ¢å½“å‰å­˜å‚¨çš„å€¼ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨ intercept(interceptor)æ³¨å†Œæ‹¦æˆªå™¨ï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–å‰è§¦å‘ã€‚å…·ä½“çš„è¯·çœ‹observe &amp; intercept observe(callback: (newValue, previousValue) =&gt; void, fireImmediately = false)æ³¨å†Œç›‘å¬å™¨ï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œè¿”å›žä¸€ä¸ªæ³¨é”€å‡½æ•°ã€‚å…·ä½“çš„è¯·çœ‹observe &amp; intercept 12345678910111213import &#123;observable&#125; from "mobx";const cityName = observable("Vienna");console.log(cityName.get());// 'Vienna'cityName.observe(function(newCity, oldCity) &#123; console.log(oldCity, "-&gt;", newCity);&#125;);cityName.set("Amsterdam");// 'Vienna -&gt; Amsterdam' References (å¼•ç”¨ç±»åž‹ï¼‰ä¹‹å‰åœ¨ObservableObjectä¸­æåˆ°ï¼Œobservableåœ¨è½¬æ¢æ—¶ä¼šè‡ªåŠ¨ç”¨computedåŒ…è£…å‡½æ•°ï¼Œè¿™ä¸ªè‡ªåŠ¨è½¬æ¢å…¶å®žæ˜¯ç”±é™åˆ¶æ¡ä»¶çš„ã€‚mobxåªä¼šè½¬æ¢æ¸²æŸ“ç”¨çš„å‡½æ•°ï¼Œæ—¢å‡½æ•°ä¸èƒ½æŽ¥å—å‚æ•°ï¼Œå¦‚æžœæŽ¥å—å‚æ•°ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªæ˜¯ä¸€ä¸ªå¤åˆå‡½æ•°ï¼Œå°±ä¸ä¼šè‡ªåŠ¨è½¬åŒ–ã€‚åŒæ ·çš„ï¼Œå¦‚æžœå¯¹è±¡ä¸­æœ‰å±žæ€§æ˜¯é€šè¿‡æž„é€ å‡½æ•°æˆ–è€…ç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨è½¬åŒ–ã€‚ä»–ä»¬éƒ½ç»§ç»­ä¿æŒç€è½¬åŒ–ä¹‹å‰çš„å¼•ç”¨ã€‚ æœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¼šæœ‰è¿™ä¸€ç±»çš„éœ€æ±‚ï¼Œè¦æ±‚å¯¹è±¡ä¸­æŸä¸ªå±žæ€§ä¸è¢«è‡ªåŠ¨è½¬åŒ–ã€‚å¯ä»¥ä½¿ç”¨ asReference æ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ã€‚ 12345678910111213141516var test = observable(&#123; x : 3, doubler: function() &#123; return this.x*2; &#125;, someFunc: asReference(function() &#123; return this.x; &#125;)&#125;);console.log(test.doubler);// 6console.log(test.someFunc);// function() &#123;// return this.x;// &#125; æ€»ç»“æ€»ä½“æ„Ÿè§‰ä¸Šï¼Œmobxçš„apiå’Œknockoutçš„apiå¾ˆåƒï¼Œä½†æ˜¯åœ¨å®žçŽ°åŽŸç†ä¸Šï¼Œæ›´åƒrxã€‚mobxå®žçŽ°ç›‘å¬å˜åŒ–è°ƒç”¨å›žè°ƒçš„è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å°±èƒ½ä¼šè‡ªåŠ¨çš„åˆ†æžå„ä¸ªå˜é‡é—´çš„è°ƒç”¨å…³ç³»ï¼Œä»Žè€Œå‡å°‘é‡å¤è®¢é˜…çš„æƒ…å†µã€‚åŒæ—¶è®¡ç®—æœ€æ–°çš„å€¼æ—¶è¿˜æ˜¯ç”¨äº†memoizingæŠ€æœ¯ï¼Œè¿™æ ·å°±ç®—è°ƒç”¨é¢‘ç¹ï¼Œæ€§èƒ½ä¸Šä¹Ÿèƒ½å¾—åˆ°ä¿è¯ã€‚ ç›¸å…³æ–‡ç«  Observable Objects Observable Arrays Observable Maps Primitive values and references]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MobXå…¥å‘æŒ‡å—(2) -- action]]></title>
      <url>%2F2016%2F11%2F29%2FMobX-simple-entry-2%2F</url>
      <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ç®€å•ä»‹ç»äº†ä¸‹mobxå¸¸ç”¨çš„å‡ ä¸ªapi(observableã€computedã€autorun)ï¼Œä»¥åŠmobx-reactçš„api(observer)ã€‚è¿™æ¬¡è¯´è¯´actionã€‚ actionç”¨æ³•ï¼š action(fn) action(name, fn) @action classMethod @action(name) classMethod @action boundClassMethod = (args) =&gt; { body } @action(name) boundClassMethod = (args) =&gt; { body } ä¹‹å‰çš„ä¾‹å­é‡Œä½¿ç”¨äº†å›žè°ƒçš„æ–¹å¼æ¥è§¦å‘å“åº”ï¼Œmobxå…¶å®žä¹Ÿæ”¯æŒä½¿ç”¨fluxçš„æ–¹å¼æ¥å‡ºå‘å“åº”ï¼Œå¹¶ä¸”åœ¨2.2ç‰ˆæœ¬æä¾›äº†actionçš„åŠŸèƒ½ã€‚ actionæ˜¯ä¸€ä¸ªå·¥åŽ‚å‡½æ•°ï¼Œå¯ä»¥æŽ¥å—nameå’Œfnä¸¤ä¸ªå‚æ•°ï¼Œnameæ˜¯Stringï¼Œä¸»è¦æè¿°actionçš„ä½œç”¨ï¼Œfnæ˜¯Functionï¼Œæ˜¯è¿™ä¸ªactionçš„å…·ä½“é€»è¾‘ã€‚actionæ‰§è¡ŒåŽè¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å°±ä¼šæ‰§è¡Œactionï¼Œå…¶å®žå°±æ˜¯è°ƒç”¨fnå‚æ•°ã€‚ ä¸ªäººæ„Ÿè§‰åœ¨mobxä¸­ï¼Œactionçš„ä½œç”¨æ›´å¤šçš„æ˜¯ç”¨æ¥æ³¨é‡Šå½“å‰çš„æ“ä½œâ€¦â€¦ä½¿ç”¨çš„æ—¶å€™åœ¨nameå‚æ•°ä¸Šå†™æ“ä½œæ˜¯å¹²å•¥çš„ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„äº†è§£actionçš„æ„å›¾ã€‚å½“ç„¶å¦‚æžœå®‰è£…äº†devtoolsï¼Œactionè¿˜èƒ½è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœä½¿ç”¨useStrictapiå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå°±å¿…é¡»é€šè¿‡actionæ‰èƒ½ä¿®æ”¹çŠ¶æ€(state)ï¼Œç›´æŽ¥ä¿®æ”¹å€¼ä¼šæŠ¥é”™ã€‚ ä¸¾ä¸ªðŸŒ° 123456789101112131415161718192021222324import &#123;observable, useStrict, action, computed, autorun&#125; from 'mobx';useStrict(true);let numbers = observable([1,2,3]);let sum = computed(() =&gt; numbers.reduce((a, b) =&gt; a + b, 0));let disposer1 = autorun(() =&gt; console.log(`sum:$&#123;sum.get()&#125;`));// sum:6let disposer2 = autorun(() =&gt; console.log(`length:$&#123;numbers.length&#125;`));// length:3var pushNumber = action('push number',()=&gt;&#123; numbers.push(4)&#125;)pushNumber(4)// sum:10// length:4numbers.push(5)// Uncaught Error: [mobx] Invariant failed: It is not allowed to create// or change state outside an `action` when MobX is in strict mode. Wrap// the current method in `action` if this state change is intended. å¦å¤–ï¼Œactionåœ¨æ‰§è¡Œæ—¶æ˜¯å¯ä»¥æŽ¥å—å‚æ•°çš„ï¼Œè€Œä¸”actionåœ¨æ‰§è¡ŒåŽè¿˜ä¼šè¿”å›žfnå‚æ•°çš„è¿”å›žå€¼ï¼Œè¿™ä¸€ç‚¹æ–‡æ¡£é‡Œæ²¡æœ‰æ˜Žæ˜¾çš„è¯´æ˜Žï¼Œå®³çš„æˆ‘ç¿»æºç æ‰ç¿»å‡ºæ¥çš„â€¦â€¦â”‘(ï¿£Ð” ï¿£)â”â€¦â€¦è¯è¯´mobxæ˜¯ç”¨typescriptå†™çš„å‘¢ã€‚è™½ç„¶tsæœ€è¿‘å¾ˆç«ï¼Œè€Œä¸”åŠŸèƒ½ä¹Ÿç¡®å®žæŒºå®žç”¨çš„ï¼Œä½†æ˜¯æˆ‘å¯¹javaä¸€æ ·æ­»æ¿çš„è¯­æ³•å´æ€Žä¹ˆéƒ½éƒ½çˆ±ä¸èµ·æ¥â€¦â€¦æ‰€ä»¥æ›´çœ‹å¥½WebAssemblyä¸€äº›â€¦â€¦ æ‰¯è¿œäº†æ‰¯è¿œäº†â€¦â€¦é‚£ä¹ˆæˆ‘ä»¬å†æŠŠä¸Šé¢é‚£ä¸ªä¾‹å­ä¿®æ”¹ä¸€ä¸‹ï¼š 123456789101112131415161718import &#123;observable, useStrict, action, computed, autorun&#125; from 'mobx';useStrict(true);let numbers = observable([1,2,3]);let sum = computed(() =&gt; numbers.reduce((a, b) =&gt; a + b, 0));// sum:6let disposer = autorun(() =&gt; console.log(`sum:$&#123;sum.get()&#125;`));var pushNumber = action('push number',(number)=&gt;numbers.push(number))console.log(`length:$&#123;pushNumber(6)&#125;`)// sum:12// length:4console.log(`length:$&#123;pushNumber(7)&#125;`)// sum:19// length:5 ä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œä¼ å…¥pushNumberçš„å‚æ•°æœ€åŽè¢«ä¼ å…¥äº†actionçš„fnä¸­ï¼Œç„¶åŽpushNumberè¿”å›žäº†pushçš„è¿”å›žå€¼ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€ä¸ªä¾‹å­ä¹Ÿèƒ½çœ‹åˆ°è°ƒç”¨actionè¿”å›žå‡½æ•°æ—¶ä¼ é€’å‚æ•°çš„åº”ç”¨åœºæ™¯ï¼š 1234567891011121314151617@action createRandomContact() &#123; this.pendingRequestCount++; superagent .get('https://randomuser.me/api/') .set('Accept', 'application/json') .end(action("createRandomContact-callback", (error, results) =&gt; &#123; if (error) console.error(error); else &#123; const data = JSON.parse(results.text).results[0]; const contact = new Contact(this, data.dob, data.name, data.login.username, data.picture) contact.addTag('random-user'); this.contacts.push(contact); this.pendingRequestCount--; &#125; &#125;));&#125; åœ¨è¿™ä¸ªðŸŒ°ä¸­å¯ä»¥çœ‹åˆ°ï¼Œactionçš„è¿”å›žå€¼ä½œä¸ºsuperagent.endçš„å›žè°ƒï¼ŒæŽ¥æ”¶errorå’Œresultsä¸¤ä¸ªå‚æ•°ï¼Œæœ€åŽä¼ å…¥fnè¿›è¡Œå¤„ç†ã€‚è¿™ä¸ªä¾‹å­ä¹Ÿå¼•å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œactionä¸­å¦‚ä½•å¤„ç†ä¸€æ­¥æ“ä½œã€‚ async action å’Œ runInActionactionåªèƒ½å½±å“æ­£åœ¨è¿è¡Œçš„å‡½æ•°ï¼Œè€Œæ— æ³•å½±å“å½“å‰å‡½æ•°è°ƒç”¨çš„å¼‚æ­¥æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æžœfnä¸­æœ‰setTimeoutï¼Œpromise.thenï¼Œasyncå‡½æ•°ï¼Œå¹¶ä¸”è¿™äº›å‡½æ•°çš„å›žè°ƒé‡Œå¯¹stateè¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆè¿™äº›å›žè°ƒä¹Ÿåº”è¯¥ç”¨actionåŒ…è£…ä¸€ä¸‹ï¼ˆåœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œactionå’Œç›´æŽ¥ä¿®æ”¹stateå€¼éƒ½èƒ½ç”Ÿæ•ˆï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå‡ºçŽ°å¼‚å¸¸ï¼Œå¦‚æžœæ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹å°±ä¼šæŠ¥é”™ï¼‰ã€‚ è¿˜æœ‰ï¼Œå¦‚æžœè¦ä½¿ç”¨asyncå‡½æ•°ä½œä¸ºactionï¼Œä¸èƒ½ç›´æŽ¥ç”¨actionåŒ…è£…asyncå‡½æ•°ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªtrickyï¼Œå°†ä¸€ä¸ªasyncåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡æˆ–è€…å±žæ€§å†åšåŒ…è£…ã€‚ 12345678@action updateDocument = async () =&gt; &#123; const data = await fetchDataFromUrl(); /* required in strict mode to be allowed to update state: */ runInAction("update state after fetching data", () =&gt; &#123; this.data.replace(data); this.isSaving = true; &#125;)&#125; ä¸Šé¢çš„ä¾‹å­è¿˜ç”¨åˆ°äº†runInActionï¼Œå®ƒå…¶å®žå°±æ˜¯action(name,fn)()çš„è¯­æ³•ç³–ï¼Œè°ƒç”¨åŽactionä¼šç«‹å³æ‰§è¡Œï¼Œå®ƒçš„ç”¨æ³•æ˜¯ï¼šrunInAction(name?, fn, scope?)ï¼Œscopeæ˜¯fnè°ƒç”¨æ—¶çš„thisæŒ‡å‘ã€‚æ³¨ï¼š2.3.0ç‰ˆæœ¬ä»¥åŽæ‰èƒ½ä½¿ç”¨ã€‚ ç›¸å…³æ–‡ç«  MobX Documentation â€“ action]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Reactå…¨å®¶æ¡¶åˆå¡«æ–°æˆå‘˜ MobXå…¥å‘æŒ‡å—(1)]]></title>
      <url>%2F2016%2F11%2F23%2FMobX-simple-entry-1%2F</url>
      <content type="text"><![CDATA[è¯è¯´ï¼Œåæ§½è¢«reactå…¨å®¶æ¡¶å‘çš„æ–‡ç« å·²ç»ç®—æ˜¯å„å¤§è®ºå›ä¸Šçš„æœˆç»è´´äº†å§â€¦â€¦è¡Œå†…æ ·å¼ã€jsxé‡Œhtmlå’Œjsæ··æŽ’ã€ä¾èµ–å¤ªå¤šã€å­¦ä¹ æ›²çº¿é™¡å³­â€¦â€¦å½“ç„¶å…¶ä¸­ä¸ä¹æŠ±æ€¨reduxåäººç±»çš„â€¦â€¦ å½“ç„¶ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯æ¥é»‘reactä¸å¥½çš„ï¼Œæ¯•ç«Ÿä»¥åŽæ¶¨å·¥èµ„è¿˜å¾—é å®ƒå‘¢å“ˆå“ˆå“ˆ(ï¿£â–½ï¿£)â€¦â€¦ ä»Šå¤©å’±ä»¬è¦è¯´çš„æ˜¯ä¼—å¤šæ§½ç‚¹ä¹‹ä¸€ï¼Œâ€åäººç±»çš„reduxâ€å’Œå…¶æ›¿ä»£æ–¹æ¡ˆã€‚ reduxæœ‰ä»€ä¹ˆä¸å¥½ï¼Ÿé¦–å…ˆï¼Œreduxç»å¯¹æ˜¯ä¸ªä¼˜ç§€çš„åº“ã€‚å®ƒä½“å°ç²¾æ‚ï¼Œapiç®€å•ä¼˜é›…ï¼Œæ‰©å±•èƒ½åŠ›å¼ºï¼Œè¶³ä»¥è¡ç”Ÿå‡ºä¸°å¯Œçš„å·¥å…·é›†å’Œç”Ÿæ€ç³»ç»Ÿã€‚åœ¨å®ƒå‡ºçŽ°ä¹‹å‰ï¼Œå„ç§fluxå®žçŽ°è²Œä¼¼éƒ½ä¸èƒ½è®©äººå¦‚æ„ï¼Œä»¥è‡³äºŽæœ‰äººå®å¯ç”¨ backbone ç”šè‡³æ˜¯ angular å’Œ reactæ­é…ï¼Œä¹Ÿä¸ç”¨fluxâ€¦â€¦åŽæ¥reduxå‡ºçŽ°ï¼Œè§£å†³äº†fluxæ“ä½œç¹ççš„é—®é¢˜ï¼Œå¼€å§‹å—åˆ°äººä»¬çš„å…³æ³¨ï¼Œå†åŽæ¥ä½œè€…ä¹ŸåŠ å…¥äº† facebookä»Žäº‹reactçš„å¼€å‘ï¼Œreduxä¹Ÿé¡ºç†æˆç« çš„æˆä¸ºäº†reactå®˜æ–¹æŽ¨èçŠ¶æ€ç®¡ç†åº“ã€‚ ä½†æ˜¯ï¼Œåœ¨çœŸæ­£åŽ»å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘å‘çŽ°çŠ¶æ€çš„ç»´æŠ¤è¿˜æ˜¯æœ‰äº›ç¹çï¼Œå¦‚æžœä½ åœ¨è®¾è®¡é˜¶æ®µæ²¡æœ‰è€ƒè™‘å‘¨å…¨ï¼Œå¼€å‘æ—¶å°±è¦ä¸åœçš„åœ¨action,container,reducerä¹‹å‰ä¿®æ”¹ï¼Œç©¿æ¢­ï¼Œè®©äººçœ¼èŠ±ç¼­ä¹±â€¦â€¦å—¯ï¼Œä¹Ÿæ²¡å‡†å„¿æ˜¯æˆ‘é¡¹ç›®ä¸å¤Ÿå¤§â€¦â€¦ å¦å¤–ï¼Œç”±äºŽreduxå¤§é‡ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œé—¨æ§›æœ‰ç‚¹é«˜å‘¢ã€‚å½“æ—¶ä¸ºäº†ç†è§£reduxé‡Œé¢çš„æ¦‚å¿µï¼Œæˆ‘å¤§æ¦‚è¯»äº†ä¸€å‘¨çš„æ–‡æ¡£â€¦â€¦ æŒ‰ä½ èƒƒï¼ˆAnywhereï¼‰ï¼Œå¦‚æžœä½ æ›´ç†Ÿæ‚‰é¢å‘å¯¹è±¡ï¼Œç¾¡æ…•mvvmæ¡†æž¶çš„ç®€å•ï¼Œé‚£ä½ çœŸçš„åº”è¯¥ä½“éªŒä¸€ä¸‹mobx mobxæ˜¯å•¥ï¼Ÿmobxæ˜¯ä¸ªæ–°çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå“åº”å¼çš„ï¼Œæˆ‘æ˜¯çœ‹äº†é˜®ä¸€å³°çš„å¾®åšçŸ¥é“çš„ï¼ŒåŽæ¥æŸ¥äº†èµ„æ–™å‘çŽ°ï¼Œreduxçš„ä½œè€…åœ¨twitteræŽ¨èäº†è¿™ä¸ªåº“ï¼Œè¿˜æ˜¯ä½œä¸ºredexçš„æ›¿ä»£å“â€¦â€¦ é‚£ä¹ˆåºŸè¯å°‘è¯´ï¼Œè®©æˆ‘ä»¬çŽ°åœ¨çœ‹çœ‹mobxæ€Žä¹ˆç”¨å§ apiç®€å•ä»‹ç»å’Œreduxä¸€æ ·ï¼Œmobxæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº“ï¼Œä¸ä¾èµ–äºŽreactä¹Ÿèƒ½è‡ªå·±ç”¨ï¼Œå®ƒåªæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼šè§‚æµ‹çŠ¶æ€ï¼Œè®¡ç®—å€¼å’Œååº”ã€‚è¿™ä¸‰ä¸ªæ¦‚å¿µåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªmobxçš„apiï¼šobservableï¼Œcomputedå’Œautorunã€‚ å’±ä»¬å…ˆæ¥ä¸ªæœ€ç®€å•çš„ä¾‹å­ 1234567891011121314151617import &#123; observable, computed, autorun &#125; from 'mobx';let numbers = observable([1,2,3]);let sum = computed(() =&gt; numbers.reduce((a, b) =&gt; a + b, 0));let disposer1 = autorun(() =&gt; console.log(`sum:$&#123;sum.get()&#125;`));let disposer2 = autorun(() =&gt; console.log(`length:$&#123;numbers.length&#125;`));// sum:6// length:3numbers.push(4);// sum:10// length:4disposer2();numbers.push(5);// sum:15 è¿™ä¸ªä¾‹å­ä¸­ï¼Œobservableç”¨æ¥ç»‘å®šæ•°æ®ï¼›computedç”¨æ¥ç»‘å®šè®¡ç®—æ–¹æ³•ï¼›autorunç”¨æ¥æ³¨å†Œæ•°æ®å˜åŒ–æ—¶å“åº”çš„æ–¹æ³•ï¼Œè¿”å›žçš„å‡½æ•°ç”¨æ¥å–æ¶ˆå“åº”ã€‚ ä¸‹é¢æˆ‘ä»¬è¯•ç€æ¥å†™ä¸€ä¸ªTodoList 12345678910111213141516171819202122232425262728import &#123; observable, computed, autorun &#125; from 'mobx';class Todo &#123; id = Math.random(); @observable content; @observable finished = false; constructor(content) &#123; this.content = content; &#125;&#125;class TodoList &#123; @observable todos = []; @computed get todoListString() &#123; return this.todos.filter(todo =&gt; !todo.finished).map((todo, i) =&gt; `$&#123;i+1&#125;. $&#123;todo.content&#125;`).join('\n'); &#125;&#125;const store = new TodoList();store.todos.push( new Todo("task1"), new Todo("task2"), new Todo("task3"));autorun(() =&gt; console.log(store.todoListString))store.todos[2].finished = true; ä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œé’ˆå¯¹ç±»çš„å±žæ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¿®é¥°å™¨@observableã€@computedæ¥è¿›è¡Œç»‘å®šï¼Œä¿®é¥°å™¨æ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œç›®å‰Babelå·²ç»æ”¯æŒã€‚è¯¦ç»†çš„ä»‹ç»å¯ä»¥çœ‹ECMAScript 6 å…¥é—¨ä¸­ä¿®é¥°å™¨ä¸€ç«  å¦‚æžœä¸æƒ³ç”¨ä¿®é¥°å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨extendObservableå‡½æ•°ï¼Œè·Ÿä¿®é¥°å™¨çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼š 123456789101112131415161718192021222324252627282930313233import &#123; extendObservable, autorun &#125; from 'mobx';class Todo &#123; id = Math.random(); constructor(content) &#123; extendObservable(this, &#123; content: content, finished: false &#125;) &#125;&#125;class TodoList &#123; constructor() &#123; extendObservable(this, &#123; todos: [], todoListString: function() &#123; return this.todos.filter(todo =&gt; !todo.finished).map((todo, i) =&gt; `$&#123;i+1&#125;. $&#123;todo.content&#125;`).join('\n'); &#125; &#125;) &#125;&#125;const store = new TodoList();store.todos.push( new Todo("task1"), new Todo("task2"), new Todo("task3"));autorun(() =&gt; console.log(store.todoListString))store.todos[2].finished = true; mobx-reactåœ¨è·Ÿreacté…åˆæ—¶ï¼Œmobxæä¾›äº†mobx-reactåŒ…ï¼Œä½¿ç”¨@observerè£…é¥°å™¨æˆ–è€…observerå‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨å°†reactç»„å»ºçš„renderæ–¹æ³•åŒ…è£…åˆ°mobx.autoruné‡Œé¢ã€‚è¿˜æ˜¯ä»¥å‰é¢çš„TodoListä¸ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091import &#123; observable, computed &#125; from 'mobx';import &#123; observer &#125; from mobxReact;import &#123; Component &#125; from React;class Todo &#123; id = Math.random(); @observable content; @observable finished = false; constructor(content) &#123; this.content = content; &#125; finish() &#123; this.finished = true &#125;&#125;class TodoList &#123; @observable todos = []; @computed get unFinishedList() &#123; return this.todos.filter(todo =&gt; !todo.finished); &#125; @computed get finishedList() &#123; return this.todos.filter(todo =&gt; todo.finished); &#125; addTodo(content) &#123; if (content)&#123; this.todos.push(new Todo(content)) &#125; &#125;&#125;@observerclass TodoListView extends Component &#123; render() &#123; const &#123; todoList &#125; = this.props; let onChange = (event) =&gt; &#123; this.value = event.target.value &#125; let onClick = () =&gt; &#123; todoList.addTodo(this.value) &#125; return (&lt;div&gt; &lt;h2&gt;æ·»åŠ ä»»åŠ¡&lt;/h2&gt; &lt;input type="text" value=&#123; this.value &#125; onChange=&#123; onChange &#125;/&gt; &lt;button type="button" onClick=&#123; onClick &#125;&gt;æ·»åŠ &lt;/button&gt; &lt;h2&gt;æœªå®Œæˆä»»åŠ¡&lt;/h2&gt; &lt;ol&gt; &#123;todoList.unFinishedList.slice(0).map((todo,index) =&gt; &lt;TodoView todo=&#123;todo&#125; key=&#123;todo.id&#125; /&gt; )&#125; &lt;/ol&gt; Tasks left: &#123;todoList.unFinishedList.length&#125; &lt;h2&gt;å·²å®Œæˆä»»åŠ¡&lt;/h2&gt; &lt;ol&gt; &#123;todoList.finishedList.map((todo) =&gt; &lt;FinishedView todo=&#123;todo&#125; key=&#123;todo.id&#125; /&gt; )&#125; &lt;/ol&gt; &lt;/div&gt;) &#125;&#125;const TodoView = observer((props) =&gt;&#123; let &#123; todo &#125; = props; return (&lt;li&gt; &lt;input type="checkbox" checked=&#123;todo.finished&#125; onClick=&#123;todo.finish.bind(todo)&#125; /&gt;&#123;todo.content&#125; &lt;/li&gt;) &#125;);@observerclass FinishedView extends Component&#123; render() &#123; let &#123; todo &#125; = this.props; return (&lt;li&gt; &lt;del&gt;&#123;todo.content&#125;&lt;/del&gt; &lt;/li&gt;) &#125;&#125;const store = new TodoList();React.render(&lt;TodoListView todoList=&#123;store&#125; /&gt;, document.body);store.todos.push( new Todo("Get Coffee"), new Todo("Write simpler code")); åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨mobx-reactçš„ä¸åŒç‚¹åªæ˜¯åœ¨ç¼–å†™ç»„ä»¶ç±»æ—¶observeråŒ…è£…äº†ä¸€ä¸‹ï¼Œå…¶ä»–çš„è·Ÿä¸ä½¿ç”¨mobx-reactæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚å¦å¤–ï¼Œå¦‚æžœåœ¨stroeé‡ŒåŠ å…¥æ–¹æ³•ï¼Œå°±å¯ä»¥åšåˆ°ç±»ä¼¼actionä¸€æ ·çš„åŠ¨ä½œï¼Œä½¿ç”¨ä¸Šæ¯”reduxè¦ç®€å•å¾ˆå¤šã€‚å½“ç„¶è¿™ä¹Ÿå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“å­ç»„ä»¶çŠ¶æ€å˜åŒ–å½±å“åˆ°çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œå¦‚ä½•é€šçŸ¥çˆ¶ç»„ä»¶ã€‚reduxç”¨ç±»ä¼¼dbusçš„è®¾è®¡è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œmobxæ€Žä¹ˆè§£å†³ï¼Œæˆ‘è¿˜æ²¡æœ‰çœ‹åˆ°ï¼ŒåŽç»­çœ‹åˆ°äº†å†åšè¡¥å……ã€‚ ç®€å•çš„æ€»ç»“æ€Žä¹ˆè¯´å‘¢ï¼Œæ€»æ„Ÿè§‰mobxçš„åŠŸèƒ½å’Œvueå¥½åƒâ€¦â€¦ï¿£Ï‰ï¿£=â€¦â€¦ç‰¹åˆ«æ˜¯computedâ€¦â€¦è¿™ç§è®¾è®¡å¯¹äºŽå†™æƒ¯äº†mvcçš„äººæ¥è¯´ä¼šæ„Ÿè§‰éžå¸¸äº²åˆ‡ï¼Œstroeå…¶å®žå°±æ˜¯ç›¸å½“äºŽå¹³æ—¶å¸¸å†™çš„modelå˜›ï¼Œæ¦‚å¿µå¾ˆå®¹æ˜“ç†è§£ã€‚éš¾åº¦ä¸Šï¼Œä¸ªäººæ„Ÿè§‰ä¸é«˜ï¼Œé™¤äº†ä¸€äº›ç»‘å®šåŽçš„æ•°æ®éœ€è¦è°ƒç”¨setã€getæ–¹æ³•ï¼Œapiä¹Ÿä¸å¤šã€‚ å…¶å®žmobxè¿˜æœ‰å¾ˆå¤šçš„åŠŸèƒ½æ²¡æœ‰ä»‹ç»åˆ°ï¼Œè€Œä¸”åœ¨ç½‘ä¸Šèµ„æ–™ä¹Ÿå¾ˆå°‘ï¼Œå¦‚æžœæœ‰æ—¶é—´çš„è¯ï¼Œæ‰“ç®—è¯•ç€ç¿»è¯‘mobxçš„æ–‡æ¡£ã€‚æ›´å¤šçš„ä¾‹å­ï¼ŒåŽç»­å†åšè¯¦ç»†çš„è¡¥å……ï¼Œä»Šå¤©å°±å…ˆåˆ°è¿™é‡Œå§ï¼Œæˆ‘å®žåœ¨æ˜¯å†™ä¸åŠ¨äº†â€¦â€¦_(:3 ã€âˆ )_ ç›¸å…³æ–‡ç«  MobX Documentation A short introduction to MobX]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æµ®ç‚¹æ•°è®¡ç®—ä¸ºä»€ä¹ˆä¸ç²¾ç¡®]]></title>
      <url>%2F2016%2F11%2F17%2F%E6%B5%AE%E7%82%B9%E6%95%B0%E8%AE%A1%E7%AE%97%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%B2%BE%E7%A1%AE%2F</url>
      <content type="text"><![CDATA[å…¶å®žè¿™ç¯‡åšå®¢æ—©å°±å†™å¥½äº†ï¼Œåªä¸è¿‡ä¹‹å‰æ‡’ä¸€ç›´æ²¡æœ‰æ•´ç†å®Œå–„â€¦â€¦å“ˆå“ˆå“ˆâ€¦â€¦ _(:3 ã€âˆ )_ å‰å‡ å‡ å‡ å‡ å¤©ï¼Œåœ¨å¾®åšä¸Šçœ‹åˆ°å¯‡èƒ–è½¬äº†ä¸€ä¸ªå…³äºŽæµ®ç‚¹æ•°è®¡ç®—çš„å¾®åšï¼Œé‡Œé¢çš„å†…å®¹ä¸å¤ªå‡†ç¡®ã€‚æ­£å¥½ä¹‹å‰æˆ‘è°ƒæŸ¥è¿‡ä¸€äº›å…³äºŽæµ®ç‚¹æ•°çš„èµ„æ–™ï¼Œåœ¨è¿™é‡Œå¥½å¥½æŽ°åƒæŽ°åƒï¼Œåšä¸ªè®°å½•~(ï¿£â–½ï¿£)~* ç»“è®ºå…ˆè¯´ç»“è®ºï¼Œå«Œåˆè‡­åˆé•¿çš„çœ‹åˆ°è¿™é‡Œå°±å¯ä»¥äº†: æµ®ç‚¹æ•°è®¡ç®—ä¸ç²¾ç¡®å¹¶ä¸æ˜¯bugï¼Œå› ä¸ºæ ‡å‡†å°±æ˜¯è¿™æ ·çš„ã€‚ åŽŸå› ç®€å•æ¥è¯´æ˜¯è¿™æ ·ï¼š2è¿›åˆ¶çš„å°æ•°æ— æ³•ç²¾ç¡®çš„è¡¨è¾¾10è¿›åˆ¶å°æ•°ï¼Œè®¡ç®—æœºåœ¨è®¡ç®—10è¿›åˆ¶å°æ•°çš„è¿‡ç¨‹ä¸­è¦å…ˆè½¬æ¢ä¸º2è¿›åˆ¶è¿›è¡Œè®¡ç®—ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºçŽ°äº†è¯¯å·®ã€‚ è§£å†³æ–¹æ³•ï¼šå¯¹äºŽéœ€è¦ç²¾ç¡®ç»“æžœçš„åœºæ™¯ï¼Œåˆ«ç›´æŽ¥ä½¿ç”¨æµ®ç‚¹æ•°è¿›è¡Œè®¡ç®—ã€‚çŽ°é˜¶æ®µå¯ä»¥ä½¿ç”¨big.jsè§£å†³ï¼Œç­‰ä»¥åŽecmascriptå®žçŽ°decimaläº†ï¼Œå°±å¯ä»¥ä½¿ç”¨decimalç±»åž‹è®¡ç®—äº†ã€‚ å°æ•°ç®—ä¸å‡†ï¼ŒçœŸçš„æ˜¯jsçš„é”…å—ï¼Ÿè¯´åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®žè¿™æ˜¯ä¸¤ä¸ªé”…ï¼Œjsè®¡ç®—ä¸å‡†ç¡®ä¸æ­¢ä¼šå‡ºçŽ°åœ¨å°æ•°çš„è®¡ç®—ä¸Šï¼Œè¿˜ä¼šå‡ºçŽ°åœ¨å¤§æ•´æ•°è®¡ç®—ä¸Šï¼Œå¯ä»¥è¿è¡Œä¸‹é¢ä¸¤è¡Œä»£ç æŸ¥çœ‹é—®é¢˜çš„å…·ä½“è¡¨çŽ°ï¼š 120.1 + 0.2 == 0.3; // false9999999999999999 + 2 == 10000000000000001; // false å½“ç„¶ï¼Œè¿™ä¸ªé”…è‚¯å®šä¸æ˜¯javascriptèƒŒã€‚äº‹å®žä¸Šï¼Œä½¿ç”¨äº†IEEE 754 æ ‡å‡†æ¥å­˜å‚¨æµ®ç‚¹ç±»åž‹çš„ä»»ä½•ç¼–ç¨‹è¯­è¨€ï¼ˆC/C++/C#/Java ç­‰ç­‰ï¼‰éƒ½å­˜åœ¨ç²¾åº¦ä¸¢å¤±é—®é¢˜ã€‚ ä¾‹å¦‚åœ¨ Java ä¸­ï¼Œè¦æƒ³ç®—å‡†æµ®ç‚¹æ•°ï¼ŒåŒæ ·ä¸èƒ½ç›´æŽ¥è®¡ç®—ï¼Œéœ€è¦ä½¿ç”¨ BigDecimal ç±»æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ å½“ç„¶ï¼Œjavascriptä¹Ÿå¹¶æ²¡æœ‰è½åŽäºŽå…¶ä»–è¯­è¨€ã€‚ECMAScript è§„èŒƒä¸­å·²æœ‰ decimal ç±»åž‹çš„ææ¡ˆäº†ï¼Œä½†ç›®å‰å°šæœªè¢«æ­£å¼é‡‡çº³ã€‚ ä¸ºä»€ä¹ˆä¸ç®—å‡†ï¼Ÿè¦è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå°±å¾—ä»Ž10è¿›åˆ¶ä¸Ž2è¿›åˆ¶çš„è½¬æ¢è¯´èµ·ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œè®¡ç®—æœºåšè¿ç®—æ˜¯ä½¿ç”¨äºŒçº§åˆ¶çš„ã€‚æ‰€ä»¥å…¶å®žå’±ä»¬åœ¨ç¨‹åºä¸­åš10è¿›åˆ¶è¿ç®—ï¼Œéƒ½æ˜¯è¦è½¬æ¢ä¸º2è¿›åˆ¶å†è¿›è¡Œè®¡ç®—çš„ã€‚10è¿›åˆ¶æ•´æ•°è½¬æ¢ä¸º2è¿›åˆ¶çš„æ–¹æ³•å¯èƒ½å¤§å®¶éƒ½çŸ¥é“ï¼š é™¤ä»¥2ï¼Œå•†ç»§ç»­é™¤ä»¥2ï¼Œå¾—åˆ°0ä¸ºæ­¢ï¼Œå°†ä½™æ•°é€†åºæŽ’åˆ—ä¾‹å¦‚ï¼š22 / 2 11 ä½™ 011 / 2 5 ä½™ 15 / 2 2 ä½™ 12 / 2 1 ä½™ 01 / 2 0 ä½™ 1æ‰€ä»¥22çš„çš„äºŒè¿›åˆ¶æ˜¯10110 é‚£10è¿›åˆ¶å°æ•°è½¬æ¢ä¸º2è¿›åˆ¶çš„æ–¹æ³•å‘¢ï¼Ÿ ä¹˜ä»¥2ï¼Œå–æ•´ï¼Œå°æ•°éƒ¨åˆ†ç»§ç»­ä¹˜ä»¥2ï¼Œå–æ•´ï¼Œå¾—åˆ°å°æ•°éƒ¨åˆ†0ä¸ºæ­¢ï¼Œå°†æ•´æ•°é¡ºåºæŽ’åˆ—0.8125 x 2 1.625 å– 10.625 x 2 1.25 å– 10.25 x 2 0.5 å– 00.5 x 2 1.0 å– 1æ‰€ä»¥0.8125çš„äºŒè¿›åˆ¶æ˜¯0.1101 é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œæ¯”å¦‚ä½ æƒ³è®¡ç®—10è¿›åˆ¶0.2çš„2è¿›åˆ¶ï¼š 0.2 x 2 0.40.4 x 2 0.80.8 x 2 1.60.6 x 2 1.20.2 x 2 0.4â€¦â€¦ å‘çŽ°äº†å—ï¼Ÿå®ƒä¹˜ä¸å°½ï¼Œæ˜¯æ— é™å¾ªçŽ¯çš„â€¦â€¦ è€Œ javascript ä½¿ç”¨64ä½åŒç²¾åº¦æµ®ç‚¹æ•°å­˜å‚¨æ•°å­—ï¼Œç±»ä¼¼ç§‘å­¦è®¡æ•°æ³•ï¼Œå…¶ä¸­1ä½ç”¨æ¥å­˜å‚¨ç¬¦å·ï¼Œ11ä½ç”¨æ¥å­˜å‚¨æŒ‡æ•°å€¼ï¼Œ52ä½ç”¨æ¥å­˜å‚¨å°¾æ•°å€¼ï¼ˆçœŸæ­£çš„æ•°å­—ï¼‰ï¼Œå½“è®¡ç®—çš„ç»“æžœçš„äºŒè¿›åˆ¶æœ‰æ•ˆä½æ•°è¶…è¿‡ 52 ä½æ—¶ï¼Œå°±ä¼šå‡ºçŽ°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜â€¦â€¦ å¤§æ•´æ•°è®¡ç®—çš„åŽŸå› ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæœ‰æ•ˆä½æ•°è¶…è¿‡ 52ä½æ—¶ï¼Œç²¾åº¦å°±ä¼šä¸¢å¤± è¿™å°±è§£é‡Šäº†ä¸‹é¢è¿™ç§æƒ…å†µï¼š åè¿›åˆ¶ 0.1 çš„äºŒè¿›åˆ¶ä¸º 0.0 0011 0011 0011 â€¦ ï¼ˆå¾ªçŽ¯ 0011ï¼‰åè¿›åˆ¶ 0.2 çš„äºŒè¿›åˆ¶ä¸º 0.0011 0011 0011 â€¦ ï¼ˆå¾ªçŽ¯ 0011ï¼‰ 0.1 + 0.2 ç›¸åŠ å¯è¡¨ç¤ºä¸ºï¼š e = -4; m = 1.10011001100â€¦1100ï¼ˆ52 ä½ï¼‰ + e = -3; m = 1.10011001100â€¦1100ï¼ˆ52 ä½ï¼‰-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ e = -3; m = 0.11001100110â€¦0110 + e = -3; m = 1.10011001100â€¦1100-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ e = -3; m = 10.01100110011â€¦001-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ = 0.01001100110011â€¦001 = 0.30000000000000004ï¼ˆåè¿›åˆ¶ï¼‰ ä½†æ˜¯0.05å’Œ0.2ç”¨äºŒè¿›åˆ¶éƒ½æ— æ³•ç²¾ç¡®è¡¨è¾¾ï¼Œ0.05 + 0.2 å´ä¸ä¼šè®¡ç®—é”™è¯¯ï¼Œ0.2 + 0.7 ä¼šè®¡ç®—é”™è¯¯ï¼Œ1.2 +1.7 åˆä¸ä¼šï¼Œè¿™åˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ å…·ä½“çš„åŽŸå› æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„èµ„æ–™â€¦â€¦ è²Œä¼¼è¿™å’Œ IEEE 754 çš„èˆå…¥æ¨¡å¼æœ‰å…³ç³»ã€‚ IEEE 754 é‡‡ç”¨çš„æ˜¯æœ€è¿‘èˆå…¥æ¨¡å¼ï¼Œå’Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ˜¯å››èˆäº”å…¥æ¨¡å¼æœ‰äº›è®¸ä¸åŒï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå®¹æ˜“å¼•èµ·è¯¯è§£çš„åœ°æ–¹ä¹‹ä¸€ã€‚ä¸¾ä¾‹æ¯”è¾ƒå¦‚ä¸‹ï¼š æœ€è¿‘èˆå…¥æ¨¡å¼ï¼šRound(0.5) = 0; Round(1.5) = 2; Round(2.5) = 2; å››èˆäº”å…¥æ¨¡å¼ï¼šRound(0.5) = 1; Round(1.5) = 2; Round(2.5) = 3; æ—¢å½“æœ‰ä¸¤ä¸ªæœ€æŽ¥è¿‘çš„å¯è¡¨ç¤ºçš„å€¼æ—¶é¦–é€‰â€œå¶æ•°â€å€¼ã€‚ å…·ä½“çš„åŽŸå› æˆ‘ä¼šå†è°ƒæŸ¥è°ƒæŸ¥ï¼Œæœ‰äº†æ–°çš„èµ„æ–™å†è¡¥å……åˆ°è¿™é‡Œã€‚ å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå½“ç„¶ï¼Œé—®é¢˜çš„è§£å†³æ–¹æ³•å…¶å®žä¹Ÿå·²ç»æœ‰å‰äººè·Ÿå’±ä»¬é“ºå¥½è·¯äº†ï¼Œæ¯•ç«Ÿè¿™ä¸ªåœ¨é—®é¢˜åœ¨ç¼–ç¨‹é¢†åŸŸé‡Œå…¶å®žæ˜¯ä¸ªæŒºå¸¸è§çš„é—®é¢˜â€¦â€¦ ç½‘ä¸Šçš„è§£å†³åŠžæ³•äº”èŠ±å…«é—¨ï¼Œæ€»çš„åŽŸåˆ™å°±æ˜¯é€ä½è¿ç®—ã€‚æˆ‘æŽ¨è github ä¸Š MikeMcl å¼€å‘çš„ big.js ã€‚è¿™ä¸ªåº“ä¸å°½æ”¯æŒåŸºç¡€è¿ç®—ï¼Œè€Œä¸”è¿˜æ”¯æŒå„ç§å‡½æ•°è¿ç®—å’Œæ¯”è¾ƒè¿ç®—ï¼Œç›¸å½“å…¨é¢å‘¢ã€‚å®žçŽ°ä¸Šï¼Œæ˜¯å°†æ•°å­—æŒ‰ç…§ç§‘å­¦è®¡æ•°æ³•è§£æžæˆä¸€ä¸ªåŒ…å«æ­£è´Ÿç¬¦å·ã€æŒ‡æ•°ã€å°¾æ•°çš„å¯¹è±¡ï¼Œå†åšè¿ç®—ã€‚ä¾‹å­å°±ä¸å†™äº†ï¼Œå®ƒçš„æ–‡æ¡£å¾ˆå…¨ï¼Œè€Œä¸”ç®€å•æ˜“æ‡‚ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸ªä½œè€…é™¤äº† big.js è¿˜å¼€å‘äº†å¦ä¸¤ä¸ªè®¡ç®—åº“ bignumber.js å’Œ decimal.jsï¼Œä¸‰ä¸ªåº“çš„ä¾§é‡ç‚¹ä¸ä¸€æ ·ï¼Œå…³äºŽè¿™ä¸‰ä¸ªçš„å¯¹æ¯”ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä½œè€…è‡ªå·±å†™çš„wiki What is the difference between big.js, bignumber.js and decimal.js? ç›¸å…³æ–‡ç« : æµ®ç‚¹æ•°ä¸ºä»€ä¹ˆä¸ç²¾ç¡®ï¼Ÿ JavaScriptè¶…å¤§æ•´æ•°åŠ æ³• JavaScript ä¸­å°æ•°å’Œå¤§æ•´æ•°çš„ç²¾åº¦ä¸¢å¤± IEEE 754 æµ®ç‚¹æ•°çš„è¡¨ç¤ºç²¾åº¦æŽ¢è®¨ IEEE 754]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ–°çš„å¼€å§‹]]></title>
      <url>%2F2016%2F11%2F16%2F%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B%2F</url>
      <content type="text"><![CDATA[å“ˆï¼Œè·ç¦»ä¸Šæ¬¡å†™åšå®¢åˆšå¥½ä¸€å¹´äº†å‘¢ï¼Œè¯è¯´æˆ‘è¿˜çœŸæ˜¯æ‡’å‘¢â€¦â€¦ _(:3 ã€âˆ )_ è¿™é‡Œä¸å¾—ä¸æ„Ÿå¹ä¸‹æ¦œæ ·çš„åŠ›é‡æ˜¯æ— ç©·çš„ã€‚è¦ä¸æ˜¯ç»§ä¼Ÿå‘èµ·æ¯å‘¨å†™åšå®¢çš„æ´»åŠ¨ï¼Œä¼°è®¡æˆ‘çŽ°åœ¨è¿˜åœ¨åºŠä¸Šèººç€å‘¢â€¦â€¦è¯»å¥½ä¹¦ï¼Œäº¤é«˜äººï¼Œæ­¤è¨€éžè™šå‘€~ æ€»ä¹‹ï¼Œå¸Œæœ›è¿™æ˜¯ä¸ªæ–°çš„å¼€å§‹ï¼ŒæœŸå¾…èƒ½é‡è§æ›´å¥½çš„è‡ªå·±~(ï½¡ï½¥Ï‰ï½¥ï½¡)]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Capitanä¹‹åŽJetBrainsçš„äº§å“éƒ½ä¸èƒ½ç”¨äº†]]></title>
      <url>%2F2015%2F11%2F21%2FCapitan%E4%B9%8B%E5%90%8EJetBrains%E7%9A%84%E4%BA%A7%E5%93%81%E9%83%BD%E4%B8%8D%E8%83%BD%E7%94%A8%E4%BA%86%2F</url>
      <content type="text"><![CDATA[æ›´æ–°äº†osxå‡çº§10.11 EL Capitanä¹‹åŽå‘çŽ°æœ‰å¥½å¤šå‘å•Šâ€¦â€¦é™åˆ¶è¶…å¤šè€Œä¸”JetBrainsçš„äº§å“éƒ½ä¸èƒ½ç”¨äº†â€¦â€¦ æŸ¥äº†ä¸€æºœå¤Ÿè²Œä¼¼æ˜¯ä¹‹å‰å®‰è£…çš„ä¸€äº›ç³»ç»Ÿè½¯ä»¶éƒ½è¢«æ¸…é™¤äº†ï¼Œè€Œä¸”è¿˜éœ€è¦æŽ¥è§¦rootlessæ¨¡å¼ï¼Œæ€»ä¹‹å…ˆé™„ä¸Šæœç´¢åˆ°çš„èµ„æ–™é“¾æŽ¥å§ Intellij IDEAã‚„AppCodeãŒèµ·å‹•ã—ãªã„å ´åˆã«è€ƒãˆã‚‰ã‚Œã‚‹ã“ã¨ï¼ˆéœ€ç¿»å¢™ï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‚®ä»¶é“¾æŽ¥ä¸­åŠ å…¥å‚æ•°å¯ä»¥ç»™è¦å‘é€çš„é‚®ä»¶æ·»åŠ æ ‡é¢˜å’Œå†…å®¹ï¼Œç¬¬ä¸€æ¬¡å‘çŽ°å”‰]]></title>
      <url>%2F2015%2F10%2F21%2F%E9%82%AE%E4%BB%B6%E9%93%BE%E6%8E%A5%E4%B8%AD%E5%8A%A0%E5%85%A5%E5%8F%82%E6%95%B0%E5%8F%AF%E4%BB%A5%E7%BB%99%E8%A6%81%E5%8F%91%E9%80%81%E7%9A%84%E9%82%AE%E4%BB%B6%E6%B7%BB%E5%8A%A0%E6%A0%87%E9%A2%98%E5%92%8C%E5%86%85%E5%AE%B9%EF%BC%8C%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%8F%91%E7%8E%B0%E5%94%89%2F</url>
      <content type="text"><![CDATA[aæ ‡ç­¾çš„hrefå±žæ€§å€¼å¯ä»¥æ˜¯mailtoåè®®çš„åœ°å€ï¼Œè¿™ä¸ªæ¯”è¾ƒå¸¸è§ï¼Œä½†æ˜¯èƒ½åŠ å‚æ•°è®¾ç½®é‚®ä»¶å†…å®¹æˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡è§å‘¢ã€‚ ç¤ºä¾‹ï¼š mailto:xxx@xxx.com?Subject=æ ‡é¢˜&amp;Body=æ­£æ–‡ è²Œä¼¼æŒ‰ç…§getæ–¹å¼åŠ ä¸Šå‚æ•°å°±è¡Œäº†ï¼ŒSubjectä»£è¡¨æ ‡é¢˜ï¼ŒBodyä»£è¡¨æ­£æ–‡]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ€»ç»“ä¸‹hexoæ­å»ºçš„è¿‡ç¨‹]]></title>
      <url>%2F2015%2F10%2F16%2F%E6%80%BB%E7%BB%93%E4%B8%8Bhexo%E6%90%AD%E5%BB%BA%E7%9A%84%E8%BF%87%E7%A8%8B%2F</url>
      <content type="text"><![CDATA[2016-11-16 UPDATE: è·ç¦»å†™ä¸‹è¿™ç¯‡åšå®¢å·²ç»è¿‡äº†ä¸€å¹´äº†ï¼Œhexoåœ¨è¿™ä¸€å¹´é‡Œå‘å±•çš„æŒºå¿«ã€‚çŽ°åœ¨hexoçš„æ–‡æ¡£å·²ç»é½å…¨ï¼Œæ•´ä¸ªå·¥ä½œæµç¨‹ä¹Ÿç›¸å½“é¡ºç•…äº†ã€‚ å®‰è£…è¿‡ç¨‹ä¸­å¦‚æžœ node-gyp æŠ¥ errorï¼Œå¯ä»¥å°è¯•å‡çº§xcodeï¼Œå¹¶å®‰è£…xcode-select å‡çº§ CLTã€‚ ä¸‹é¢é™„ä¸Šå‡ ç¯‡æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œå»ºç«™è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜å¯ä»¥æŸ¥é˜…ä¸€ä¸‹ã€‚ Hexoå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆæ”¶é›†äº†å¾ˆå¤šä½¿ç”¨hexoè¿‡ç¨‹ä¸­çš„å¸¸è§é—®é¢˜ hexoä½ çš„åšå®¢æ–‡ç« çš„å†…å®¹å¾ˆå…¨ï¼Œä¸æ­¢å†™äº†å¦‚ä½•ä½¿ç”¨hexoï¼Œå¦‚ä½•ä½¿ç”¨githubï¼Œå¦‚ä½•æ‰¾å›¾åºŠç­‰é—®é¢˜ä¹Ÿéƒ½æœ‰æè¿°ï¼Œå¦‚æžœæ˜¯ä½¿ç”¨github pagesæ­å»ºåšå®¢çš„è¯ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿç”¨äº† å¦‚ä½•æ­å»ºä¸€ä¸ªç‹¬ç«‹åšå®¢â€”â€”ç®€æ˜ŽGithub Pagesä¸ŽHexoæ•™ç¨‹å’Œä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼Œè¿™ç¯‡æ–‡ç« çš„å†…å®¹ä¹Ÿå¾ˆå…¨é¢ï¼Œé™¤äº†åšå®¢çš„æ­å»ºè¿‡ç¨‹ï¼Œå¦‚ä½•åœ¨è´­ä¹°åŸŸåå’ŒæœåŠ¡å™¨ä¹Ÿæœ‰æè¿°ï¼Œåªä¸è¿‡å›¾ç‰‡è²Œä¼¼éƒ½å·²ç»å¤±æ•ˆäº†â€¦â€¦æœ‰äº›é—æ†¾å‘¢â€¦â€¦ ç¿»è¯‘è‡ªGitHub Pagesçš„Helpé¡µé¢ï¼ˆä»åœ¨æ›´æ–°ä¸­ï¼‰github pagesçš„helpé¡µé¢çš„ç¿»è¯‘ï¼Œå¯¹äºŽè‹±è¯­è‹¦æ‰‹çš„äººæ¥è¯´ï¼Œåº”è¯¥ä¼šå¾ˆæœ‰å¸®åŠ©å§]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ€»ç»“ä¸€ä¸‹å‡çº§OS X El CapitanåŽbrewé‡åˆ°çš„é—®é¢˜]]></title>
      <url>%2F2015%2F10%2F15%2F%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E5%8D%87%E7%BA%A7OS-X-El-Capitan%E5%90%8Ebrew%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
      <content type="text"><![CDATA[å‡çº§äº†osxä¹‹åŽï¼Œå…ˆæ˜¯brew updateçš„æ—¶å€™æŠ¥é”™ï¼ŒåŽæ¥ç”¨brewå®‰è£…jenvçš„æ—¶å€™åˆæç¤ºè¯´éœ€è¦rootæƒé™ Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.Error: Failure while executing: /usr/bin/otool -L /usr/bin/install_name_tool ä½†æ˜¯sudo brew installåˆæŠ¥é”™ Error: Cowardly refusing to sudo brew installYou can use brew with sudo, but only if the brew executable is owned by root.However, this is both not recommended and completely unsupported so do so at your own risk. æœäº†ä¸‹è²Œä¼¼æ˜¯æ–°ç‰ˆosxçš„é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œæƒé™è®¾ç½®ï¼Œç”¨chownå‘½ä»¤è®¾ç½®ä¸€ä¸‹å°±å¥½äº† ä»¥ä¸‹æ˜¯ä¸€äº›å‚è€ƒèµ„æ–™ How To Fix Cowardly Refusing to Sudo error in Brew â€“ Mac OS X Failed brew update on El Capitan (OS X 10.11) Beta Mac OS X El Capitan ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸå¾Œã« brew update ãŒå‹•ã‹ãªã„å ´åˆã®å¯¾å‡¦æ–¹æ³•]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å•Šï¼Œæˆ‘çš„ç¬¬ä¸€æ¬¡]]></title>
      <url>%2F2015%2F10%2F14%2Ffirst-love%2F</url>
      <content type="text"><![CDATA[äººç”Ÿç¬¬ä¸€ç¯‡blogï¼Œæ€»è§‰å¾—æœ‰ç‚¹å„¿å°æ¿€åŠ¨å‘¢â€¦â€¦â„(â„ â„â€¢â„Ï‰â„â€¢â„ â„)â„ è¯è¯´å†è¿‡ç”Ÿæ—¥å°±30å²äº†å‘¢ï¼Œåšç¨‹åºå‘˜ä¹Ÿæ˜¯ç¬¬8ä¸ªå¹´å¤´ï¼Œæ„ˆå‘è§‰å¾—å°†è‡ªå·±çš„å¹³æ—¶çš„ä¸€äº›æƒ³æ³•ã€é‡åˆ°çš„ä¸€äº›é—®é¢˜è®°å½•ä¸‹æ¥å¾ˆé‡è¦ï¼Œå…¶å®žä»¥å‰ä¹Ÿå¾ˆæƒ³ï¼Œå¥ˆä½•æˆ‘æ‡’â€¦â€¦ æ€»ä¹‹ï¼Œä¹‹åŽä¼šåŠªåŠ›å¤šå†™ä¸€äº›ï¼Œä¹Ÿç®—æ˜¯å¯¹è‡ªå·±çš„ä¸€ç§æå‡å§ï¼Œå—¯ï¼Œå¸Œæœ›æˆ‘èƒ½ä¸€ç›´åšæŒä¸‹åŽ»~ &lt;(ï¿£â–½ï¿£)&gt; å“ˆå“ˆå“ˆâ€¦â€¦]]></content>
    </entry>

    
  
  
</search>
